{
  "version": 3,
  "sources": ["../app/utils/db.server.ts", "../app/utils/monitoring.server.ts", "../app/entry.server.tsx", "../app/utils/env.server.ts", "../app/utils/nonce-provider.ts", "../app/utils/timing.server.ts", "../app/root.tsx", "../app/components/error-boundary.tsx", "../app/utils/misc.tsx", "../app/utils/extended-theme.ts", "../app/components/forms.tsx", "../app/components/ui/checkbox.tsx", "../app/components/ui/input.tsx", "../app/components/ui/label.tsx", "../app/components/ui/textarea.tsx", "../app/components/progress-bar.tsx", "../app/components/ui/icon.tsx", "../app/components/search-bar.tsx", "../app/components/ui/status-button.tsx", "../app/components/ui/button.tsx", "../app/components/ui/tooltip.tsx", "../app/components/toaster.tsx", "../app/components/ui/dropdown-menu.tsx", "../app/utils/auth.server.ts", "../app/utils/connections.server.ts", "../app/utils/providers/github.server.ts", "../app/utils/cache.server.ts", "../app/routes/admin+/cache_.sqlite.tsx", "../app/utils/litefs.server.ts", "../app/utils/session.server.ts", "../app/utils/client-hints.tsx", "../app/utils/request-info.ts", "../app/utils/csrf.server.ts", "../app/utils/honeypot.server.ts", "../app/utils/theme.server.ts", "../app/utils/toast.server.ts", "../app/utils/user.ts", "../app/routes/$.tsx", "../app/routes/_auth+/auth.$provider.ts", "../app/utils/connections.tsx", "../app/utils/redirect-cookie.server.ts", "../app/routes/_auth+/auth.$provider.callback.ts", "../app/utils/verification.server.ts", "../app/routes/_auth+/login.tsx", "../app/components/spacer.tsx", "../app/routes/settings+/profile.two-factor.tsx", "../app/utils/user-validation.ts", "../app/routes/_auth+/verify.tsx", "../app/routes/settings+/profile.change-email.tsx", "../app/utils/email.server.ts", "../app/utils/totp.server.ts", "../app/routes/_auth+/onboarding.tsx", "../app/routes/_auth+/reset-password.tsx", "../app/routes/_auth+/onboarding_.$provider.tsx", "../app/routes/_auth+/forgot-password.tsx", "../app/routes/_auth+/logout.tsx", "../app/routes/_auth+/signup.tsx", "../app/routes/_marketing+/about.tsx", "../app/routes/_marketing+/index.tsx", "../app/routes/_marketing+/logos/logos.ts", "../app/routes/_marketing+/privacy.tsx", "../app/routes/_marketing+/support.tsx", "../app/routes/_marketing+/tos.tsx", "../app/routes/_seo+/robots[.]txt.ts", "../app/routes/_seo+/sitemap[.]xml.ts", "../app/routes/admin+/cache.tsx", "../app/utils/permissions.ts", "../app/routes/admin+/cache_.lru.$cacheKey.ts", "../app/routes/admin+/cache_.sqlite.$cacheKey.ts", "../app/routes/me.tsx", "../app/routes/resources+/download-user-data.tsx", "../app/routes/resources+/healthcheck.tsx", "../app/routes/resources+/note-images.$imageId.tsx", "../app/routes/resources+/user-images.$imageId.tsx", "../app/routes/settings+/profile.tsx", "../app/routes/settings+/profile.connections.tsx", "../app/routes/settings+/profile.index.tsx", "../app/routes/settings+/profile.password.tsx", "../app/routes/settings+/profile.password_.create.tsx", "../app/routes/settings+/profile.photo.tsx", "../app/routes/settings+/profile.two-factor.disable.tsx", "../app/routes/settings+/profile.two-factor.index.tsx", "../app/routes/settings+/profile.two-factor.verify.tsx", "../app/routes/users+/$username.tsx", "../app/routes/users+/$username_+/notes.tsx", "../app/routes/users+/$username_+/notes.$noteId.tsx", "../app/components/floating-toolbar.tsx", "../app/routes/users+/$username_+/notes.$noteId_.edit.tsx", "../app/routes/users+/$username_+/__note-editor.tsx", "../app/routes/users+/$username_+/notes.index.tsx", "../app/routes/users+/$username_+/notes.new.tsx", "../app/routes/users+/index.tsx", "server-assets-manifest:@remix-run/dev/assets-manifest", "server-entry-module:@remix-run/dev/server-build"],
  "sourcesContent": ["import { remember } from '@epic-web/remember'\nimport { PrismaClient } from '@prisma/client'\nimport chalk from 'chalk'\n\nexport const prisma = remember('prisma', () => {\n\t// NOTE: if you change anything in this function you'll need to restart\n\t// the dev server to see your changes.\n\n\t// Feel free to change this log threshold to something that makes sense for you\n\tconst logThreshold = 20\n\n\tconst client = new PrismaClient({\n\t\tlog: [\n\t\t\t{ level: 'query', emit: 'event' },\n\t\t\t{ level: 'error', emit: 'stdout' },\n\t\t\t{ level: 'warn', emit: 'stdout' },\n\t\t],\n\t})\n\tclient.$on('query', async e => {\n\t\tif (e.duration < logThreshold) return\n\t\tconst color =\n\t\t\te.duration < logThreshold * 1.1\n\t\t\t\t? 'green'\n\t\t\t\t: e.duration < logThreshold * 1.2\n\t\t\t\t? 'blue'\n\t\t\t\t: e.duration < logThreshold * 1.3\n\t\t\t\t? 'yellow'\n\t\t\t\t: e.duration < logThreshold * 1.4\n\t\t\t\t? 'redBright'\n\t\t\t\t: 'red'\n\t\tconst dur = chalk[color](`${e.duration}ms`)\n\t\tconsole.info(`prisma:query - ${dur} - ${e.query}`)\n\t})\n\tclient.$connect()\n\treturn client\n})\n", "import { ProfilingIntegration } from '@sentry/profiling-node'\nimport * as Sentry from '@sentry/remix'\nimport { prisma } from './db.server.ts'\n\nexport function init() {\n\tSentry.init({\n\t\tdsn: ENV.SENTRY_DSN,\n\t\tenvironment: ENV.MODE,\n\t\ttracesSampleRate: ENV.MODE === 'production' ? 1 : 0,\n\t\tdenyUrls: [\n\t\t\t/\\/resources\\/healthcheck/,\n\t\t\t// TODO: be smarter about the public assets...\n\t\t\t/\\/build\\//,\n\t\t\t/\\/favicons\\//,\n\t\t\t/\\/img\\//,\n\t\t\t/\\/fonts\\//,\n\t\t\t/\\/favicon.ico/,\n\t\t\t/\\/site\\.webmanifest/,\n\t\t],\n\t\tintegrations: [\n\t\t\tnew Sentry.Integrations.Http({ tracing: true }),\n\t\t\tnew Sentry.Integrations.Prisma({ client: prisma }),\n\t\t\tnew ProfilingIntegration(),\n\t\t],\n\t\tbeforeSendTransaction(event) {\n\t\t\t// ignore all healthcheck related transactions\n\t\t\tif (event.request?.headers?.['X-Healthcheck'] === 'true') return null\n\n\t\t\treturn event\n\t\t},\n\t})\n}\n", "import { PassThrough } from 'stream'\nimport {\n\tcreateReadableStreamFromReadable,\n\ttype DataFunctionArgs,\n\ttype HandleDocumentRequestFunction,\n} from '@remix-run/node'\nimport { RemixServer } from '@remix-run/react'\nimport * as Sentry from '@sentry/remix'\nimport isbot from 'isbot'\nimport { getInstanceInfo } from 'litefs-js'\nimport { renderToPipeableStream } from 'react-dom/server'\nimport { getEnv, init } from './utils/env.server.ts'\nimport { NonceProvider } from './utils/nonce-provider.ts'\nimport { makeTimings } from './utils/timing.server.ts'\n\nconst ABORT_DELAY = 5000\n\ninit()\nglobal.ENV = getEnv()\n\nif (ENV.MODE === 'production' && ENV.SENTRY_DSN) {\n\timport('./utils/monitoring.server.ts').then(({ init }) => init())\n}\n\ntype DocRequestArgs = Parameters<HandleDocumentRequestFunction>\n\nexport default async function handleRequest(...args: DocRequestArgs) {\n\tconst [\n\t\trequest,\n\t\tresponseStatusCode,\n\t\tresponseHeaders,\n\t\tremixContext,\n\t\tloadContext,\n\t] = args\n\tconst { currentInstance, primaryInstance } = await getInstanceInfo()\n\tresponseHeaders.set('fly-region', process.env.FLY_REGION ?? 'unknown')\n\tresponseHeaders.set('fly-app', process.env.FLY_APP_NAME ?? 'unknown')\n\tresponseHeaders.set('fly-primary-instance', primaryInstance)\n\tresponseHeaders.set('fly-instance', currentInstance)\n\n\tconst callbackName = isbot(request.headers.get('user-agent'))\n\t\t? 'onAllReady'\n\t\t: 'onShellReady'\n\n\tconst nonce = String(loadContext.cspNonce) ?? undefined\n\treturn new Promise(async (resolve, reject) => {\n\t\tlet didError = false\n\t\t// NOTE: this timing will only include things that are rendered in the shell\n\t\t// and will not include suspended components and deferred loaders\n\t\tconst timings = makeTimings('render', 'renderToPipeableStream')\n\n\t\tconst { pipe, abort } = renderToPipeableStream(\n\t\t\t<NonceProvider value={nonce}>\n\t\t\t\t<RemixServer context={remixContext} url={request.url} />\n\t\t\t</NonceProvider>,\n\t\t\t{\n\t\t\t\t[callbackName]: () => {\n\t\t\t\t\tconst body = new PassThrough()\n\t\t\t\t\tresponseHeaders.set('Content-Type', 'text/html')\n\t\t\t\t\tresponseHeaders.append('Server-Timing', timings.toString())\n\t\t\t\t\tresolve(\n\t\t\t\t\t\tnew Response(createReadableStreamFromReadable(body), {\n\t\t\t\t\t\t\theaders: responseHeaders,\n\t\t\t\t\t\t\tstatus: didError ? 500 : responseStatusCode,\n\t\t\t\t\t\t}),\n\t\t\t\t\t)\n\t\t\t\t\tpipe(body)\n\t\t\t\t},\n\t\t\t\tonShellError: (err: unknown) => {\n\t\t\t\t\treject(err)\n\t\t\t\t},\n\t\t\t\tonError: (error: unknown) => {\n\t\t\t\t\tdidError = true\n\n\t\t\t\t\tconsole.error(error)\n\t\t\t\t},\n\t\t\t\tnonce,\n\t\t\t},\n\t\t)\n\n\t\tsetTimeout(abort, ABORT_DELAY)\n\t})\n}\n\nexport async function handleDataRequest(response: Response) {\n\tconst { currentInstance, primaryInstance } = await getInstanceInfo()\n\tresponse.headers.set('fly-region', process.env.FLY_REGION ?? 'unknown')\n\tresponse.headers.set('fly-app', process.env.FLY_APP_NAME ?? 'unknown')\n\tresponse.headers.set('fly-primary-instance', primaryInstance)\n\tresponse.headers.set('fly-instance', currentInstance)\n\n\treturn response\n}\n\nexport function handleError(\n\terror: unknown,\n\t{ request }: DataFunctionArgs,\n): void {\n\tif (error instanceof Error) {\n\t\tSentry.captureRemixServerException(error, 'remix.server', request)\n\t} else {\n\t\tSentry.captureException(error)\n\t}\n}\n", "import { z } from 'zod'\n\nconst schema = z.object({\n\tNODE_ENV: z.enum(['production', 'development', 'test'] as const),\n\tDATABASE_PATH: z.string(),\n\tDATABASE_URL: z.string(),\n\tSESSION_SECRET: z.string(),\n\tINTERNAL_COMMAND_TOKEN: z.string(),\n\tHONEYPOT_SECRET: z.string(),\n\tCACHE_DATABASE_PATH: z.string(),\n\t// If you plan on using Sentry, uncomment this line\n\t// SENTRY_DSN: z.string(),\n\t// If you plan to use Resend, uncomment this line\n\t// RESEND_API_KEY: z.string(),\n\t// If you plan to use GitHub auth, remove the default:\n\tGITHUB_CLIENT_ID: z.string().default('MOCK_GITHUB_CLIENT_ID'),\n\tGITHUB_CLIENT_SECRET: z.string().default('MOCK_GITHUB_CLIENT_SECRET'),\n\tGITHUB_TOKEN: z.string().default('MOCK_GITHUB_TOKEN'),\n})\n\ndeclare global {\n\tnamespace NodeJS {\n\t\tinterface ProcessEnv extends z.infer<typeof schema> {}\n\t}\n}\n\nexport function init() {\n\tconst parsed = schema.safeParse(process.env)\n\n\tif (parsed.success === false) {\n\t\tconsole.error(\n\t\t\t'\u274C Invalid environment variables:',\n\t\t\tparsed.error.flatten().fieldErrors,\n\t\t)\n\n\t\tthrow new Error('Invalid environment variables')\n\t}\n}\n\n/**\n * This is used in both `entry.server.ts` and `root.tsx` to ensure that\n * the environment variables are set and globally available before the app is\n * started.\n *\n * NOTE: Do *not* add any environment variables in here that you do not wish to\n * be included in the client.\n * @returns all public ENV variables\n */\nexport function getEnv() {\n\treturn {\n\t\tMODE: process.env.NODE_ENV,\n\t\tSENTRY_DSN: process.env.SENTRY_DSN,\n\t}\n}\n\ntype ENV = ReturnType<typeof getEnv>\n\ndeclare global {\n\tvar ENV: ENV\n\tinterface Window {\n\t\tENV: ENV\n\t}\n}\n", "import * as React from 'react'\n\nexport const NonceContext = React.createContext<string>('')\nexport const NonceProvider = NonceContext.Provider\nexport const useNonce = () => React.useContext(NonceContext)\n", "import { type CreateReporter } from 'cachified'\n\nexport type Timings = Record<\n\tstring,\n\tArray<\n\t\t{ desc?: string } & (\n\t\t\t| { time: number; start?: never }\n\t\t\t| { time?: never; start: number }\n\t\t)\n\t>\n>\n\nexport function makeTimings(type: string, desc?: string) {\n\tconst timings: Timings = {\n\t\t[type]: [{ desc, start: performance.now() }],\n\t}\n\tObject.defineProperty(timings, 'toString', {\n\t\tvalue: function () {\n\t\t\treturn getServerTimeHeader(timings)\n\t\t},\n\t\tenumerable: false,\n\t})\n\treturn timings\n}\n\nfunction createTimer(type: string, desc?: string) {\n\tconst start = performance.now()\n\treturn {\n\t\tend(timings: Timings) {\n\t\t\tlet timingType = timings[type]\n\n\t\t\tif (!timingType) {\n\t\t\t\t// eslint-disable-next-line no-multi-assign\n\t\t\t\ttimingType = timings[type] = []\n\t\t\t}\n\t\t\ttimingType.push({ desc, time: performance.now() - start })\n\t\t},\n\t}\n}\n\nexport async function time<ReturnType>(\n\tfn: Promise<ReturnType> | (() => ReturnType | Promise<ReturnType>),\n\t{\n\t\ttype,\n\t\tdesc,\n\t\ttimings,\n\t}: {\n\t\ttype: string\n\t\tdesc?: string\n\t\ttimings?: Timings\n\t},\n): Promise<ReturnType> {\n\tconst timer = createTimer(type, desc)\n\tconst promise = typeof fn === 'function' ? fn() : fn\n\tif (!timings) return promise\n\n\tconst result = await promise\n\n\ttimer.end(timings)\n\treturn result\n}\n\nexport function getServerTimeHeader(timings?: Timings) {\n\tif (!timings) return ''\n\treturn Object.entries(timings)\n\t\t.map(([key, timingInfos]) => {\n\t\t\tconst dur = timingInfos\n\t\t\t\t.reduce((acc, timingInfo) => {\n\t\t\t\t\tconst time = timingInfo.time ?? performance.now() - timingInfo.start\n\t\t\t\t\treturn acc + time\n\t\t\t\t}, 0)\n\t\t\t\t.toFixed(1)\n\t\t\tconst desc = timingInfos\n\t\t\t\t.map(t => t.desc)\n\t\t\t\t.filter(Boolean)\n\t\t\t\t.join(' & ')\n\t\t\treturn [\n\t\t\t\tkey.replaceAll(/(:| |@|=|;|,|\\/|\\\\)/g, '_'),\n\t\t\t\tdesc ? `desc=${JSON.stringify(desc)}` : null,\n\t\t\t\t`dur=${dur}`,\n\t\t\t]\n\t\t\t\t.filter(Boolean)\n\t\t\t\t.join(';')\n\t\t})\n\t\t.join(',')\n}\n\nexport function combineServerTimings(headers1: Headers, headers2: Headers) {\n\tconst newHeaders = new Headers(headers1)\n\tnewHeaders.append('Server-Timing', headers2.get('Server-Timing') ?? '')\n\treturn newHeaders.get('Server-Timing') ?? ''\n}\n\nexport function cachifiedTimingReporter<Value>(\n\ttimings?: Timings,\n): undefined | CreateReporter<Value> {\n\tif (!timings) return\n\n\treturn ({ key }) => {\n\t\tconst cacheRetrievalTimer = createTimer(\n\t\t\t`cache:${key}`,\n\t\t\t`${key} cache retrieval`,\n\t\t)\n\t\tlet getFreshValueTimer: ReturnType<typeof createTimer> | undefined\n\t\treturn event => {\n\t\t\tswitch (event.name) {\n\t\t\t\tcase 'getFreshValueStart':\n\t\t\t\t\tgetFreshValueTimer = createTimer(\n\t\t\t\t\t\t`getFreshValue:${key}`,\n\t\t\t\t\t\t`request forced to wait for a fresh ${key} value`,\n\t\t\t\t\t)\n\t\t\t\t\tbreak\n\t\t\t\tcase 'getFreshValueSuccess':\n\t\t\t\t\tgetFreshValueTimer?.end(timings)\n\t\t\t\t\tbreak\n\t\t\t\tcase 'done':\n\t\t\t\t\tcacheRetrievalTimer.end(timings)\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n}\n", "import { useForm } from '@conform-to/react';\nimport { parse } from '@conform-to/zod';\nimport { cssBundleHref } from '@remix-run/css-bundle';\nimport {\n  json,\n  type DataFunctionArgs,\n  type HeadersFunction,\n  type LinksFunction,\n  type MetaFunction } from\n'@remix-run/node';\nimport {\n  Form,\n  Link,\n  Links,\n  LiveReload,\n  Meta,\n  Outlet,\n  Scripts,\n  ScrollRestoration,\n  useFetcher,\n  useFetchers,\n  useLoaderData,\n  useMatches,\n  useSubmit } from\n'@remix-run/react';\nimport { withSentry } from '@sentry/remix';\nimport { useRef } from 'react';\nimport { AuthenticityTokenProvider } from 'remix-utils/csrf/react';\nimport { HoneypotProvider } from 'remix-utils/honeypot/react';\nimport { z } from 'zod';\nimport { GeneralErrorBoundary } from './components/error-boundary.tsx';\nimport { ErrorList } from './components/forms.tsx';\nimport { EpicProgress } from './components/progress-bar.tsx';\nimport { SearchBar } from './components/search-bar.tsx';\nimport { EpicToaster } from './components/toaster.tsx';\nimport { Button } from './components/ui/button.tsx';\nimport {\n  DropdownMenu,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuPortal,\n  DropdownMenuTrigger } from\n'./components/ui/dropdown-menu.tsx';\nimport { Icon, href as iconsHref } from './components/ui/icon.tsx';\nimport fontStyleSheetUrl from './styles/font.css';\nimport tailwindStyleSheetUrl from './styles/tailwind.css';\nimport { getUserId, logout } from './utils/auth.server.ts';\nimport { ClientHintCheck, getHints, useHints } from './utils/client-hints.tsx';\nimport { csrf } from './utils/csrf.server.ts';\nimport { prisma } from './utils/db.server.ts';\nimport { getEnv } from './utils/env.server.ts';\nimport { honeypot } from './utils/honeypot.server.ts';\nimport { combineHeaders, getDomainUrl, getUserImgSrc } from './utils/misc.tsx';\nimport { useNonce } from './utils/nonce-provider.ts';\nimport { useRequestInfo } from './utils/request-info.ts';\nimport { type Theme, setTheme, getTheme } from './utils/theme.server.ts';\nimport { makeTimings, time } from './utils/timing.server.ts';\nimport { getToast } from './utils/toast.server.ts';\nimport { useOptionalUser, useUser } from './utils/user.ts';\n\nexport const links: LinksFunction = () => {\n  return [\n  // Preload svg sprite as a resource to avoid render blocking\n  { rel: 'preload', href: iconsHref, as: 'image' },\n  // Preload CSS as a resource to avoid render blocking\n  { rel: 'preload', href: fontStyleSheetUrl, as: 'style' },\n  { rel: 'preload', href: tailwindStyleSheetUrl, as: 'style' },\n  cssBundleHref ? { rel: 'preload', href: cssBundleHref, as: 'style' } : null,\n  { rel: 'mask-icon', href: '/favicons/mask-icon.svg' },\n  {\n    rel: 'alternate icon',\n    type: 'image/png',\n    href: '/favicons/favicon-32x32.png'\n  },\n  { rel: 'apple-touch-icon', href: '/favicons/apple-touch-icon.png' }, (\n  {\n    rel: 'manifest',\n    href: '/site.webmanifest',\n    crossOrigin: 'use-credentials'\n  } as const), // necessary to make typescript happy\n  //These should match the css preloads above to avoid css as render blocking resource\n  { rel: 'icon', type: 'image/svg+xml', href: '/favicons/favicon.svg' },\n  { rel: 'stylesheet', href: fontStyleSheetUrl },\n  { rel: 'stylesheet', href: tailwindStyleSheetUrl },\n  cssBundleHref ? { rel: 'stylesheet', href: cssBundleHref } : null].\n  filter(Boolean);\n};\n\nexport const meta: MetaFunction<typeof loader> = ({ data }) => {\n  return [\n  { title: data ? 'Epic Notes' : 'Error | Epic Notes' },\n  { name: 'description', content: `Your own captain's log` }];\n\n};\n\nexport async function loader({ request }: DataFunctionArgs) {\n  const timings = makeTimings('root loader');\n  const userId = await time(() => getUserId(request), {\n    timings,\n    type: 'getUserId',\n    desc: 'getUserId in root'\n  });\n\n  const user = userId ?\n  await time(\n    () =>\n    prisma.user.findUniqueOrThrow({\n      select: {\n        id: true,\n        name: true,\n        username: true,\n        image: { select: { id: true } },\n        roles: {\n          select: {\n            name: true,\n            permissions: {\n              select: { entity: true, action: true, access: true }\n            }\n          }\n        }\n      },\n      where: { id: userId }\n    }),\n    { timings, type: 'find user', desc: 'find user in root' }\n  ) :\n  null;\n  if (userId && !user) {\n    console.info('something weird happened');\n    // something weird happened... The user is authenticated but we can't find\n    // them in the database. Maybe they were deleted? Let's log them out.\n    await logout({ request, redirectTo: '/' });\n  }\n  const { toast, headers: toastHeaders } = await getToast(request);\n  const honeyProps = honeypot.getInputProps();\n  const [csrfToken, csrfCookieHeader] = await csrf.commitToken();\n\n  return json(\n    {\n      user,\n      requestInfo: {\n        hints: getHints(request),\n        origin: getDomainUrl(request),\n        path: new URL(request.url).pathname,\n        userPrefs: {\n          theme: getTheme(request)\n        }\n      },\n      ENV: getEnv(),\n      toast,\n      honeyProps,\n      csrfToken\n    },\n    {\n      headers: combineHeaders(\n        { 'Server-Timing': timings.toString() },\n        toastHeaders,\n        csrfCookieHeader ? { 'set-cookie': csrfCookieHeader } : null\n      )\n    }\n  );\n}\n\nexport const headers: HeadersFunction = ({ loaderHeaders }) => {\n  const headers = {\n    'Server-Timing': loaderHeaders.get('Server-Timing') ?? ''\n  };\n  return headers;\n};\n\nconst ThemeFormSchema = z.object({\n  theme: z.enum(['system', 'light', 'dark'])\n});\n\nexport async function action({ request }: DataFunctionArgs) {\n  const formData = await request.formData();\n  const submission = parse(formData, {\n    schema: ThemeFormSchema\n  });\n  if (submission.intent !== 'submit') {\n    return json(({ status: 'idle', submission } as const));\n  }\n  if (!submission.value) {\n    return json(({ status: 'error', submission } as const), { status: 400 });\n  }\n  const { theme } = submission.value;\n\n  const responseInit = {\n    headers: { 'set-cookie': setTheme(theme) }\n  };\n  return json({ success: true, submission }, responseInit);\n}\n\nfunction Document({\n  children,\n  nonce,\n  theme = 'light',\n  env = {}\n\n\n\n\n\n}: {children: React.ReactNode;nonce: string;theme?: Theme;env?: Record<string, string>;}) {\n  return (\n    <html lang=\"en\" className={`${theme} h-full overflow-x-hidden`}>\n\t\t\t<head>\n\t\t\t\t<ClientHintCheck nonce={nonce} />\n\t\t\t\t<Meta />\n\t\t\t\t<meta charSet=\"utf-8\" />\n\t\t\t\t<meta name=\"viewport\" content=\"width=device-width,initial-scale=1\" />\n\t\t\t\t<Links />\n\t\t\t</head>\n\t\t\t<body className=\"bg-background text-foreground\">\n\t\t\t\t{children}\n\t\t\t\t<script\n          nonce={nonce}\n          dangerouslySetInnerHTML={{\n            __html: `window.ENV = ${JSON.stringify(env)}`\n          }} />\n\n\t\t\t\t<ScrollRestoration nonce={nonce} />\n\t\t\t\t<Scripts nonce={nonce} />\n\t\t\t\t<LiveReload nonce={nonce} />\n\t\t\t</body>\n\t\t</html>);\n\n}\n\nfunction App() {\n  const data = useLoaderData<typeof loader>();\n  const nonce = useNonce();\n  const user = useOptionalUser();\n  const theme = useTheme();\n  const matches = useMatches();\n  const isOnSearchPage = matches.find((m) => m.id === 'routes/users+/index');\n  const searchBar = isOnSearchPage ? null : <SearchBar status=\"idle\" />;\n\n  return (\n    <Document nonce={nonce} theme={theme} env={data.ENV}>\n\t\t\t<div className=\"flex h-screen flex-col justify-between\">\n\t\t\t\t<header className=\"container py-6\">\n\t\t\t\t\t<nav>\n\t\t\t\t\t\t<div className=\"flex flex-wrap items-center justify-between gap-4 sm:flex-nowrap md:gap-8\">\n\t\t\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t\t\t<div className=\"font-light\">epic</div>\n\t\t\t\t\t\t\t\t<div className=\"font-bold\">notes</div>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t<div className=\"ml-auto hidden max-w-sm flex-1 sm:block\">\n\t\t\t\t\t\t\t\t{searchBar}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"flex items-center gap-10\">\n\t\t\t\t\t\t\t\t{user ?\n                <UserDropdown /> :\n\n                <Button asChild variant=\"default\" size=\"sm\">\n\t\t\t\t\t\t\t\t\t\t<Link to=\"/login\">Log In</Link>\n\t\t\t\t\t\t\t\t\t</Button>}\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"block w-full sm:hidden\">{searchBar}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</nav>\n\t\t\t\t</header>\n\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<Outlet />\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"container flex justify-between pb-5\">\n\t\t\t\t\t<Link to=\"/\">\n\t\t\t\t\t\t<div className=\"font-light\">epic</div>\n\t\t\t\t\t\t<div className=\"font-bold\">notes</div>\n\t\t\t\t\t</Link>\n\t\t\t\t\t<ThemeSwitch userPreference={data.requestInfo.userPrefs.theme} />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<EpicToaster toast={data.toast} />\n\t\t\t<EpicProgress />\n\t\t</Document>);\n\n}\n\nfunction AppWithProviders() {\n  const data = useLoaderData<typeof loader>();\n  return (\n    <AuthenticityTokenProvider token={data.csrfToken}>\n\t\t\t<HoneypotProvider {...data.honeyProps}>\n\t\t\t\t<App />\n\t\t\t</HoneypotProvider>\n\t\t</AuthenticityTokenProvider>);\n\n}\n\nexport default withSentry(AppWithProviders);\n\nfunction UserDropdown() {\n  const user = useUser();\n  const submit = useSubmit();\n  const formRef = useRef<HTMLFormElement>(null);\n  return (\n    <DropdownMenu>\n\t\t\t<DropdownMenuTrigger asChild>\n\t\t\t\t<Button asChild variant=\"secondary\">\n\t\t\t\t\t<Link\n            to={`/users/${user.username}`}\n            // this is for progressive enhancement\n            onClick={(e) => e.preventDefault()}\n            className=\"flex items-center gap-2\">\n\n\t\t\t\t\t\t<img\n              className=\"h-8 w-8 rounded-full object-cover\"\n              alt={user.name ?? user.username}\n              src={getUserImgSrc(user.image?.id)} />\n\n\t\t\t\t\t\t<span className=\"text-body-sm font-bold\">\n\t\t\t\t\t\t\t{user.name ?? user.username}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t</Link>\n\t\t\t\t</Button>\n\t\t\t</DropdownMenuTrigger>\n\t\t\t<DropdownMenuPortal>\n\t\t\t\t<DropdownMenuContent sideOffset={8} align=\"start\">\n\t\t\t\t\t<DropdownMenuItem asChild>\n\t\t\t\t\t\t<Link prefetch=\"intent\" to={`/users/${user.username}`}>\n\t\t\t\t\t\t\t<Icon className=\"text-body-md\" name=\"avatar\">\n\t\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t<DropdownMenuItem asChild>\n\t\t\t\t\t\t<Link prefetch=\"intent\" to={`/users/${user.username}/notes`}>\n\t\t\t\t\t\t\t<Icon className=\"text-body-md\" name=\"pencil-2\">\n\t\t\t\t\t\t\t\tNotes\n\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t\t<DropdownMenuItem\n            asChild\n            // this prevents the menu from closing before the form submission is completed\n            onSelect={(event) => {\n              event.preventDefault();\n              submit(formRef.current);\n            }}>\n\n\t\t\t\t\t\t<Form action=\"/logout\" method=\"POST\" ref={formRef}>\n\t\t\t\t\t\t\t<Icon className=\"text-body-md\" name=\"exit\">\n\t\t\t\t\t\t\t\t<button type=\"submit\">Logout</button>\n\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t</DropdownMenuItem>\n\t\t\t\t</DropdownMenuContent>\n\t\t\t</DropdownMenuPortal>\n\t\t</DropdownMenu>);\n\n}\n\n/**\n * @returns the user's theme preference, or the client hint theme if the user\n * has not set a preference.\n */\nexport function useTheme() {\n  const hints = useHints();\n  const requestInfo = useRequestInfo();\n  const optimisticMode = useOptimisticThemeMode();\n  if (optimisticMode) {\n    return optimisticMode === 'system' ? hints.theme : optimisticMode;\n  }\n  return requestInfo.userPrefs.theme ?? hints.theme;\n}\n\n/**\n * If the user's changing their theme mode preference, this will return the\n * value it's being changed to.\n */\nexport function useOptimisticThemeMode() {\n  const fetchers = useFetchers();\n  const themeFetcher = fetchers.find((f) => f.formAction === '/');\n\n  if (themeFetcher && themeFetcher.formData) {\n    const submission = parse(themeFetcher.formData, {\n      schema: ThemeFormSchema\n    });\n    return submission.value?.theme;\n  }\n}\n\nfunction ThemeSwitch({ userPreference }: {userPreference?: Theme | null;}) {\n  const fetcher = useFetcher<typeof action>();\n\n  const [form] = useForm({\n    id: 'theme-switch',\n    lastSubmission: fetcher.data?.submission\n  });\n\n  const optimisticMode = useOptimisticThemeMode();\n  const mode = optimisticMode ?? userPreference ?? 'system';\n  const nextMode =\n  mode === 'system' ? 'light' : mode === 'light' ? 'dark' : 'system';\n  const modeLabel = {\n    light:\n    <Icon name=\"sun\">\n\t\t\t\t<span className=\"sr-only\">Light</span>\n\t\t\t</Icon>,\n\n    dark:\n    <Icon name=\"moon\">\n\t\t\t\t<span className=\"sr-only\">Dark</span>\n\t\t\t</Icon>,\n\n    system:\n    <Icon name=\"laptop\">\n\t\t\t\t<span className=\"sr-only\">System</span>\n\t\t\t</Icon>\n\n  };\n\n  return (\n    <fetcher.Form method=\"POST\" {...form.props}>\n\t\t\t<input type=\"hidden\" name=\"theme\" value={nextMode} />\n\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t<button\n          type=\"submit\"\n          className=\"flex h-8 w-8 cursor-pointer items-center justify-center\">\n\n\t\t\t\t\t{modeLabel[mode]}\n\t\t\t\t</button>\n\t\t\t</div>\n\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\t\t</fetcher.Form>);\n\n}\n\nexport function ErrorBoundary() {\n  // the nonce doesn't rely on the loader so we can access that\n  const nonce = useNonce();\n\n  // NOTE: you cannot use useLoaderData in an ErrorBoundary because the loader\n  // likely failed to run so we have to do the best we can.\n  // We could probably do better than this (it's possible the loader did run).\n  // This would require a change in Remix.\n\n  // Just make sure your root route never errors out and you'll always be able\n  // to give the user a better UX.\n\n  return (\n    <Document nonce={nonce}>\n\t\t\t<GeneralErrorBoundary />\n\t\t</Document>);\n\n}", "import {\n\ttype ErrorResponse,\n\tisRouteErrorResponse,\n\tuseParams,\n\tuseRouteError,\n} from '@remix-run/react'\nimport { captureRemixErrorBoundaryError } from '@sentry/remix'\nimport { getErrorMessage } from '#app/utils/misc.tsx'\n\ntype StatusHandler = (info: {\n\terror: ErrorResponse\n\tparams: Record<string, string | undefined>\n}) => JSX.Element | null\n\nexport function GeneralErrorBoundary({\n\tdefaultStatusHandler = ({ error }) => (\n\t\t<p>\n\t\t\t{error.status} {error.data}\n\t\t</p>\n\t),\n\tstatusHandlers,\n\tunexpectedErrorHandler = error => <p>{getErrorMessage(error)}</p>,\n}: {\n\tdefaultStatusHandler?: StatusHandler\n\tstatusHandlers?: Record<number, StatusHandler>\n\tunexpectedErrorHandler?: (error: unknown) => JSX.Element | null\n}) {\n\tconst error = useRouteError()\n\tcaptureRemixErrorBoundaryError(error)\n\tconst params = useParams()\n\n\tif (typeof document !== 'undefined') {\n\t\tconsole.error(error)\n\t}\n\n\treturn (\n\t\t<div className=\"container flex items-center justify-center p-20 text-h2\">\n\t\t\t{isRouteErrorResponse(error)\n\t\t\t\t? (statusHandlers?.[error.status] ?? defaultStatusHandler)({\n\t\t\t\t\t\terror,\n\t\t\t\t\t\tparams,\n\t\t\t\t  })\n\t\t\t\t: unexpectedErrorHandler(error)}\n\t\t</div>\n\t)\n}\n", "import { useFormAction, useNavigation } from '@remix-run/react'\nimport { clsx, type ClassValue } from 'clsx'\nimport { useEffect, useMemo, useRef, useState } from 'react'\nimport { useSpinDelay } from 'spin-delay'\nimport { extendTailwindMerge } from 'tailwind-merge'\nimport { extendedTheme } from './extended-theme.ts'\n\nexport function getUserImgSrc(imageId?: string | null) {\n\treturn imageId ? `/resources/user-images/${imageId}` : '/img/user.png'\n}\n\nexport function getNoteImgSrc(imageId: string) {\n\treturn `/resources/note-images/${imageId}`\n}\n\nexport function getErrorMessage(error: unknown) {\n\tif (typeof error === 'string') return error\n\tif (\n\t\terror &&\n\t\ttypeof error === 'object' &&\n\t\t'message' in error &&\n\t\ttypeof error.message === 'string'\n\t) {\n\t\treturn error.message\n\t}\n\tconsole.error('Unable to get error message for error', error)\n\treturn 'Unknown Error'\n}\n\nfunction formatColors() {\n\tconst colors = []\n\tfor (const [key, color] of Object.entries(extendedTheme.colors)) {\n\t\tif (typeof color === 'string') {\n\t\t\tcolors.push(key)\n\t\t} else {\n\t\t\tconst colorGroup = Object.keys(color).map(subKey =>\n\t\t\t\tsubKey === 'DEFAULT' ? '' : subKey,\n\t\t\t)\n\t\t\tcolors.push({ [key]: colorGroup })\n\t\t}\n\t}\n\treturn colors\n}\n\nconst customTwMerge = extendTailwindMerge<string, string>({\n\textend: {\n\t\ttheme: {\n\t\t\tcolors: formatColors(),\n\t\t\tborderRadius: Object.keys(extendedTheme.borderRadius),\n\t\t},\n\t\tclassGroups: {\n\t\t\t'font-size': [\n\t\t\t\t{\n\t\t\t\t\ttext: Object.keys(extendedTheme.fontSize),\n\t\t\t\t},\n\t\t\t],\n\t\t\tanimate: [\n\t\t\t\t{\n\t\t\t\t\tanimate: Object.keys(extendedTheme.animation),\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t},\n})\n\nexport function cn(...inputs: ClassValue[]) {\n\treturn customTwMerge(clsx(inputs))\n}\n\nexport function getDomainUrl(request: Request) {\n\tconst host =\n\t\trequest.headers.get('X-Forwarded-Host') ??\n\t\trequest.headers.get('host') ??\n\t\tnew URL(request.url).host\n\tconst protocol = host.includes('localhost') ? 'http' : 'https'\n\treturn `${protocol}://${host}`\n}\n\nexport function getReferrerRoute(request: Request) {\n\t// spelling errors and whatever makes this annoyingly inconsistent\n\t// in my own testing, `referer` returned the right value, but \uD83E\uDD37\u200D\u2642\uFE0F\n\tconst referrer =\n\t\trequest.headers.get('referer') ??\n\t\trequest.headers.get('referrer') ??\n\t\trequest.referrer\n\tconst domain = getDomainUrl(request)\n\tif (referrer?.startsWith(domain)) {\n\t\treturn referrer.slice(domain.length)\n\t} else {\n\t\treturn '/'\n\t}\n}\n\n/**\n * Merge multiple headers objects into one (uses set so headers are overridden)\n */\nexport function mergeHeaders(\n\t...headers: Array<ResponseInit['headers'] | null | undefined>\n) {\n\tconst merged = new Headers()\n\tfor (const header of headers) {\n\t\tif (!header) continue\n\t\tfor (const [key, value] of new Headers(header).entries()) {\n\t\t\tmerged.set(key, value)\n\t\t}\n\t}\n\treturn merged\n}\n\n/**\n * Combine multiple header objects into one (uses append so headers are not overridden)\n */\nexport function combineHeaders(\n\t...headers: Array<ResponseInit['headers'] | null | undefined>\n) {\n\tconst combined = new Headers()\n\tfor (const header of headers) {\n\t\tif (!header) continue\n\t\tfor (const [key, value] of new Headers(header).entries()) {\n\t\t\tcombined.append(key, value)\n\t\t}\n\t}\n\treturn combined\n}\n\n/**\n * Combine multiple response init objects into one (uses combineHeaders)\n */\nexport function combineResponseInits(\n\t...responseInits: Array<ResponseInit | null | undefined>\n) {\n\tlet combined: ResponseInit = {}\n\tfor (const responseInit of responseInits) {\n\t\tcombined = {\n\t\t\t...responseInit,\n\t\t\theaders: combineHeaders(combined.headers, responseInit?.headers),\n\t\t}\n\t}\n\treturn combined\n}\n\n/**\n * Provide a condition and if that condition is falsey, this throws an error\n * with the given message.\n *\n * inspired by invariant from 'tiny-invariant' except will still include the\n * message in production.\n *\n * @example\n * invariant(typeof value === 'string', `value must be a string`)\n *\n * @param condition The condition to check\n * @param message The message to throw (or a callback to generate the message)\n * @param responseInit Additional response init options if a response is thrown\n *\n * @throws {Error} if condition is falsey\n */\nexport function invariant(\n\tcondition: any,\n\tmessage: string | (() => string),\n): asserts condition {\n\tif (!condition) {\n\t\tthrow new Error(typeof message === 'function' ? message() : message)\n\t}\n}\n\n/**\n * Provide a condition and if that condition is falsey, this throws a 400\n * Response with the given message.\n *\n * inspired by invariant from 'tiny-invariant'\n *\n * @example\n * invariantResponse(typeof value === 'string', `value must be a string`)\n *\n * @param condition The condition to check\n * @param message The message to throw (or a callback to generate the message)\n * @param responseInit Additional response init options if a response is thrown\n *\n * @throws {Response} if condition is falsey\n */\nexport function invariantResponse(\n\tcondition: any,\n\tmessage: string | (() => string),\n\tresponseInit?: ResponseInit,\n): asserts condition {\n\tif (!condition) {\n\t\tthrow new Response(typeof message === 'function' ? message() : message, {\n\t\t\tstatus: 400,\n\t\t\t...responseInit,\n\t\t})\n\t}\n}\n\n/**\n * Returns true if the current navigation is submitting the current route's\n * form. Defaults to the current route's form action and method POST.\n *\n * Defaults state to 'non-idle'\n *\n * NOTE: the default formAction will include query params, but the\n * navigation.formAction will not, so don't use the default formAction if you\n * want to know if a form is submitting without specific query params.\n */\nexport function useIsPending({\n\tformAction,\n\tformMethod = 'POST',\n\tstate = 'non-idle',\n}: {\n\tformAction?: string\n\tformMethod?: 'POST' | 'GET' | 'PUT' | 'PATCH' | 'DELETE'\n\tstate?: 'submitting' | 'loading' | 'non-idle'\n} = {}) {\n\tconst contextualFormAction = useFormAction()\n\tconst navigation = useNavigation()\n\tconst isPendingState =\n\t\tstate === 'non-idle'\n\t\t\t? navigation.state !== 'idle'\n\t\t\t: navigation.state === state\n\treturn (\n\t\tisPendingState &&\n\t\tnavigation.formAction === (formAction ?? contextualFormAction) &&\n\t\tnavigation.formMethod === formMethod\n\t)\n}\n\n/**\n * This combines useSpinDelay (from https://npm.im/spin-delay) and useIsPending\n * from our own utilities to give you a nice way to show a loading spinner for\n * a minimum amount of time, even if the request finishes right after the delay.\n *\n * This avoids a flash of loading state regardless of how fast or slow the\n * request is.\n */\nexport function useDelayedIsPending({\n\tformAction,\n\tformMethod,\n\tdelay = 400,\n\tminDuration = 300,\n}: Parameters<typeof useIsPending>[0] &\n\tParameters<typeof useSpinDelay>[1] = {}) {\n\tconst isPending = useIsPending({ formAction, formMethod })\n\tconst delayedIsPending = useSpinDelay(isPending, {\n\t\tdelay,\n\t\tminDuration,\n\t})\n\treturn delayedIsPending\n}\n\nfunction callAll<Args extends Array<unknown>>(\n\t...fns: Array<((...args: Args) => unknown) | undefined>\n) {\n\treturn (...args: Args) => fns.forEach(fn => fn?.(...args))\n}\n\n/**\n * Use this hook with a button and it will make it so the first click sets a\n * `doubleCheck` state to true, and the second click will actually trigger the\n * `onClick` handler. This allows you to have a button that can be like a\n * \"are you sure?\" experience for the user before doing destructive operations.\n */\nexport function useDoubleCheck() {\n\tconst [doubleCheck, setDoubleCheck] = useState(false)\n\n\tfunction getButtonProps(\n\t\tprops?: React.ButtonHTMLAttributes<HTMLButtonElement>,\n\t) {\n\t\tconst onBlur: React.ButtonHTMLAttributes<HTMLButtonElement>['onBlur'] =\n\t\t\t() => setDoubleCheck(false)\n\n\t\tconst onClick: React.ButtonHTMLAttributes<HTMLButtonElement>['onClick'] =\n\t\t\tdoubleCheck\n\t\t\t\t? undefined\n\t\t\t\t: e => {\n\t\t\t\t\t\te.preventDefault()\n\t\t\t\t\t\tsetDoubleCheck(true)\n\t\t\t\t  }\n\n\t\tconst onKeyUp: React.ButtonHTMLAttributes<HTMLButtonElement>['onKeyUp'] =\n\t\t\te => {\n\t\t\t\tif (e.key === 'Escape') {\n\t\t\t\t\tsetDoubleCheck(false)\n\t\t\t\t}\n\t\t\t}\n\n\t\treturn {\n\t\t\t...props,\n\t\t\tonBlur: callAll(onBlur, props?.onBlur),\n\t\t\tonClick: callAll(onClick, props?.onClick),\n\t\t\tonKeyUp: callAll(onKeyUp, props?.onKeyUp),\n\t\t}\n\t}\n\n\treturn { doubleCheck, getButtonProps }\n}\n\n/**\n * Simple debounce implementation\n */\nfunction debounce<Callback extends (...args: Parameters<Callback>) => void>(\n\tfn: Callback,\n\tdelay: number,\n) {\n\tlet timer: ReturnType<typeof setTimeout> | null = null\n\treturn (...args: Parameters<Callback>) => {\n\t\tif (timer) clearTimeout(timer)\n\t\ttimer = setTimeout(() => {\n\t\t\tfn(...args)\n\t\t}, delay)\n\t}\n}\n\n/**\n * Debounce a callback function\n */\nexport function useDebounce<\n\tCallback extends (...args: Parameters<Callback>) => ReturnType<Callback>,\n>(callback: Callback, delay: number) {\n\tconst callbackRef = useRef(callback)\n\tuseEffect(() => {\n\t\tcallbackRef.current = callback\n\t})\n\treturn useMemo(\n\t\t() =>\n\t\t\tdebounce(\n\t\t\t\t(...args: Parameters<Callback>) => callbackRef.current(...args),\n\t\t\t\tdelay,\n\t\t\t),\n\t\t[delay],\n\t)\n}\n\nexport async function downloadFile(url: string, retries: number = 0) {\n\tconst MAX_RETRIES = 3\n\ttry {\n\t\tconst response = await fetch(url)\n\t\tif (!response.ok) {\n\t\t\tthrow new Error(`Failed to fetch image with status ${response.status}`)\n\t\t}\n\t\tconst contentType = response.headers.get('content-type') ?? 'image/jpg'\n\t\tconst blob = Buffer.from(await response.arrayBuffer())\n\t\treturn { contentType, blob }\n\t} catch (e) {\n\t\tif (retries > MAX_RETRIES) throw e\n\t\treturn downloadFile(url, retries + 1)\n\t}\n}\n", "import { type Config } from 'tailwindcss'\n\nexport const extendedTheme = {\n\tcolors: {\n\t\tborder: 'hsl(var(--border))',\n\t\tinput: {\n\t\t\tDEFAULT: 'hsl(var(--input))',\n\t\t\tinvalid: 'hsl(var(--input-invalid))',\n\t\t},\n\t\tring: {\n\t\t\tDEFAULT: 'hsl(var(--ring))',\n\t\t\tinvalid: 'hsl(var(--foreground-destructive))',\n\t\t},\n\t\tbackground: 'hsl(var(--background))',\n\t\tforeground: {\n\t\t\tDEFAULT: 'hsl(var(--foreground))',\n\t\t\tdestructive: 'hsl(var(--foreground-destructive))',\n\t\t},\n\t\tprimary: {\n\t\t\tDEFAULT: 'hsl(var(--primary))',\n\t\t\tforeground: 'hsl(var(--primary-foreground))',\n\t\t},\n\t\tsecondary: {\n\t\t\tDEFAULT: 'hsl(var(--secondary))',\n\t\t\tforeground: 'hsl(var(--secondary-foreground))',\n\t\t},\n\t\tdestructive: {\n\t\t\tDEFAULT: 'hsl(var(--destructive))',\n\t\t\tforeground: 'hsl(var(--destructive-foreground))',\n\t\t},\n\t\tmuted: {\n\t\t\tDEFAULT: 'hsl(var(--muted))',\n\t\t\tforeground: 'hsl(var(--muted-foreground))',\n\t\t},\n\t\taccent: {\n\t\t\tDEFAULT: 'hsl(var(--accent))',\n\t\t\tforeground: 'hsl(var(--accent-foreground))',\n\t\t},\n\t\tpopover: {\n\t\t\tDEFAULT: 'hsl(var(--popover))',\n\t\t\tforeground: 'hsl(var(--popover-foreground))',\n\t\t},\n\t\tcard: {\n\t\t\tDEFAULT: 'hsl(var(--card))',\n\t\t\tforeground: 'hsl(var(--card-foreground))',\n\t\t},\n\t},\n\tborderRadius: {\n\t\tlg: 'var(--radius)',\n\t\tmd: 'calc(var(--radius) - 2px)',\n\t\tsm: 'calc(var(--radius) - 4px)',\n\t},\n\tfontSize: {\n\t\t// 1rem = 16px\n\t\t/** 80px size / 84px high / bold */\n\t\tmega: ['5rem', { lineHeight: '5.25rem', fontWeight: '700' }],\n\t\t/** 56px size / 62px high / bold */\n\t\th1: ['3.5rem', { lineHeight: '3.875rem', fontWeight: '700' }],\n\t\t/** 40px size / 48px high / bold */\n\t\th2: ['2.5rem', { lineHeight: '3rem', fontWeight: '700' }],\n\t\t/** 32px size / 36px high / bold */\n\t\th3: ['2rem', { lineHeight: '2.25rem', fontWeight: '700' }],\n\t\t/** 28px size / 36px high / bold */\n\t\th4: ['1.75rem', { lineHeight: '2.25rem', fontWeight: '700' }],\n\t\t/** 24px size / 32px high / bold */\n\t\th5: ['1.5rem', { lineHeight: '2rem', fontWeight: '700' }],\n\t\t/** 16px size / 20px high / bold */\n\t\th6: ['1rem', { lineHeight: '1.25rem', fontWeight: '700' }],\n\n\t\t/** 32px size / 36px high / normal */\n\t\t'body-2xl': ['2rem', { lineHeight: '2.25rem' }],\n\t\t/** 28px size / 36px high / normal */\n\t\t'body-xl': ['1.75rem', { lineHeight: '2.25rem' }],\n\t\t/** 24px size / 32px high / normal */\n\t\t'body-lg': ['1.5rem', { lineHeight: '2rem' }],\n\t\t/** 20px size / 28px high / normal */\n\t\t'body-md': ['1.25rem', { lineHeight: '1.75rem' }],\n\t\t/** 16px size / 20px high / normal */\n\t\t'body-sm': ['1rem', { lineHeight: '1.25rem' }],\n\t\t/** 14px size / 18px high / normal */\n\t\t'body-xs': ['0.875rem', { lineHeight: '1.125rem' }],\n\t\t/** 12px size / 16px high / normal */\n\t\t'body-2xs': ['0.75rem', { lineHeight: '1rem' }],\n\n\t\t/** 18px size / 24px high / semibold */\n\t\tcaption: ['1.125rem', { lineHeight: '1.5rem', fontWeight: '600' }],\n\t\t/** 12px size / 16px high / bold */\n\t\tbutton: ['0.75rem', { lineHeight: '1rem', fontWeight: '700' }],\n\t},\n\tkeyframes: {\n\t\t'accordion-down': {\n\t\t\tfrom: { height: '0' },\n\t\t\tto: { height: 'var(--radix-accordion-content-height)' },\n\t\t},\n\t\t'accordion-up': {\n\t\t\tfrom: { height: 'var(--radix-accordion-content-height)' },\n\t\t\tto: { height: '0' },\n\t\t},\n\t},\n\tanimation: {\n\t\t'accordion-down': 'accordion-down 0.2s ease-out',\n\t\t'accordion-up': 'accordion-up 0.2s ease-out',\n\t},\n} satisfies Config['theme']\n", "import { useInputEvent } from '@conform-to/react'\nimport React, { useId, useRef } from 'react'\nimport { Checkbox, type CheckboxProps } from './ui/checkbox.tsx'\nimport { Input } from './ui/input.tsx'\nimport { Label } from './ui/label.tsx'\nimport { Textarea } from './ui/textarea.tsx'\n\nexport type ListOfErrors = Array<string | null | undefined> | null | undefined\n\nexport function ErrorList({\n\tid,\n\terrors,\n}: {\n\terrors?: ListOfErrors\n\tid?: string\n}) {\n\tconst errorsToRender = errors?.filter(Boolean)\n\tif (!errorsToRender?.length) return null\n\treturn (\n\t\t<ul id={id} className=\"flex flex-col gap-1\">\n\t\t\t{errorsToRender.map(e => (\n\t\t\t\t<li key={e} className=\"text-foreground-destructive text-[10px]\">\n\t\t\t\t\t{e}\n\t\t\t\t</li>\n\t\t\t))}\n\t\t</ul>\n\t)\n}\n\nexport function Field({\n\tlabelProps,\n\tinputProps,\n\terrors,\n\tclassName,\n}: {\n\tlabelProps: React.LabelHTMLAttributes<HTMLLabelElement>\n\tinputProps: React.InputHTMLAttributes<HTMLInputElement>\n\terrors?: ListOfErrors\n\tclassName?: string\n}) {\n\tconst fallbackId = useId()\n\tconst id = inputProps.id ?? fallbackId\n\tconst errorId = errors?.length ? `${id}-error` : undefined\n\treturn (\n\t\t<div className={className}>\n\t\t\t<Label htmlFor={id} {...labelProps} />\n\t\t\t<Input\n\t\t\t\tid={id}\n\t\t\t\taria-invalid={errorId ? true : undefined}\n\t\t\t\taria-describedby={errorId}\n\t\t\t\t{...inputProps}\n\t\t\t/>\n\t\t\t<div className=\"min-h-[32px] px-4 pb-3 pt-1\">\n\t\t\t\t{errorId ? <ErrorList id={errorId} errors={errors} /> : null}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport function TextareaField({\n\tlabelProps,\n\ttextareaProps,\n\terrors,\n\tclassName,\n}: {\n\tlabelProps: React.LabelHTMLAttributes<HTMLLabelElement>\n\ttextareaProps: React.TextareaHTMLAttributes<HTMLTextAreaElement>\n\terrors?: ListOfErrors\n\tclassName?: string\n}) {\n\tconst fallbackId = useId()\n\tconst id = textareaProps.id ?? textareaProps.name ?? fallbackId\n\tconst errorId = errors?.length ? `${id}-error` : undefined\n\treturn (\n\t\t<div className={className}>\n\t\t\t<Label htmlFor={id} {...labelProps} />\n\t\t\t<Textarea\n\t\t\t\tid={id}\n\t\t\t\taria-invalid={errorId ? true : undefined}\n\t\t\t\taria-describedby={errorId}\n\t\t\t\t{...textareaProps}\n\t\t\t/>\n\t\t\t<div className=\"min-h-[32px] px-4 pb-3 pt-1\">\n\t\t\t\t{errorId ? <ErrorList id={errorId} errors={errors} /> : null}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport function CheckboxField({\n\tlabelProps,\n\tbuttonProps,\n\terrors,\n\tclassName,\n}: {\n\tlabelProps: JSX.IntrinsicElements['label']\n\tbuttonProps: CheckboxProps\n\terrors?: ListOfErrors\n\tclassName?: string\n}) {\n\tconst fallbackId = useId()\n\tconst buttonRef = useRef<HTMLButtonElement>(null)\n\t// To emulate native events that Conform listen to:\n\t// See https://conform.guide/integrations\n\tconst control = useInputEvent({\n\t\t// Retrieve the checkbox element by name instead as Radix does not expose the internal checkbox element\n\t\t// See https://github.com/radix-ui/primitives/discussions/874\n\t\tref: () =>\n\t\t\tbuttonRef.current?.form?.elements.namedItem(buttonProps.name ?? ''),\n\t\tonFocus: () => buttonRef.current?.focus(),\n\t})\n\tconst id = buttonProps.id ?? buttonProps.name ?? fallbackId\n\tconst errorId = errors?.length ? `${id}-error` : undefined\n\treturn (\n\t\t<div className={className}>\n\t\t\t<div className=\"flex gap-2\">\n\t\t\t\t<Checkbox\n\t\t\t\t\tid={id}\n\t\t\t\t\tref={buttonRef}\n\t\t\t\t\taria-invalid={errorId ? true : undefined}\n\t\t\t\t\taria-describedby={errorId}\n\t\t\t\t\t{...buttonProps}\n\t\t\t\t\tonCheckedChange={state => {\n\t\t\t\t\t\tcontrol.change(Boolean(state.valueOf()))\n\t\t\t\t\t\tbuttonProps.onCheckedChange?.(state)\n\t\t\t\t\t}}\n\t\t\t\t\tonFocus={event => {\n\t\t\t\t\t\tcontrol.focus()\n\t\t\t\t\t\tbuttonProps.onFocus?.(event)\n\t\t\t\t\t}}\n\t\t\t\t\tonBlur={event => {\n\t\t\t\t\t\tcontrol.blur()\n\t\t\t\t\t\tbuttonProps.onBlur?.(event)\n\t\t\t\t\t}}\n\t\t\t\t\ttype=\"button\"\n\t\t\t\t/>\n\t\t\t\t<label\n\t\t\t\t\thtmlFor={id}\n\t\t\t\t\t{...labelProps}\n\t\t\t\t\tclassName=\"self-center text-body-xs text-muted-foreground\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div className=\"px-4 pb-3 pt-1\">\n\t\t\t\t{errorId ? <ErrorList id={errorId} errors={errors} /> : null}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n", "import * as CheckboxPrimitive from '@radix-ui/react-checkbox'\nimport * as React from 'react'\n\nimport { cn } from '#app/utils/misc.tsx'\n\nexport type CheckboxProps = Omit<\n\tReact.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>,\n\t'type'\n> & {\n\ttype?: string\n}\n\nconst Checkbox = React.forwardRef<\n\tReact.ElementRef<typeof CheckboxPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n\t<CheckboxPrimitive.Root\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<CheckboxPrimitive.Indicator\n\t\t\tclassName={cn('flex items-center justify-center text-current')}\n\t\t>\n\t\t\t<svg viewBox=\"0 0 8 8\">\n\t\t\t\t<path\n\t\t\t\t\td=\"M1,4 L3,6 L7,2\"\n\t\t\t\t\tstroke=\"currentcolor\"\n\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\tfill=\"none\"\n\t\t\t\t/>\n\t\t\t</svg>\n\t\t</CheckboxPrimitive.Indicator>\n\t</CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n", "import * as React from 'react'\n\nimport { cn } from '#app/utils/misc.tsx'\n\nexport interface InputProps\n\textends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n\t({ className, type, ...props }, ref) => {\n\t\treturn (\n\t\t\t<input\n\t\t\t\ttype={type}\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid]:border-input-invalid',\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t\tref={ref}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t)\n\t},\n)\nInput.displayName = 'Input'\n\nexport { Input }\n", "import * as LabelPrimitive from '@radix-ui/react-label'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport * as React from 'react'\n\nimport { cn } from '#app/utils/misc.tsx'\n\nconst labelVariants = cva(\n\t'text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70',\n)\n\nconst Label = React.forwardRef<\n\tReact.ElementRef<typeof LabelPrimitive.Root>,\n\tReact.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n\t\tVariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n\t<LabelPrimitive.Root\n\t\tref={ref}\n\t\tclassName={cn(labelVariants(), className)}\n\t\t{...props}\n\t/>\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n", "import * as React from 'react'\n\nimport { cn } from '#app/utils/misc.tsx'\n\nexport interface TextareaProps\n\textends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n\t({ className, ...props }, ref) => {\n\t\treturn (\n\t\t\t<textarea\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 aria-[invalid]:border-input-invalid',\n\t\t\t\t\tclassName,\n\t\t\t\t)}\n\t\t\t\tref={ref}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t)\n\t},\n)\nTextarea.displayName = 'Textarea'\n\nexport { Textarea }\n", "import { useNavigation } from '@remix-run/react'\nimport { useEffect, useRef, useState } from 'react'\nimport { useSpinDelay } from 'spin-delay'\nimport { cn } from '#app/utils/misc.tsx'\nimport { Icon } from './ui/icon.tsx'\n\nfunction EpicProgress() {\n\tconst transition = useNavigation()\n\tconst busy = transition.state !== 'idle'\n\tconst delayedPending = useSpinDelay(busy, {\n\t\tdelay: 600,\n\t\tminDuration: 400,\n\t})\n\tconst ref = useRef<HTMLDivElement>(null)\n\tconst [animationComplete, setAnimationComplete] = useState(true)\n\n\tuseEffect(() => {\n\t\tif (!ref.current) return\n\t\tif (delayedPending) setAnimationComplete(false)\n\n\t\tconst animationPromises = ref.current\n\t\t\t.getAnimations()\n\t\t\t.map(({ finished }) => finished)\n\n\t\tPromise.allSettled(animationPromises).then(() => {\n\t\t\tif (!delayedPending) setAnimationComplete(true)\n\t\t})\n\t}, [delayedPending])\n\n\treturn (\n\t\t<div\n\t\t\trole=\"progressbar\"\n\t\t\taria-hidden={delayedPending ? undefined : true}\n\t\t\taria-valuetext={delayedPending ? 'Loading' : undefined}\n\t\t\tclassName=\"fixed inset-x-0 left-0 top-0 z-50 h-[0.20rem] animate-pulse\"\n\t\t>\n\t\t\t<div\n\t\t\t\tref={ref}\n\t\t\t\tclassName={cn(\n\t\t\t\t\t'h-full w-0 bg-foreground duration-500 ease-in-out',\n\t\t\t\t\ttransition.state === 'idle' &&\n\t\t\t\t\t\t(animationComplete\n\t\t\t\t\t\t\t? 'transition-none'\n\t\t\t\t\t\t\t: 'w-full opacity-0 transition-all'),\n\t\t\t\t\tdelayedPending && transition.state === 'submitting' && 'w-5/12',\n\t\t\t\t\tdelayedPending && transition.state === 'loading' && 'w-8/12',\n\t\t\t\t)}\n\t\t\t/>\n\t\t\t{delayedPending && (\n\t\t\t\t<div className=\"absolute flex items-center justify-center\">\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tname=\"update\"\n\t\t\t\t\t\tsize=\"md\"\n\t\t\t\t\t\tclassName=\"m-1 animate-spin text-foreground\"\n\t\t\t\t\t\taria-hidden\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nexport { EpicProgress }\n", "import { type SVGProps } from 'react'\nimport { cn } from '#app/utils/misc.tsx'\nimport { type IconName } from '@/icon-name'\nimport href from './icons/sprite.svg'\n\nexport { href }\nexport { IconName }\n\nconst sizeClassName = {\n\tfont: 'w-[1em] h-[1em]',\n\txs: 'w-3 h-3',\n\tsm: 'w-4 h-4',\n\tmd: 'w-5 h-5',\n\tlg: 'w-6 h-6',\n\txl: 'w-7 h-7',\n} as const\n\ntype Size = keyof typeof sizeClassName\n\nconst childrenSizeClassName = {\n\tfont: 'gap-1.5',\n\txs: 'gap-1.5',\n\tsm: 'gap-1.5',\n\tmd: 'gap-2',\n\tlg: 'gap-2',\n\txl: 'gap-3',\n} satisfies Record<Size, string>\n\n/**\n * Renders an SVG icon. The icon defaults to the size of the font. To make it\n * align vertically with neighboring text, you can pass the text as a child of\n * the icon and it will be automatically aligned.\n * Alternatively, if you're not ok with the icon being to the left of the text,\n * you need to wrap the icon and text in a common parent and set the parent to\n * display \"flex\" (or \"inline-flex\") with \"items-center\" and a reasonable gap.\n */\nexport function Icon({\n\tname,\n\tsize = 'font',\n\tclassName,\n\tchildren,\n\t...props\n}: SVGProps<SVGSVGElement> & {\n\tname: IconName\n\tsize?: Size\n}) {\n\tif (children) {\n\t\treturn (\n\t\t\t<span\n\t\t\t\tclassName={`inline-flex items-center ${childrenSizeClassName[size]}`}\n\t\t\t>\n\t\t\t\t<Icon name={name} size={size} className={className} {...props} />\n\t\t\t\t{children}\n\t\t\t</span>\n\t\t)\n\t}\n\treturn (\n\t\t<svg\n\t\t\t{...props}\n\t\t\tclassName={cn(sizeClassName[size], 'inline self-center', className)}\n\t\t>\n\t\t\t<use href={`${href}#${name}`} />\n\t\t</svg>\n\t)\n}\n", "import { Form, useSearchParams, useSubmit } from '@remix-run/react'\nimport { useId } from 'react'\nimport { useDebounce, useIsPending } from '#app/utils/misc.tsx'\nimport { Icon } from './ui/icon.tsx'\nimport { Input } from './ui/input.tsx'\nimport { Label } from './ui/label.tsx'\nimport { StatusButton } from './ui/status-button.tsx'\n\nexport function SearchBar({\n\tstatus,\n\tautoFocus = false,\n\tautoSubmit = false,\n}: {\n\tstatus: 'idle' | 'pending' | 'success' | 'error'\n\tautoFocus?: boolean\n\tautoSubmit?: boolean\n}) {\n\tconst id = useId()\n\tconst [searchParams] = useSearchParams()\n\tconst submit = useSubmit()\n\tconst isSubmitting = useIsPending({\n\t\tformMethod: 'GET',\n\t\tformAction: '/users',\n\t})\n\n\tconst handleFormChange = useDebounce((form: HTMLFormElement) => {\n\t\tsubmit(form)\n\t}, 400)\n\n\treturn (\n\t\t<Form\n\t\t\tmethod=\"GET\"\n\t\t\taction=\"/users\"\n\t\t\tclassName=\"flex flex-wrap items-center justify-center gap-2\"\n\t\t\tonChange={e => autoSubmit && handleFormChange(e.currentTarget)}\n\t\t>\n\t\t\t<div className=\"flex-1\">\n\t\t\t\t<Label htmlFor={id} className=\"sr-only\">\n\t\t\t\t\tSearch\n\t\t\t\t</Label>\n\t\t\t\t<Input\n\t\t\t\t\ttype=\"search\"\n\t\t\t\t\tname=\"search\"\n\t\t\t\t\tid={id}\n\t\t\t\t\tdefaultValue={searchParams.get('search') ?? ''}\n\t\t\t\t\tplaceholder=\"Search\"\n\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\tautoFocus={autoFocus}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<div>\n\t\t\t\t<StatusButton\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tstatus={isSubmitting ? 'pending' : status}\n\t\t\t\t\tclassName=\"flex w-full items-center justify-center\"\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t>\n\t\t\t\t\t<Icon name=\"magnifying-glass\" size=\"sm\" />\n\t\t\t\t\t<span className=\"sr-only\">Search</span>\n\t\t\t\t</StatusButton>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n", "import * as React from 'react'\nimport { useSpinDelay } from 'spin-delay'\nimport { cn } from '#app/utils/misc.tsx'\nimport { Button, type ButtonProps } from './button.tsx'\nimport { Icon } from './icon.tsx'\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from './tooltip.tsx'\n\nexport const StatusButton = React.forwardRef<\n\tHTMLButtonElement,\n\tButtonProps & {\n\t\tstatus: 'pending' | 'success' | 'error' | 'idle'\n\t\tmessage?: string | null\n\t\tspinDelay?: Parameters<typeof useSpinDelay>[1]\n\t}\n>(({ message, status, className, children, spinDelay, ...props }, ref) => {\n\tconst delayedPending = useSpinDelay(status === 'pending', {\n\t\tdelay: 400,\n\t\tminDuration: 300,\n\t\t...spinDelay,\n\t})\n\tconst companion = {\n\t\tpending: delayedPending ? (\n\t\t\t<div className=\"inline-flex h-6 w-6 items-center justify-center\">\n\t\t\t\t<Icon name=\"update\" className=\"animate-spin\" />\n\t\t\t</div>\n\t\t) : null,\n\t\tsuccess: (\n\t\t\t<div className=\"inline-flex h-6 w-6 items-center justify-center\">\n\t\t\t\t<Icon name=\"check\" />\n\t\t\t</div>\n\t\t),\n\t\terror: (\n\t\t\t<div className=\"inline-flex h-6 w-6 items-center justify-center rounded-full bg-destructive\">\n\t\t\t\t<Icon name=\"cross-1\" className=\"text-destructive-foreground\" />\n\t\t\t</div>\n\t\t),\n\t\tidle: null,\n\t}[status]\n\n\treturn (\n\t\t<Button\n\t\t\tref={ref}\n\t\t\tclassName={cn('flex justify-center gap-4', className)}\n\t\t\t{...props}\n\t\t>\n\t\t\t<div>{children}</div>\n\t\t\t{message ? (\n\t\t\t\t<TooltipProvider>\n\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t<TooltipTrigger>{companion}</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>{message}</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</TooltipProvider>\n\t\t\t) : (\n\t\t\t\tcompanion\n\t\t\t)}\n\t\t</Button>\n\t)\n})\nStatusButton.displayName = 'Button'\n", "import { Slot } from '@radix-ui/react-slot'\nimport { cva, type VariantProps } from 'class-variance-authority'\nimport * as React from 'react'\n\nimport { cn } from '#app/utils/misc.tsx'\n\nconst buttonVariants = cva(\n\t'inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors outline-none focus-visible:ring-4 focus-within:ring-4 ring-ring ring-offset-2 disabled:pointer-events-none disabled:opacity-50',\n\t{\n\t\tvariants: {\n\t\t\tvariant: {\n\t\t\t\tdefault: 'bg-primary text-primary-foreground hover:bg-primary/80',\n\t\t\t\tdestructive:\n\t\t\t\t\t'bg-destructive text-destructive-foreground hover:bg-destructive/80',\n\t\t\t\toutline:\n\t\t\t\t\t'border border-input bg-background hover:bg-accent hover:text-accent-foreground',\n\t\t\t\tsecondary:\n\t\t\t\t\t'bg-secondary text-secondary-foreground hover:bg-secondary/80',\n\t\t\t\tghost: 'hover:bg-accent hover:text-accent-foreground',\n\t\t\t\tlink: 'text-primary underline-offset-4 hover:underline',\n\t\t\t},\n\t\t\tsize: {\n\t\t\t\tdefault: 'h-10 px-4 py-2',\n\t\t\t\twide: 'px-24 py-5',\n\t\t\t\tsm: 'h-9 rounded-md px-3',\n\t\t\t\tlg: 'h-11 rounded-md px-8',\n\t\t\t\tpill: 'px-12 py-3 leading-3',\n\t\t\t\ticon: 'h-10 w-10',\n\t\t\t},\n\t\t},\n\t\tdefaultVariants: {\n\t\t\tvariant: 'default',\n\t\t\tsize: 'default',\n\t\t},\n\t},\n)\n\nexport interface ButtonProps\n\textends React.ButtonHTMLAttributes<HTMLButtonElement>,\n\t\tVariantProps<typeof buttonVariants> {\n\tasChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n\t({ className, variant, size, asChild = false, ...props }, ref) => {\n\t\tconst Comp = asChild ? Slot : 'button'\n\t\treturn (\n\t\t\t<Comp\n\t\t\t\tclassName={cn(buttonVariants({ variant, size, className }))}\n\t\t\t\tref={ref}\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t)\n\t},\n)\nButton.displayName = 'Button'\n\nexport { Button, buttonVariants }\n", "import * as TooltipPrimitive from '@radix-ui/react-tooltip'\nimport * as React from 'react'\n\nimport { cn } from '#app/utils/misc.tsx'\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n\tReact.ElementRef<typeof TooltipPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n\t<TooltipPrimitive.Content\n\t\tref={ref}\n\t\tsideOffset={sideOffset}\n\t\tclassName={cn(\n\t\t\t'z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n", "import { useEffect } from 'react'\nimport { Toaster, toast as showToast } from 'sonner'\nimport { type Toast } from '#app/utils/toast.server.ts'\n\nexport function EpicToaster({ toast }: { toast?: Toast | null }) {\n\treturn (\n\t\t<>\n\t\t\t<Toaster closeButton position=\"top-center\" />\n\t\t\t{toast ? <ShowToast toast={toast} /> : null}\n\t\t</>\n\t)\n}\n\nfunction ShowToast({ toast }: { toast: Toast }) {\n\tconst { id, type, title, description } = toast\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tshowToast[type](title, { id, description })\n\t\t}, 0)\n\t}, [description, id, title, type])\n\treturn null\n}\n", "import * as DropdownMenuPrimitive from '@radix-ui/react-dropdown-menu'\nimport * as React from 'react'\n\nimport { cn } from '#app/utils/misc.tsx'\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n\t\tinset?: boolean\n\t}\n>(({ className, inset, children, ...props }, ref) => (\n\t<DropdownMenuPrimitive.SubTrigger\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t{children}\n\t\t<span className=\"ml-auto h-4 w-4\">\u25B6\uFE0F</span>\n\t</DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n\tDropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n\t<DropdownMenuPrimitive.SubContent\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n))\nDropdownMenuSubContent.displayName =\n\tDropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Content>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Portal>\n\t\t<DropdownMenuPrimitive.Content\n\t\t\tref={ref}\n\t\t\tsideOffset={sideOffset}\n\t\t\tclassName={cn(\n\t\t\t\t'z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2',\n\t\t\t\tclassName,\n\t\t\t)}\n\t\t\t{...props}\n\t\t/>\n\t</DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Item>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n\t\tinset?: boolean\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Item\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n\t<DropdownMenuPrimitive.CheckboxItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n\t\t\tclassName,\n\t\t)}\n\t\tchecked={checked}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<DropdownMenuPrimitive.ItemIndicator>\n\t\t\t\t<span className=\"h-4 w-4\">\n\t\t\t\t\t<svg viewBox=\"0 0 8 8\">\n\t\t\t\t\t\t<path\n\t\t\t\t\t\t\td=\"M1,4 L3,6 L7,2\"\n\t\t\t\t\t\t\tstroke=\"black\"\n\t\t\t\t\t\t\tstrokeWidth=\"1\"\n\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</svg>\n\t\t\t\t</span>\n\t\t\t</DropdownMenuPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n\tDropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n\t<DropdownMenuPrimitive.RadioItem\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'relative flex select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t>\n\t\t<span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n\t\t\t<DropdownMenuPrimitive.ItemIndicator>\n\t\t\t\t<span className=\"h-2 w-2\">\u26AA</span>\n\t\t\t</DropdownMenuPrimitive.ItemIndicator>\n\t\t</span>\n\t\t{children}\n\t</DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Label>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n\t\tinset?: boolean\n\t}\n>(({ className, inset, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Label\n\t\tref={ref}\n\t\tclassName={cn(\n\t\t\t'px-2 py-1.5 text-sm font-semibold',\n\t\t\tinset && 'pl-8',\n\t\t\tclassName,\n\t\t)}\n\t\t{...props}\n\t/>\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n\tReact.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n\tReact.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n\t<DropdownMenuPrimitive.Separator\n\t\tref={ref}\n\t\tclassName={cn('-mx-1 my-1 h-px bg-muted', className)}\n\t\t{...props}\n\t/>\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n\tclassName,\n\t...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n\treturn (\n\t\t<span\n\t\t\tclassName={cn('ml-auto text-xs tracking-widest opacity-60', className)}\n\t\t\t{...props}\n\t\t/>\n\t)\n}\nDropdownMenuShortcut.displayName = 'DropdownMenuShortcut'\n\nexport {\n\tDropdownMenu,\n\tDropdownMenuTrigger,\n\tDropdownMenuContent,\n\tDropdownMenuItem,\n\tDropdownMenuCheckboxItem,\n\tDropdownMenuRadioItem,\n\tDropdownMenuLabel,\n\tDropdownMenuSeparator,\n\tDropdownMenuShortcut,\n\tDropdownMenuGroup,\n\tDropdownMenuPortal,\n\tDropdownMenuSub,\n\tDropdownMenuSubContent,\n\tDropdownMenuSubTrigger,\n\tDropdownMenuRadioGroup,\n}\n", "import { type Connection, type Password, type User } from '@prisma/client'\nimport { redirect } from '@remix-run/node'\nimport bcrypt from 'bcryptjs'\nimport { Authenticator } from 'remix-auth'\nimport { safeRedirect } from 'remix-utils/safe-redirect'\nimport { connectionSessionStorage, providers } from './connections.server.ts'\nimport { prisma } from './db.server.ts'\nimport { combineHeaders, downloadFile } from './misc.tsx'\nimport { type ProviderUser } from './providers/provider.ts'\nimport { authSessionStorage } from './session.server.ts'\n\nexport const SESSION_EXPIRATION_TIME = 1000 * 60 * 60 * 24 * 30\nexport const getSessionExpirationDate = () =>\n\tnew Date(Date.now() + SESSION_EXPIRATION_TIME)\n\nexport const sessionKey = 'sessionId'\n\nexport const authenticator = new Authenticator<ProviderUser>(\n\tconnectionSessionStorage,\n)\n\nfor (const [providerName, provider] of Object.entries(providers)) {\n\tauthenticator.use(provider.getAuthStrategy(), providerName)\n}\n\nexport async function getUserId(request: Request) {\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst sessionId = authSession.get(sessionKey)\n\tif (!sessionId) return null\n\tconst session = await prisma.session.findUnique({\n\t\tselect: { user: { select: { id: true } } },\n\t\twhere: { id: sessionId, expirationDate: { gt: new Date() } },\n\t})\n\tif (!session?.user) {\n\t\tthrow redirect('/', {\n\t\t\theaders: {\n\t\t\t\t'set-cookie': await authSessionStorage.destroySession(authSession),\n\t\t\t},\n\t\t})\n\t}\n\treturn session.user.id\n}\n\nexport async function requireUserId(\n\trequest: Request,\n\t{ redirectTo }: { redirectTo?: string | null } = {},\n) {\n\tconst userId = await getUserId(request)\n\tif (!userId) {\n\t\tconst requestUrl = new URL(request.url)\n\t\tredirectTo =\n\t\t\tredirectTo === null\n\t\t\t\t? null\n\t\t\t\t: redirectTo ?? `${requestUrl.pathname}${requestUrl.search}`\n\t\tconst loginParams = redirectTo ? new URLSearchParams({ redirectTo }) : null\n\t\tconst loginRedirect = ['/login', loginParams?.toString()]\n\t\t\t.filter(Boolean)\n\t\t\t.join('?')\n\t\tthrow redirect(loginRedirect)\n\t}\n\treturn userId\n}\n\nexport async function requireAnonymous(request: Request) {\n\tconst userId = await getUserId(request)\n\tif (userId) {\n\t\tthrow redirect('/')\n\t}\n}\n\nexport async function login({\n\tusername,\n\tpassword,\n}: {\n\tusername: User['username']\n\tpassword: string\n}) {\n\tconst user = await verifyUserPassword({ username }, password)\n\tif (!user) return null\n\tconst session = await prisma.session.create({\n\t\tselect: { id: true, expirationDate: true, userId: true },\n\t\tdata: {\n\t\t\texpirationDate: getSessionExpirationDate(),\n\t\t\tuserId: user.id,\n\t\t},\n\t})\n\treturn session\n}\n\nexport async function resetUserPassword({\n\tusername,\n\tpassword,\n}: {\n\tusername: User['username']\n\tpassword: string\n}) {\n\tconst hashedPassword = await getPasswordHash(password);\n\treturn prisma.user.update({\n\t\twhere: { username },\n\t\tdata: {\n\t\t\tpassword: {\n\t\t\t\tupdate: {\n\t\t\t\t\thash: hashedPassword,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n}\n\nexport async function signup({\n\temail,\n\tusername,\n\tpassword,\n\tname,\n}: {\n\temail: User['email']\n\tusername: User['username']\n\tname: User['name']\n\tpassword: string\n}) {\n\tconst hashedPassword = await getPasswordHash(password)\n\n\tconst session = await prisma.session.create({\n\t\tdata: {\n\t\t\texpirationDate: getSessionExpirationDate(),\n\t\t\tuser: {\n\t\t\t\tcreate: {\n\t\t\t\t\temail: email.toLowerCase(),\n\t\t\t\t\tusername: username.toLowerCase(),\n\t\t\t\t\tname,\n\t\t\t\t\troles: { connect: { name: 'user' } },\n\t\t\t\t\tpassword: {\n\t\t\t\t\t\tcreate: {\n\t\t\t\t\t\t\thash: hashedPassword,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tselect: { id: true, expirationDate: true },\n\t})\n\n\treturn session\n}\n\nexport async function signupWithConnection({\n\temail,\n\tusername,\n\tname,\n\tproviderId,\n\tproviderName,\n\timageUrl,\n}: {\n\temail: User['email']\n\tusername: User['username']\n\tname: User['name']\n\tproviderId: Connection['providerId']\n\tproviderName: Connection['providerName']\n\timageUrl?: string\n}) {\n\tconst session = await prisma.session.create({\n\t\tdata: {\n\t\t\texpirationDate: getSessionExpirationDate(),\n\t\t\tuser: {\n\t\t\t\tcreate: {\n\t\t\t\t\temail: email.toLowerCase(),\n\t\t\t\t\tusername: username.toLowerCase(),\n\t\t\t\t\tname,\n\t\t\t\t\troles: { connect: { name: 'user' } },\n\t\t\t\t\tconnections: { create: { providerId, providerName } },\n\t\t\t\t\timage: imageUrl\n\t\t\t\t\t\t? { create: await downloadFile(imageUrl) }\n\t\t\t\t\t\t: undefined,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\tselect: { id: true, expirationDate: true },\n\t})\n\n\treturn session\n}\n\nexport async function logout(\n\t{\n\t\trequest,\n\t\tredirectTo = '/',\n\t}: {\n\t\trequest: Request\n\t\tredirectTo?: string\n\t},\n\tresponseInit?: ResponseInit,\n) {\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst sessionId = authSession.get(sessionKey)\n\t// if this fails, we still need to delete the session from the user's browser\n\t// and it doesn't do any harm staying in the db anyway.\n\tif (sessionId) void prisma.session.deleteMany({ where: { id: sessionId } })\n\tthrow redirect(safeRedirect(redirectTo), {\n\t\t...responseInit,\n\t\theaders: combineHeaders(\n\t\t\t{ 'set-cookie': await authSessionStorage.destroySession(authSession) },\n\t\t\tresponseInit?.headers,\n\t\t),\n\t})\n}\n\nexport async function getPasswordHash(password: string) {\n\tconst hash = await bcrypt.hash(password, 10)\n\treturn hash\n}\n\nexport async function verifyUserPassword(\n\twhere: Pick<User, 'username'> | Pick<User, 'id'>,\n\tpassword: Password['hash'],\n) {\n\tconst userWithPassword = await prisma.user.findUnique({\n\t\twhere,\n\t\tselect: { id: true, password: { select: { hash: true } } },\n\t})\n\n\tif (!userWithPassword || !userWithPassword.password) {\n\t\treturn null\n\t}\n\n\tconst isValid = await bcrypt.compare(password, userWithPassword.password.hash)\n\n\tif (!isValid) {\n\t\treturn null\n\t}\n\n\treturn { id: userWithPassword.id }\n}\n", "import { createCookieSessionStorage } from '@remix-run/node'\nimport { type ProviderName } from './connections.tsx'\nimport { GitHubProvider } from './providers/github.server.ts'\nimport { type AuthProvider } from './providers/provider.ts'\nimport { type Timings } from './timing.server.ts'\n\nexport const connectionSessionStorage = createCookieSessionStorage({\n\tcookie: {\n\t\tname: 'en_connection',\n\t\tsameSite: 'lax',\n\t\tpath: '/',\n\t\thttpOnly: true,\n\t\tmaxAge: 60 * 10, // 10 minutes\n\t\tsecrets: process.env.SESSION_SECRET.split(','),\n\t\tsecure: process.env.NODE_ENV === 'production',\n\t},\n})\n\nexport const providers: Record<ProviderName, AuthProvider> = {\n\tgithub: new GitHubProvider(),\n}\n\nexport function handleMockAction(providerName: ProviderName, request: Request) {\n\treturn providers[providerName].handleMockAction(request)\n}\n\nexport function resolveConnectionData(\n\tproviderName: ProviderName,\n\tproviderId: string,\n\toptions?: { timings?: Timings },\n) {\n\treturn providers[providerName].resolveConnectionData(providerId, options)\n}\n", "import { createId as cuid } from '@paralleldrive/cuid2'\nimport { redirect } from '@remix-run/node'\nimport { GitHubStrategy } from 'remix-auth-github'\nimport { z } from 'zod'\nimport { cache, cachified } from '../cache.server.ts'\nimport { connectionSessionStorage } from '../connections.server.ts'\nimport { type Timings } from '../timing.server.ts'\nimport { type AuthProvider } from './provider.ts'\n\nconst GitHubUserSchema = z.object({ login: z.string() })\nconst GitHubUserParseResult = z\n\t.object({\n\t\tsuccess: z.literal(true),\n\t\tdata: GitHubUserSchema,\n\t})\n\t.or(\n\t\tz.object({\n\t\t\tsuccess: z.literal(false),\n\t\t}),\n\t)\n\nconst shouldMock = process.env.GITHUB_CLIENT_ID?.startsWith('MOCK_')\n\nexport class GitHubProvider implements AuthProvider {\n\tgetAuthStrategy() {\n\t\treturn new GitHubStrategy(\n\t\t\t{\n\t\t\t\tclientID: process.env.GITHUB_CLIENT_ID,\n\t\t\t\tclientSecret: process.env.GITHUB_CLIENT_SECRET,\n\t\t\t\tcallbackURL: '/auth/github/callback',\n\t\t\t},\n\t\t\tasync ({ profile }) => {\n\t\t\t\tconst email = profile.emails[0].value.trim().toLowerCase()\n\t\t\t\tconst username = profile.displayName\n\t\t\t\tconst imageUrl = profile.photos[0].value\n\t\t\t\treturn {\n\t\t\t\t\temail,\n\t\t\t\t\tid: profile.id,\n\t\t\t\t\tusername,\n\t\t\t\t\tname: profile.name.givenName,\n\t\t\t\t\timageUrl,\n\t\t\t\t}\n\t\t\t},\n\t\t)\n\t}\n\n\tasync resolveConnectionData(\n\t\tproviderId: string,\n\t\t{ timings }: { timings?: Timings } = {},\n\t) {\n\t\tconst result = await cachified({\n\t\t\tkey: `connection-data:github:${providerId}`,\n\t\t\tcache,\n\t\t\ttimings,\n\t\t\tttl: 1000 * 60,\n\t\t\tswr: 1000 * 60 * 60 * 24 * 7,\n\t\t\tasync getFreshValue(context) {\n\t\t\t\tawait new Promise(r => setTimeout(r, 3000))\n\t\t\t\tconst response = await fetch(\n\t\t\t\t\t`https://api.github.com/user/${providerId}`,\n\t\t\t\t\t{ headers: { Authorization: `token ${process.env.GITHUB_TOKEN}` } },\n\t\t\t\t)\n\t\t\t\tconst rawJson = await response.json()\n\t\t\t\tconst result = GitHubUserSchema.safeParse(rawJson)\n\t\t\t\tif (!result.success) {\n\t\t\t\t\t// if it was unsuccessful, then we should kick it out of the cache\n\t\t\t\t\t// asap and try again.\n\t\t\t\t\tcontext.metadata.ttl = 0\n\t\t\t\t}\n\t\t\t\treturn result\n\t\t\t},\n\t\t\tcheckValue: GitHubUserParseResult,\n\t\t})\n\t\treturn {\n\t\t\tdisplayName: result.success ? result.data.login : 'Unknown',\n\t\t\tlink: result.success ? `https://github.com/${result.data.login}` : null,\n\t\t} as const\n\t}\n\n\tasync handleMockAction(request: Request) {\n\t\tif (!shouldMock) return\n\n\t\tconst connectionSession = await connectionSessionStorage.getSession(\n\t\t\trequest.headers.get('cookie'),\n\t\t)\n\t\tconst state = cuid()\n\t\tconnectionSession.set('oauth2:state', state)\n\t\tconst code = 'MOCK_CODE_GITHUB_KODY'\n\t\tconst searchParams = new URLSearchParams({ code, state })\n\t\tthrow redirect(`/auth/github/callback?${searchParams}`, {\n\t\t\theaders: {\n\t\t\t\t'set-cookie':\n\t\t\t\t\tawait connectionSessionStorage.commitSession(connectionSession),\n\t\t\t},\n\t\t})\n\t}\n}\n", "import fs from 'fs'\nimport { remember } from '@epic-web/remember'\nimport Database from 'better-sqlite3'\nimport {\n\tcachified as baseCachified,\n\tlruCacheAdapter,\n\tverboseReporter,\n\tmergeReporters,\n\ttype CacheEntry,\n\ttype Cache as CachifiedCache,\n\ttype CachifiedOptions,\n} from 'cachified'\nimport { LRUCache } from 'lru-cache'\nimport { z } from 'zod'\nimport { updatePrimaryCacheValue } from '#app/routes/admin+/cache_.sqlite.tsx'\nimport { getInstanceInfo, getInstanceInfoSync } from './litefs.server.ts'\nimport { cachifiedTimingReporter, type Timings } from './timing.server.ts'\n\nconst CACHE_DATABASE_PATH = process.env.CACHE_DATABASE_PATH\n\nconst cacheDb = remember('cacheDb', createDatabase)\n\nfunction createDatabase(tryAgain = true): Database.Database {\n\tconst db = new Database(CACHE_DATABASE_PATH)\n\tconst { currentIsPrimary } = getInstanceInfoSync()\n\tif (!currentIsPrimary) return db\n\n\ttry {\n\t\t// create cache table with metadata JSON column and value JSON column if it does not exist already\n\t\tdb.exec(`\n\t\t\tCREATE TABLE IF NOT EXISTS cache (\n\t\t\t\tkey TEXT PRIMARY KEY,\n\t\t\t\tmetadata TEXT,\n\t\t\t\tvalue TEXT\n\t\t\t)\n\t\t`)\n\t} catch (error: unknown) {\n\t\tfs.unlinkSync(CACHE_DATABASE_PATH)\n\t\tif (tryAgain) {\n\t\t\tconsole.error(\n\t\t\t\t`Error creating cache database, deleting the file at \"${CACHE_DATABASE_PATH}\" and trying again...`,\n\t\t\t)\n\t\t\treturn createDatabase(false)\n\t\t}\n\t\tthrow error\n\t}\n\treturn db\n}\n\nconst lru = remember(\n\t'lru-cache',\n\t() => new LRUCache<string, CacheEntry<unknown>>({ max: 5000 }),\n)\n\nexport const lruCache = lruCacheAdapter(lru)\n\nconst cacheEntrySchema = z.object({\n\tmetadata: z.object({\n\t\tcreatedTime: z.number(),\n\t\tttl: z.number().nullable().optional(),\n\t\tswr: z.number().nullable().optional(),\n\t}),\n\tvalue: z.unknown(),\n})\nconst cacheQueryResultSchema = z.object({\n\tmetadata: z.string(),\n\tvalue: z.string(),\n})\n\nexport const cache: CachifiedCache = {\n\tname: 'SQLite cache',\n\tget(key) {\n\t\tconst result = cacheDb\n\t\t\t.prepare('SELECT value, metadata FROM cache WHERE key = ?')\n\t\t\t.get(key)\n\t\tconst parseResult = cacheQueryResultSchema.safeParse(result)\n\t\tif (!parseResult.success) return null\n\n\t\tconst parsedEntry = cacheEntrySchema.safeParse({\n\t\t\tmetadata: JSON.parse(parseResult.data.metadata),\n\t\t\tvalue: JSON.parse(parseResult.data.value),\n\t\t})\n\t\tif (!parsedEntry.success) return null\n\t\tconst { metadata, value } = parsedEntry.data\n\t\tif (!value) return null\n\t\treturn { metadata, value }\n\t},\n\tasync set(key, entry) {\n\t\t// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\n\t\tconst { currentIsPrimary, primaryInstance } = await getInstanceInfo()\n\t\tif (currentIsPrimary) {\n\t\t\tcacheDb\n\t\t\t\t.prepare(\n\t\t\t\t\t'INSERT OR REPLACE INTO cache (key, value, metadata) VALUES (@key, @value, @metadata)',\n\t\t\t\t)\n\t\t\t\t.run({\n\t\t\t\t\tkey,\n\t\t\t\t\tvalue: JSON.stringify(entry.value),\n\t\t\t\t\tmetadata: JSON.stringify(entry.metadata),\n\t\t\t\t})\n\t\t} else {\n\t\t\t// fire-and-forget cache update\n\t\t\tvoid updatePrimaryCacheValue({\n\t\t\t\tkey,\n\t\t\t\tcacheValue: entry,\n\t\t\t}).then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`Error updating cache value for key \"${key}\" on primary instance (${primaryInstance}): ${response.status} ${response.statusText}`,\n\t\t\t\t\t\t{ entry },\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n\tasync delete(key) {\n\t\tconst { currentIsPrimary, primaryInstance } = await getInstanceInfo()\n\t\tif (currentIsPrimary) {\n\t\t\tcacheDb.prepare('DELETE FROM cache WHERE key = ?').run(key)\n\t\t} else {\n\t\t\t// fire-and-forget cache update\n\t\t\tvoid updatePrimaryCacheValue({\n\t\t\t\tkey,\n\t\t\t\tcacheValue: undefined,\n\t\t\t}).then(response => {\n\t\t\t\tif (!response.ok) {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`Error deleting cache value for key \"${key}\" on primary instance (${primaryInstance}): ${response.status} ${response.statusText}`,\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t},\n}\n\nexport async function getAllCacheKeys(limit: number) {\n\treturn {\n\t\tsqlite: cacheDb\n\t\t\t.prepare('SELECT key FROM cache LIMIT ?')\n\t\t\t.all(limit)\n\t\t\t.map(row => (row as { key: string }).key),\n\t\tlru: [...lru.keys()],\n\t}\n}\n\nexport async function searchCacheKeys(search: string, limit: number) {\n\treturn {\n\t\tsqlite: cacheDb\n\t\t\t.prepare('SELECT key FROM cache WHERE key LIKE ? LIMIT ?')\n\t\t\t.all(`%${search}%`, limit)\n\t\t\t.map(row => (row as { key: string }).key),\n\t\tlru: [...lru.keys()].filter(key => key.includes(search)),\n\t}\n}\n\nexport async function cachified<Value>({\n\ttimings,\n\treporter = verboseReporter(),\n\t...options\n}: CachifiedOptions<Value> & {\n\ttimings?: Timings\n}): Promise<Value> {\n\treturn baseCachified({\n\t\t...options,\n\t\treporter: mergeReporters(cachifiedTimingReporter(timings), reporter),\n\t})\n}\n", "import { type DataFunctionArgs, json, redirect } from '@remix-run/node'\nimport { getInstanceInfo, getInternalInstanceDomain } from 'litefs-js'\nimport { z } from 'zod'\nimport { cache } from '#app/utils/cache.server.ts'\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst { currentIsPrimary, primaryInstance } = await getInstanceInfo()\n\tif (!currentIsPrimary) {\n\t\tthrow new Error(\n\t\t\t`${request.url} should only be called on the primary instance (${primaryInstance})}`,\n\t\t)\n\t}\n\tconst token = process.env.INTERNAL_COMMAND_TOKEN\n\tconst isAuthorized =\n\t\trequest.headers.get('Authorization') === `Bearer ${token}`\n\tif (!isAuthorized) {\n\t\t// nah, you can't be here...\n\t\treturn redirect('https://www.youtube.com/watch?v=dQw4w9WgXcQ')\n\t}\n\tconst { key, cacheValue } = z\n\t\t.object({ key: z.string(), cacheValue: z.unknown().optional() })\n\t\t.parse(await request.json())\n\tif (cacheValue === undefined) {\n\t\tawait cache.delete(key)\n\t} else {\n\t\t// @ts-expect-error - we don't reliably know the type of cacheValue\n\t\tawait cache.set(key, cacheValue)\n\t}\n\treturn json({ success: true })\n}\n\nexport async function updatePrimaryCacheValue({\n\tkey,\n\tcacheValue,\n}: {\n\tkey: string\n\tcacheValue: any\n}) {\n\tconst { currentIsPrimary, primaryInstance } = await getInstanceInfo()\n\tif (currentIsPrimary) {\n\t\tthrow new Error(\n\t\t\t`updatePrimaryCacheValue should not be called on the primary instance (${primaryInstance})}`,\n\t\t)\n\t}\n\tconst domain = getInternalInstanceDomain(primaryInstance)\n\tconst token = process.env.INTERNAL_COMMAND_TOKEN\n\treturn fetch(`${domain}/admin/cache/sqlite`, {\n\t\tmethod: 'POST',\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${token}`,\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t\tbody: JSON.stringify({ key, cacheValue }),\n\t})\n}\n", "// litefs-js should be used server-side only. It imports `fs` which results in Remix\n// including a big polyfill. So we put the import in a `.server.ts` file to avoid that\n// polyfill from being included. https://github.com/epicweb-dev/epic-stack/pull/331\nexport * from 'litefs-js'\nexport * from 'litefs-js/remix.js'\n", "import { createCookieSessionStorage } from '@remix-run/node'\n\nexport const authSessionStorage = createCookieSessionStorage({\n\tcookie: {\n\t\tname: 'en_session',\n\t\tsameSite: 'lax',\n\t\tpath: '/',\n\t\thttpOnly: true,\n\t\tsecrets: process.env.SESSION_SECRET.split(','),\n\t\tsecure: process.env.NODE_ENV === 'production',\n\t},\n})\n\n// we have to do this because every time you commit the session you overwrite it\n// so we store the expiration time in the cookie and reset it every time we commit\nconst originalCommitSession = authSessionStorage.commitSession\n\nObject.defineProperty(authSessionStorage, 'commitSession', {\n\tvalue: async function commitSession(\n\t\t...args: Parameters<typeof originalCommitSession>\n\t) {\n\t\tconst [session, options] = args\n\t\tif (options?.expires) {\n\t\t\tsession.set('expires', options.expires)\n\t\t}\n\t\tif (options?.maxAge) {\n\t\t\tsession.set('expires', new Date(Date.now() + options.maxAge * 1000))\n\t\t}\n\t\tconst expires = session.has('expires')\n\t\t\t? new Date(session.get('expires'))\n\t\t\t: undefined\n\t\tconst setCookieHeader = await originalCommitSession(session, {\n\t\t\t...options,\n\t\t\texpires,\n\t\t})\n\t\treturn setCookieHeader\n\t},\n})\n", "/**\n * This file contains utilities for using client hints for user preference which\n * are needed by the server, but are only known by the browser.\n */\nimport { getHintUtils } from '@epic-web/client-hints'\nimport {\n\tclientHint as colorSchemeHint,\n\tsubscribeToSchemeChange,\n} from '@epic-web/client-hints/color-scheme'\nimport { clientHint as timeZoneHint } from '@epic-web/client-hints/time-zone'\nimport { useRevalidator } from '@remix-run/react'\nimport * as React from 'react'\nimport { useRequestInfo } from './request-info.ts'\n\nconst hintsUtils = getHintUtils({\n\ttheme: colorSchemeHint,\n\ttimeZone: timeZoneHint,\n\t// add other hints here\n})\n\nexport const { getHints } = hintsUtils\n\n/**\n * @returns an object with the client hints and their values\n */\nexport function useHints() {\n\tconst requestInfo = useRequestInfo()\n\treturn requestInfo.hints\n}\n\n/**\n * @returns inline script element that checks for client hints and sets cookies\n * if they are not set then reloads the page if any cookie was set to an\n * inaccurate value.\n */\nexport function ClientHintCheck({ nonce }: { nonce: string }) {\n\tconst { revalidate } = useRevalidator()\n\tReact.useEffect(\n\t\t() => subscribeToSchemeChange(() => revalidate()),\n\t\t[revalidate],\n\t)\n\n\treturn (\n\t\t<script\n\t\t\tnonce={nonce}\n\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t__html: hintsUtils.getClientHintCheckScript(),\n\t\t\t}}\n\t\t/>\n\t)\n}\n", "import { useRouteLoaderData } from '@remix-run/react'\nimport { type loader as rootLoader } from '#app/root.tsx'\nimport { invariant } from './misc.tsx'\n\n/**\n * @returns the request info from the root loader\n */\nexport function useRequestInfo() {\n\tconst data = useRouteLoaderData<typeof rootLoader>('root')\n\tinvariant(data?.requestInfo, 'No requestInfo found in root loader')\n\n\treturn data.requestInfo\n}\n", "import { createCookie } from '@remix-run/node'\nimport { CSRF, CSRFError } from 'remix-utils/csrf/server'\n\nconst cookie = createCookie('csrf', {\n\tpath: '/',\n\thttpOnly: true,\n\tsecure: process.env.NODE_ENV === 'production',\n\tsameSite: 'lax',\n\tsecrets: process.env.SESSION_SECRET.split(','),\n})\n\nexport const csrf = new CSRF({ cookie })\n\nexport async function validateCSRF(formData: FormData, headers: Headers) {\n\ttry {\n\t\tawait csrf.validate(formData, headers)\n\t} catch (error) {\n\t\tif (error instanceof CSRFError) {\n\t\t\tthrow new Response('Invalid CSRF token', { status: 403 })\n\t\t}\n\t\tthrow error\n\t}\n}\n", "import { Honeypot, SpamError } from 'remix-utils/honeypot/server'\n\nexport const honeypot = new Honeypot({\n\tvalidFromFieldName: process.env.TESTING ? null : undefined,\n\tencryptionSeed: process.env.HONEYPOT_SECRET,\n})\n\nexport function checkHoneypot(formData: FormData) {\n\ttry {\n\t\thoneypot.check(formData)\n\t} catch (error) {\n\t\tif (error instanceof SpamError) {\n\t\t\tthrow new Response('Form not submitted properly', { status: 400 })\n\t\t}\n\t\tthrow error\n\t}\n}\n", "import * as cookie from 'cookie'\n\nconst cookieName = 'en_theme'\nexport type Theme = 'light' | 'dark'\n\nexport function getTheme(request: Request): Theme | null {\n\tconst cookieHeader = request.headers.get('cookie')\n\tconst parsed = cookieHeader ? cookie.parse(cookieHeader)[cookieName] : 'light'\n\tif (parsed === 'light' || parsed === 'dark') return parsed\n\treturn null\n}\n\nexport function setTheme(theme: Theme | 'system') {\n\tif (theme === 'system') {\n\t\treturn cookie.serialize(cookieName, '', { path: '/', maxAge: -1 })\n\t} else {\n\t\treturn cookie.serialize(cookieName, theme, { path: '/' })\n\t}\n}\n", "import { createId as cuid } from '@paralleldrive/cuid2'\nimport { createCookieSessionStorage, redirect } from '@remix-run/node'\nimport { z } from 'zod'\nimport { combineHeaders } from './misc.tsx'\n\nexport const toastKey = 'toast'\n\nconst TypeSchema = z.enum(['message', 'success', 'error'])\nconst ToastSchema = z.object({\n\tdescription: z.string(),\n\tid: z.string().default(() => cuid()),\n\ttitle: z.string().optional(),\n\ttype: TypeSchema.default('message'),\n})\n\nexport type Toast = z.infer<typeof ToastSchema>\nexport type OptionalToast = Omit<Toast, 'id' | 'type'> & {\n\tid?: string\n\ttype?: z.infer<typeof TypeSchema>\n}\n\nexport const toastSessionStorage = createCookieSessionStorage({\n\tcookie: {\n\t\tname: 'en_toast',\n\t\tsameSite: 'lax',\n\t\tpath: '/',\n\t\thttpOnly: true,\n\t\tsecrets: process.env.SESSION_SECRET.split(','),\n\t\tsecure: process.env.NODE_ENV === 'production',\n\t},\n})\n\nexport async function redirectWithToast(\n\turl: string,\n\ttoast: OptionalToast,\n\tinit?: ResponseInit,\n) {\n\treturn redirect(url, {\n\t\t...init,\n\t\theaders: combineHeaders(init?.headers, await createToastHeaders(toast)),\n\t})\n}\n\nexport async function createToastHeaders(optionalToast: OptionalToast) {\n\tconst session = await toastSessionStorage.getSession()\n\tconst toast = ToastSchema.parse(optionalToast)\n\tsession.flash(toastKey, toast)\n\tconst cookie = await toastSessionStorage.commitSession(session)\n\treturn new Headers({ 'set-cookie': cookie })\n}\n\nexport async function getToast(request: Request) {\n\tconst session = await toastSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst result = ToastSchema.safeParse(session.get(toastKey))\n\tconst toast = result.success ? result.data : null\n\treturn {\n\t\ttoast,\n\t\theaders: toast\n\t\t\t? new Headers({\n\t\t\t\t\t'set-cookie': await toastSessionStorage.destroySession(session),\n\t\t\t  })\n\t\t\t: null,\n\t}\n}\n", "import { type SerializeFrom } from '@remix-run/node'\nimport { useRouteLoaderData } from '@remix-run/react'\nimport { type loader as rootLoader } from '#app/root.tsx'\n\nfunction isUser(user: any): user is SerializeFrom<typeof rootLoader>['user'] {\n\treturn user && typeof user === 'object' && typeof user.id === 'string'\n}\n\nexport function useOptionalUser() {\n\tconst data = useRouteLoaderData<typeof rootLoader>('root')\n\tif (!data || !isUser(data.user)) {\n\t\treturn undefined\n\t}\n\treturn data.user\n}\n\nexport function useUser() {\n\tconst maybeUser = useOptionalUser()\n\tif (!maybeUser) {\n\t\tthrow new Error(\n\t\t\t'No user found in root loader, but user is required by useUser. If user is optional, try useOptionalUser instead.',\n\t\t)\n\t}\n\treturn maybeUser\n}\n", "// This is called a \"splat route\" and as it's in the root `/app/routes/`\n// directory, it's a catchall. If no other routes match, this one will and we\n// can know that the user is hitting a URL that doesn't exist. By throwing a\n// 404 from the loader, we can force the error boundary to render which will\n// ensure the user gets the right status code and we can display a nicer error\n// message for them than the Remix and/or browser default.\n\nimport { Link, useLocation } from '@remix-run/react'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\n\nexport async function loader() {\n\tthrow new Response('Not found', { status: 404 })\n}\n\nexport default function NotFound() {\n\t// due to the loader, this component will never be rendered, but we'll return\n\t// the error boundary just in case.\n\treturn <ErrorBoundary />\n}\n\nexport function ErrorBoundary() {\n\tconst location = useLocation()\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: () => (\n\t\t\t\t\t<div className=\"flex flex-col gap-6\">\n\t\t\t\t\t\t<div className=\"flex flex-col gap-3\">\n\t\t\t\t\t\t\t<h1>We can't find this page:</h1>\n\t\t\t\t\t\t\t<pre className=\"whitespace-pre-wrap break-all text-body-lg\">\n\t\t\t\t\t\t\t\t{location.pathname}\n\t\t\t\t\t\t\t</pre>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<Link to=\"/\" className=\"text-body-md underline\">\n\t\t\t\t\t\t\t<Icon name=\"arrow-left\">Back to home</Icon>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</div>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n", "import { redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { authenticator } from '#app/utils/auth.server.ts'\nimport { handleMockAction } from '#app/utils/connections.server.ts'\nimport { ProviderNameSchema } from '#app/utils/connections.tsx'\nimport { getReferrerRoute } from '#app/utils/misc.tsx'\nimport { getRedirectCookieHeader } from '#app/utils/redirect-cookie.server.ts'\n\nexport async function loader() {\n\treturn redirect('/login')\n}\n\nexport async function action({ request, params }: DataFunctionArgs) {\n\tconst providerName = ProviderNameSchema.parse(params.provider)\n\n\ttry {\n\t\tawait handleMockAction(providerName, request)\n\t\treturn await authenticator.authenticate(providerName, request)\n\t} catch (error: unknown) {\n\t\tif (error instanceof Response) {\n\t\t\tconst formData = await request.formData()\n\t\t\tconst rawRedirectTo = formData.get('redirectTo')\n\t\t\tconst redirectTo =\n\t\t\t\ttypeof rawRedirectTo === 'string'\n\t\t\t\t\t? rawRedirectTo\n\t\t\t\t\t: getReferrerRoute(request)\n\t\t\tconst redirectToCookie = getRedirectCookieHeader(redirectTo)\n\t\t\tif (redirectToCookie) {\n\t\t\t\terror.headers.append('set-cookie', redirectToCookie)\n\t\t\t}\n\t\t}\n\t\tthrow error\n\t}\n}\n", "import { Form } from '@remix-run/react'\nimport { z } from 'zod'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { useIsPending } from './misc.tsx'\n\nexport const GITHUB_PROVIDER_NAME = 'github'\n// to add another provider, set their name here and add it to the providerNames below\n\nexport const providerNames = [GITHUB_PROVIDER_NAME] as const\nexport const ProviderNameSchema = z.enum(providerNames)\nexport type ProviderName = z.infer<typeof ProviderNameSchema>\n\nexport const providerLabels: Record<ProviderName, string> = {\n\t[GITHUB_PROVIDER_NAME]: 'GitHub',\n} as const\n\nexport const providerIcons: Record<ProviderName, React.ReactNode> = {\n\t[GITHUB_PROVIDER_NAME]: <Icon name=\"github-logo\" />,\n} as const\n\nexport function ProviderConnectionForm({\n\tredirectTo,\n\ttype,\n\tproviderName,\n}: {\n\tredirectTo?: string | null\n\ttype: 'Connect' | 'Login' | 'Signup'\n\tproviderName: ProviderName\n}) {\n\tconst label = providerLabels[providerName]\n\tconst formAction = `/auth/${providerName}`\n\tconst isPending = useIsPending({ formAction })\n\treturn (\n\t\t<Form\n\t\t\tclassName=\"flex items-center justify-center gap-2\"\n\t\t\taction={formAction}\n\t\t\tmethod=\"POST\"\n\t\t>\n\t\t\t{redirectTo ? (\n\t\t\t\t<input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\n\t\t\t) : null}\n\t\t\t<StatusButton\n\t\t\t\ttype=\"submit\"\n\t\t\t\tclassName=\"w-full\"\n\t\t\t\tstatus={isPending ? 'pending' : 'idle'}\n\t\t\t>\n\t\t\t\t<span className=\"inline-flex items-center gap-1.5\">\n\t\t\t\t\t{providerIcons[providerName]}\n\t\t\t\t\t<span>\n\t\t\t\t\t\t{type} with {label}\n\t\t\t\t\t</span>\n\t\t\t\t</span>\n\t\t\t</StatusButton>\n\t\t</Form>\n\t)\n}\n", "import * as cookie from 'cookie'\n\nconst key = 'redirectTo'\nexport const destroyRedirectToHeader = cookie.serialize(key, '', { maxAge: -1 })\n\nexport function getRedirectCookieHeader(redirectTo?: string) {\n\treturn redirectTo && redirectTo !== '/'\n\t\t? cookie.serialize(key, redirectTo, { maxAge: 60 * 10 })\n\t\t: null\n}\n\nexport function getRedirectCookieValue(request: Request) {\n\tconst rawCookie = request.headers.get('cookie')\n\tconst parsedCookies = rawCookie ? cookie.parse(rawCookie) : {}\n\tconst redirectTo = parsedCookies[key]\n\treturn redirectTo || null\n}\n", "import { redirect, type DataFunctionArgs } from '@remix-run/node'\nimport {\n\tauthenticator,\n\tgetSessionExpirationDate,\n\tgetUserId,\n} from '#app/utils/auth.server.ts'\nimport { ProviderNameSchema, providerLabels } from '#app/utils/connections.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { combineHeaders } from '#app/utils/misc.tsx'\nimport {\n\tdestroyRedirectToHeader,\n\tgetRedirectCookieValue,\n} from '#app/utils/redirect-cookie.server.ts'\nimport {\n\tcreateToastHeaders,\n\tredirectWithToast,\n} from '#app/utils/toast.server.ts'\nimport { verifySessionStorage } from '#app/utils/verification.server.ts'\nimport { handleNewSession } from './login.tsx'\nimport {\n\tonboardingEmailSessionKey,\n\tprefilledProfileKey,\n\tproviderIdKey,\n} from './onboarding_.$provider.tsx'\n\nconst destroyRedirectTo = { 'set-cookie': destroyRedirectToHeader }\n\nexport async function loader({ request, params }: DataFunctionArgs) {\n\tconst providerName = ProviderNameSchema.parse(params.provider)\n\tconst redirectTo = getRedirectCookieValue(request)\n\tconst label = providerLabels[providerName]\n\n\tconst authResult = await authenticator\n\t\t.authenticate(providerName, request, { throwOnError: true })\n\t\t.then(\n\t\t\tdata => ({ success: true, data }) as const,\n\t\t\terror => ({ success: false, error }) as const,\n\t\t)\n\n\tif (!authResult.success) {\n\t\tconsole.error(authResult.error)\n\t\tthrow await redirectWithToast(\n\t\t\t'/login',\n\t\t\t{\n\t\t\t\ttitle: 'Auth Failed',\n\t\t\t\tdescription: `There was an error authenticating with ${label}.`,\n\t\t\t\ttype: 'error',\n\t\t\t},\n\t\t\t{ headers: destroyRedirectTo },\n\t\t)\n\t}\n\n\tconst { data: profile } = authResult\n\n\tconst existingConnection = await prisma.connection.findUnique({\n\t\tselect: { userId: true },\n\t\twhere: {\n\t\t\tproviderName_providerId: { providerName, providerId: profile.id },\n\t\t},\n\t})\n\n\tconst userId = await getUserId(request)\n\n\tif (existingConnection && userId) {\n\t\tif (existingConnection.userId === userId) {\n\t\t\treturn redirectWithToast(\n\t\t\t\t'/settings/profile/connections',\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Already Connected',\n\t\t\t\t\tdescription: `Your \"${profile.username}\" ${label} account is already connected.`,\n\t\t\t\t},\n\t\t\t\t{ headers: destroyRedirectTo },\n\t\t\t)\n\t\t} else {\n\t\t\treturn redirectWithToast(\n\t\t\t\t'/settings/profile/connections',\n\t\t\t\t{\n\t\t\t\t\ttitle: 'Already Connected',\n\t\t\t\t\tdescription: `The \"${profile.username}\" ${label} account is already connected to another account.`,\n\t\t\t\t},\n\t\t\t\t{ headers: destroyRedirectTo },\n\t\t\t)\n\t\t}\n\t}\n\n\t// If we're already logged in, then link the account\n\tif (userId) {\n\t\tawait prisma.connection.create({\n\t\t\tdata: {\n\t\t\t\tproviderName,\n\t\t\t\tproviderId: profile.id,\n\t\t\t\tuserId,\n\t\t\t},\n\t\t})\n\t\treturn redirectWithToast(\n\t\t\t'/settings/profile/connections',\n\t\t\t{\n\t\t\t\ttitle: 'Connected',\n\t\t\t\ttype: 'success',\n\t\t\t\tdescription: `Your \"${profile.username}\" ${label} account has been connected.`,\n\t\t\t},\n\t\t\t{ headers: destroyRedirectTo },\n\t\t)\n\t}\n\n\t// Connection exists already? Make a new session\n\tif (existingConnection) {\n\t\treturn makeSession({ request, userId: existingConnection.userId })\n\t}\n\n\t// if the email matches a user in the db, then link the account and\n\t// make a new session\n\tconst user = await prisma.user.findUnique({\n\t\tselect: { id: true },\n\t\twhere: { email: profile.email.toLowerCase() },\n\t})\n\tif (user) {\n\t\tawait prisma.connection.create({\n\t\t\tdata: {\n\t\t\t\tproviderName,\n\t\t\t\tproviderId: profile.id,\n\t\t\t\tuserId: user.id,\n\t\t\t},\n\t\t})\n\t\treturn makeSession(\n\t\t\t{ request, userId: user.id },\n\t\t\t{\n\t\t\t\theaders: await createToastHeaders({\n\t\t\t\t\ttitle: 'Connected',\n\t\t\t\t\tdescription: `Your \"${profile.username}\" ${label} account has been connected.`,\n\t\t\t\t}),\n\t\t\t},\n\t\t)\n\t}\n\n\t// this is a new user, so let's get them onboarded\n\tconst verifySession = await verifySessionStorage.getSession()\n\tverifySession.set(onboardingEmailSessionKey, profile.email)\n\tverifySession.set(prefilledProfileKey, {\n\t\t...profile,\n\t\temail: profile.email.toLowerCase(),\n\t\tusername: profile.username?.replace(/[^a-zA-Z0-9_]/g, '_').toLowerCase(),\n\t})\n\tverifySession.set(providerIdKey, profile.id)\n\tconst onboardingRedirect = [\n\t\t`/onboarding/${providerName}`,\n\t\tredirectTo ? new URLSearchParams({ redirectTo }) : null,\n\t]\n\t\t.filter(Boolean)\n\t\t.join('?')\n\treturn redirect(onboardingRedirect, {\n\t\theaders: combineHeaders(\n\t\t\t{ 'set-cookie': await verifySessionStorage.commitSession(verifySession) },\n\t\t\tdestroyRedirectTo,\n\t\t),\n\t})\n}\n\nasync function makeSession(\n\t{\n\t\trequest,\n\t\tuserId,\n\t\tredirectTo,\n\t}: { request: Request; userId: string; redirectTo?: string | null },\n\tresponseInit?: ResponseInit,\n) {\n\tredirectTo ??= '/'\n\tconst session = await prisma.session.create({\n\t\tselect: { id: true, expirationDate: true, userId: true },\n\t\tdata: {\n\t\t\texpirationDate: getSessionExpirationDate(),\n\t\t\tuserId,\n\t\t},\n\t})\n\treturn handleNewSession(\n\t\t{ request, session, redirectTo, remember: true },\n\t\t{ headers: combineHeaders(responseInit?.headers, destroyRedirectTo) },\n\t)\n}\n", "import { createCookieSessionStorage } from '@remix-run/node'\n\nexport const verifySessionStorage = createCookieSessionStorage({\n\tcookie: {\n\t\tname: 'en_verification',\n\t\tsameSite: 'lax',\n\t\tpath: '/',\n\t\thttpOnly: true,\n\t\tmaxAge: 60 * 10, // 10 minutes\n\t\tsecrets: process.env.SESSION_SECRET.split(','),\n\t\tsecure: process.env.NODE_ENV === 'production',\n\t},\n})\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport {\n\tjson,\n\tredirect,\n\ttype DataFunctionArgs,\n\ttype MetaFunction,\n} from '@remix-run/node'\nimport { Form, Link, useActionData, useSearchParams } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { HoneypotInputs } from 'remix-utils/honeypot/react'\nimport { safeRedirect } from 'remix-utils/safe-redirect'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { CheckboxField, ErrorList, Field } from '#app/components/forms.tsx'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { twoFAVerificationType } from '#app/routes/settings+/profile.two-factor.tsx'\nimport {\n\tgetUserId,\n\tlogin,\n\trequireAnonymous,\n\tsessionKey,\n} from '#app/utils/auth.server.ts'\nimport {\n\tProviderConnectionForm,\n\tproviderNames,\n} from '#app/utils/connections.tsx'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { checkHoneypot } from '#app/utils/honeypot.server.ts'\nimport {\n\tcombineResponseInits,\n\tinvariant,\n\tuseIsPending,\n} from '#app/utils/misc.tsx'\nimport { authSessionStorage } from '#app/utils/session.server.ts'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { PasswordSchema, UsernameSchema } from '#app/utils/user-validation.ts'\nimport { verifySessionStorage } from '#app/utils/verification.server.ts'\nimport { getRedirectToUrl, type VerifyFunctionArgs } from './verify.tsx'\n\nconst verifiedTimeKey = 'verified-time'\nconst unverifiedSessionIdKey = 'unverified-session-id'\nconst rememberKey = 'remember'\n\nexport async function handleNewSession(\n\t{\n\t\trequest,\n\t\tsession,\n\t\tredirectTo,\n\t\tremember,\n\t}: {\n\t\trequest: Request\n\t\tsession: { userId: string; id: string; expirationDate: Date }\n\t\tredirectTo?: string\n\t\tremember: boolean\n\t},\n\tresponseInit?: ResponseInit,\n) {\n\tconst verification = await prisma.verification.findUnique({\n\t\tselect: { id: true },\n\t\twhere: {\n\t\t\ttarget_type: { target: session.userId, type: twoFAVerificationType },\n\t\t},\n\t})\n\tconst userHasTwoFactor = Boolean(verification)\n\n\tif (userHasTwoFactor) {\n\t\tconst verifySession = await verifySessionStorage.getSession()\n\t\tverifySession.set(unverifiedSessionIdKey, session.id)\n\t\tverifySession.set(rememberKey, remember)\n\t\tconst redirectUrl = getRedirectToUrl({\n\t\t\trequest,\n\t\t\ttype: twoFAVerificationType,\n\t\t\ttarget: session.userId,\n\t\t\tredirectTo,\n\t\t})\n\t\treturn redirect(\n\t\t\t`${redirectUrl.pathname}?${redirectUrl.searchParams}`,\n\t\t\tcombineResponseInits(\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'set-cookie':\n\t\t\t\t\t\t\tawait verifySessionStorage.commitSession(verifySession),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tresponseInit,\n\t\t\t),\n\t\t)\n\t} else {\n\t\tconst authSession = await authSessionStorage.getSession(\n\t\t\trequest.headers.get('cookie'),\n\t\t)\n\t\tauthSession.set(sessionKey, session.id)\n\n\t\treturn redirect(\n\t\t\tsafeRedirect(redirectTo),\n\t\t\tcombineResponseInits(\n\t\t\t\t{\n\t\t\t\t\theaders: {\n\t\t\t\t\t\t'set-cookie': await authSessionStorage.commitSession(authSession, {\n\t\t\t\t\t\t\texpires: remember ? session.expirationDate : undefined,\n\t\t\t\t\t\t}),\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\tresponseInit,\n\t\t\t),\n\t\t)\n\t}\n}\n\nexport async function handleVerification({\n\trequest,\n\tsubmission,\n}: VerifyFunctionArgs) {\n\tinvariant(submission.value, 'Submission should have a value by this point')\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\n\tconst remember = verifySession.get(rememberKey)\n\tconst { redirectTo } = submission.value\n\tconst headers = new Headers()\n\tauthSession.set(verifiedTimeKey, Date.now())\n\n\tconst unverifiedSessionId = verifySession.get(unverifiedSessionIdKey)\n\tif (unverifiedSessionId) {\n\t\tconst session = await prisma.session.findUnique({\n\t\t\tselect: { expirationDate: true },\n\t\t\twhere: { id: unverifiedSessionId },\n\t\t})\n\t\tif (!session) {\n\t\t\tthrow await redirectWithToast('/login', {\n\t\t\t\ttype: 'error',\n\t\t\t\ttitle: 'Invalid session',\n\t\t\t\tdescription: 'Could not find session to verify. Please try again.',\n\t\t\t})\n\t\t}\n\t\tauthSession.set(sessionKey, unverifiedSessionId)\n\n\t\theaders.append(\n\t\t\t'set-cookie',\n\t\t\tawait authSessionStorage.commitSession(authSession, {\n\t\t\t\texpires: remember ? session.expirationDate : undefined,\n\t\t\t}),\n\t\t)\n\t} else {\n\t\theaders.append(\n\t\t\t'set-cookie',\n\t\t\tawait authSessionStorage.commitSession(authSession),\n\t\t)\n\t}\n\n\theaders.append(\n\t\t'set-cookie',\n\t\tawait verifySessionStorage.destroySession(verifySession),\n\t)\n\n\treturn redirect(safeRedirect(redirectTo), { headers })\n}\n\nexport async function shouldRequestTwoFA(request: Request) {\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tif (verifySession.has(unverifiedSessionIdKey)) return true\n\tconst userId = await getUserId(request)\n\tif (!userId) return false\n\t// if it's over two hours since they last verified, we should request 2FA again\n\tconst userHasTwoFA = await prisma.verification.findUnique({\n\t\tselect: { id: true },\n\t\twhere: { target_type: { target: userId, type: twoFAVerificationType } },\n\t})\n\tif (!userHasTwoFA) return false\n\tconst verifiedTime = authSession.get(verifiedTimeKey) ?? new Date(0)\n\tconst twoHours = 1000 * 60 * 2\n\treturn Date.now() - verifiedTime > twoHours\n}\n\nconst LoginFormSchema = z.object({\n\tusername: UsernameSchema,\n\tpassword: PasswordSchema,\n\tredirectTo: z.string().optional(),\n\tremember: z.boolean().optional(),\n})\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tawait requireAnonymous(request)\n\treturn json({})\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tawait requireAnonymous(request)\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\tcheckHoneypot(formData)\n\tconst submission = await parse(formData, {\n\t\tschema: intent =>\n\t\t\tLoginFormSchema.transform(async (data, ctx) => {\n\t\t\t\tif (intent !== 'submit') return { ...data, session: null }\n\n\t\t\t\tconst session = await login(data)\n\t\t\t\tif (!session) {\n\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\tmessage: 'Invalid username or password',\n\t\t\t\t\t})\n\t\t\t\t\treturn z.NEVER\n\t\t\t\t}\n\n\t\t\t\treturn { ...data, session }\n\t\t\t}),\n\t\tasync: true,\n\t})\n\t// get the password off the payload that's sent back\n\tdelete submission.payload.password\n\n\tif (submission.intent !== 'submit') {\n\t\t// @ts-expect-error - conform should probably have support for doing this\n\t\tdelete submission.value?.password\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value?.session) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst { session, remember, redirectTo } = submission.value\n\n\treturn handleNewSession({\n\t\trequest,\n\t\tsession,\n\t\tremember: remember ?? false,\n\t\tredirectTo,\n\t})\n}\n\nexport default function LoginPage() {\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\tconst [searchParams] = useSearchParams()\n\tconst redirectTo = searchParams.get('redirectTo')\n\n\tconst [form, fields] = useForm({\n\t\tid: 'login-form',\n\t\tconstraint: getFieldsetConstraint(LoginFormSchema),\n\t\tdefaultValue: { redirectTo },\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: LoginFormSchema })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<div className=\"flex min-h-full flex-col justify-center pb-32 pt-20\">\n\t\t\t<div className=\"mx-auto w-full max-w-md\">\n\t\t\t\t<div className=\"flex flex-col gap-3 text-center\">\n\t\t\t\t\t<h1 className=\"text-h1\">Welcome back!</h1>\n\t\t\t\t\t<p className=\"text-body-md text-muted-foreground\">\n\t\t\t\t\t\tPlease enter your details.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<Spacer size=\"xs\" />\n\n\t\t\t\t<div>\n\t\t\t\t\t<div className=\"mx-auto w-full max-w-md px-8\">\n\t\t\t\t\t\t<Form method=\"POST\" {...form.props}>\n\t\t\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t\t\t<HoneypotInputs />\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tlabelProps={{ children: 'Username' }}\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\t...conform.input(fields.username),\n\t\t\t\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\t\t\t\tclassName: 'lowercase',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\terrors={fields.username.errors}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tlabelProps={{ children: 'Password' }}\n\t\t\t\t\t\t\t\tinputProps={conform.input(fields.password, {\n\t\t\t\t\t\t\t\t\ttype: 'password',\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\terrors={fields.password.errors}\n\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t<div className=\"flex justify-between\">\n\t\t\t\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\t\t\t\thtmlFor: fields.remember.id,\n\t\t\t\t\t\t\t\t\t\tchildren: 'Remember me',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tbuttonProps={conform.input(fields.remember, {\n\t\t\t\t\t\t\t\t\t\ttype: 'checkbox',\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t\terrors={fields.remember.errors}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto=\"/forgot-password\"\n\t\t\t\t\t\t\t\t\t\tclassName=\"text-body-xs font-semibold\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tForgot password?\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t{...conform.input(fields.redirectTo, { type: 'hidden' })}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\n\t\t\t\t\t\t\t<div className=\"flex items-center justify-between gap-6 pt-3\">\n\t\t\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tLog in\n\t\t\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t\t<ul className=\"mt-5 flex flex-col gap-5 border-b-2 border-t-2 border-border py-3\">\n\t\t\t\t\t\t\t{providerNames.map(providerName => (\n\t\t\t\t\t\t\t\t<li key={providerName}>\n\t\t\t\t\t\t\t\t\t<ProviderConnectionForm\n\t\t\t\t\t\t\t\t\t\ttype=\"Login\"\n\t\t\t\t\t\t\t\t\t\tproviderName={providerName}\n\t\t\t\t\t\t\t\t\t\tredirectTo={redirectTo}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t<div className=\"flex items-center justify-center gap-2 pt-6\">\n\t\t\t\t\t\t\t<span className=\"text-muted-foreground\">New here?</span>\n\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\tto={\n\t\t\t\t\t\t\t\t\tredirectTo\n\t\t\t\t\t\t\t\t\t\t? `/signup?${encodeURIComponent(redirectTo)}`\n\t\t\t\t\t\t\t\t\t\t: '/signup'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCreate an account\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport const meta: MetaFunction = () => {\n\treturn [{ title: 'Login to Epic Notes' }]\n}\n\nexport function ErrorBoundary() {\n\treturn <GeneralErrorBoundary />\n}\n", "export function Spacer({\n\tsize,\n}: {\n\t/**\n\t * The size of the space\n\t *\n\t * 4xs: h-4 (16px)\n\t *\n\t * 3xs: h-8 (32px)\n\t *\n\t * 2xs: h-12 (48px)\n\t *\n\t * xs: h-16 (64px)\n\t *\n\t * sm: h-20 (80px)\n\t *\n\t * md: h-24 (96px)\n\t *\n\t * lg: h-28 (112px)\n\t *\n\t * xl: h-32 (128px)\n\t *\n\t * 2xl: h-36 (144px)\n\t *\n\t * 3xl: h-40 (160px)\n\t *\n\t * 4xl: h-44 (176px)\n\t */\n\tsize:\n\t\t| '4xs'\n\t\t| '3xs'\n\t\t| '2xs'\n\t\t| 'xs'\n\t\t| 'sm'\n\t\t| 'md'\n\t\t| 'lg'\n\t\t| 'xl'\n\t\t| '2xl'\n\t\t| '3xl'\n\t\t| '4xl'\n}) {\n\tconst options: Record<typeof size, string> = {\n\t\t'4xs': 'h-4',\n\t\t'3xs': 'h-8',\n\t\t'2xs': 'h-12',\n\t\txs: 'h-16',\n\t\tsm: 'h-20',\n\t\tmd: 'h-24',\n\t\tlg: 'h-28',\n\t\txl: 'h-32',\n\t\t'2xl': 'h-36',\n\t\t'3xl': 'h-40',\n\t\t'4xl': 'h-44',\n\t}\n\tconst className = options[size]\n\treturn <div className={className} />\n}\n", "import { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { Outlet } from '@remix-run/react'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { type VerificationTypes } from '#app/routes/_auth+/verify.tsx'\nimport { type BreadcrumbHandle } from './profile.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"lock-closed\">2FA</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nexport const twoFAVerificationType = '2fa' satisfies VerificationTypes\n\nexport default function TwoFactorRoute() {\n\treturn <Outlet />\n}\n", "import { z } from 'zod'\n\nexport const UsernameSchema = z\n\t.string({ required_error: 'Username is required' })\n\t.min(3, { message: 'Username is too short' })\n\t.max(20, { message: 'Username is too long' })\n\t.regex(/^[a-zA-Z0-9_]+$/, {\n\t\tmessage: 'Username can only include letters, numbers, and underscores',\n\t})\n\t// users can type the username in any case, but we store it in lowercase\n\t.transform(value => value.toLowerCase())\n\nexport const PasswordSchema = z\n\t.string({ required_error: 'Password is required' })\n\t.min(6, { message: 'Password is too short' })\n\t.max(100, { message: 'Password is too long' })\nexport const NameSchema = z\n\t.string({ required_error: 'Name is required' })\n\t.min(3, { message: 'Name is too short' })\n\t.max(40, { message: 'Name is too long' })\nexport const EmailSchema = z\n\t.string({ required_error: 'Email is required' })\n\t.email({ message: 'Email is invalid' })\n\t.min(3, { message: 'Email is too short' })\n\t.max(100, { message: 'Email is too long' })\n\t// users can type the email in any case, but we store it in lowercase\n\t.transform(value => value.toLowerCase())\n\nexport const PasswordAndConfirmPasswordSchema = z\n\t.object({ password: PasswordSchema, confirmPassword: PasswordSchema })\n\t.superRefine(({ confirmPassword, password }, ctx) => {\n\t\tif (confirmPassword !== password) {\n\t\t\tctx.addIssue({\n\t\t\t\tpath: ['confirmPassword'],\n\t\t\t\tcode: 'custom',\n\t\t\t\tmessage: 'The passwords must match',\n\t\t\t})\n\t\t}\n\t})\n", "import { conform, useForm, type Submission } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { json, type DataFunctionArgs } from '@remix-run/node'\nimport { Form, useActionData, useSearchParams } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { HoneypotInputs } from 'remix-utils/honeypot/react'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { handleVerification as handleChangeEmailVerification } from '#app/routes/settings+/profile.change-email.tsx'\nimport { twoFAVerificationType } from '#app/routes/settings+/profile.two-factor.tsx'\nimport { type twoFAVerifyVerificationType } from '#app/routes/settings+/profile.two-factor.verify.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { checkHoneypot } from '#app/utils/honeypot.server.ts'\nimport { ensurePrimary } from '#app/utils/litefs.server.ts'\nimport { getDomainUrl, useIsPending } from '#app/utils/misc.tsx'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { generateTOTP, verifyTOTP } from '#app/utils/totp.server.ts'\nimport {\n\thandleVerification as handleLoginTwoFactorVerification,\n\tshouldRequestTwoFA,\n} from './login.tsx'\nimport { handleVerification as handleOnboardingVerification } from './onboarding.tsx'\nimport { handleVerification as handleResetPasswordVerification } from './reset-password.tsx'\n\nexport const codeQueryParam = 'code'\nexport const targetQueryParam = 'target'\nexport const typeQueryParam = 'type'\nexport const redirectToQueryParam = 'redirectTo'\nconst types = ['onboarding', 'reset-password', 'change-email', '2fa'] as const\nconst VerificationTypeSchema = z.enum(types)\nexport type VerificationTypes = z.infer<typeof VerificationTypeSchema>\n\nconst VerifySchema = z.object({\n\t[codeQueryParam]: z.string().min(6).max(6),\n\t[typeQueryParam]: VerificationTypeSchema,\n\t[targetQueryParam]: z.string(),\n\t[redirectToQueryParam]: z.string().optional(),\n})\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst formData = await request.formData()\n\tcheckHoneypot(formData)\n\tawait validateCSRF(formData, request.headers)\n\treturn validateRequest(request, formData)\n}\n\nexport function getRedirectToUrl({\n\trequest,\n\ttype,\n\ttarget,\n\tredirectTo,\n}: {\n\trequest: Request\n\ttype: VerificationTypes\n\ttarget: string\n\tredirectTo?: string\n}) {\n\tconst redirectToUrl = new URL(`${getDomainUrl(request)}/verify`)\n\tredirectToUrl.searchParams.set(typeQueryParam, type)\n\tredirectToUrl.searchParams.set(targetQueryParam, target)\n\tif (redirectTo) {\n\t\tredirectToUrl.searchParams.set(redirectToQueryParam, redirectTo)\n\t}\n\treturn redirectToUrl\n}\n\nexport async function requireRecentVerification(request: Request) {\n\tconst userId = await requireUserId(request)\n\tconst shouldReverify = await shouldRequestTwoFA(request)\n\tif (shouldReverify) {\n\t\tconst reqUrl = new URL(request.url)\n\t\tconst redirectUrl = getRedirectToUrl({\n\t\t\trequest,\n\t\t\ttarget: userId,\n\t\t\ttype: twoFAVerificationType,\n\t\t\tredirectTo: reqUrl.pathname + reqUrl.search,\n\t\t})\n\t\tthrow await redirectWithToast(redirectUrl.toString(), {\n\t\t\ttitle: 'Please Reverify',\n\t\t\tdescription: 'Please reverify your account before proceeding',\n\t\t})\n\t}\n}\n\nexport async function prepareVerification({\n\tperiod,\n\trequest,\n\ttype,\n\ttarget,\n}: {\n\tperiod: number\n\trequest: Request\n\ttype: VerificationTypes\n\ttarget: string\n}) {\n\tconst verifyUrl = getRedirectToUrl({ request, type, target })\n\tconst redirectTo = new URL(verifyUrl.toString())\n\n\tconst { otp, ...verificationConfig } = generateTOTP({\n\t\talgorithm: 'SHA256',\n\t\t// Leaving off 0 and O on purpose to avoid confusing users.\n\t\tcharSet: 'ABCDEFGHIJKLMNPQRSTUVWXYZ123456789',\n\t\tperiod,\n\t})\n\tconst verificationData = {\n\t\ttype,\n\t\ttarget,\n\t\t...verificationConfig,\n\t\texpiresAt: new Date(Date.now() + verificationConfig.period * 1000),\n\t}\n\tawait prisma.verification.upsert({\n\t\twhere: { target_type: { target, type } },\n\t\tcreate: verificationData,\n\t\tupdate: verificationData,\n\t})\n\n\t// add the otp to the url we'll email the user.\n\tverifyUrl.searchParams.set(codeQueryParam, otp)\n\n\treturn { otp, redirectTo, verifyUrl }\n}\n\nexport type VerifyFunctionArgs = {\n\trequest: Request\n\tsubmission: Submission<z.infer<typeof VerifySchema>>\n\tbody: FormData | URLSearchParams\n}\n\nexport async function isCodeValid({\n\tcode,\n\ttype,\n\ttarget,\n}: {\n\tcode: string\n\ttype: VerificationTypes | typeof twoFAVerifyVerificationType\n\ttarget: string\n}) {\n\tconst verification = await prisma.verification.findUnique({\n\t\twhere: {\n\t\t\ttarget_type: { target, type },\n\t\t\tOR: [{ expiresAt: { gt: new Date() } }, { expiresAt: null }],\n\t\t},\n\t\tselect: { algorithm: true, secret: true, period: true, charSet: true },\n\t})\n\tif (!verification) return false\n\tconst result = verifyTOTP({\n\t\totp: code,\n\t\t...verification,\n\t})\n\tif (!result) return false\n\n\treturn true\n}\n\nasync function validateRequest(\n\trequest: Request,\n\tbody: URLSearchParams | FormData,\n) {\n\tconst submission = await parse(body, {\n\t\tschema: VerifySchema.superRefine(async (data, ctx) => {\n\t\t\tconst codeIsValid = await isCodeValid({\n\t\t\t\tcode: data[codeQueryParam],\n\t\t\t\ttype: data[typeQueryParam],\n\t\t\t\ttarget: data[targetQueryParam],\n\t\t\t})\n\t\t\tif (!codeIsValid) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tpath: ['code'],\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: `Invalid code`,\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t}),\n\t\tasync: true,\n\t})\n\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\t// this code path could be part of a loader (GET request), so we need to make\n\t// sure we're running on primary because we're about to make writes.\n\tawait ensurePrimary()\n\n\tconst { value: submissionValue } = submission\n\n\tasync function deleteVerification() {\n\t\tawait prisma.verification.delete({\n\t\t\twhere: {\n\t\t\t\ttarget_type: {\n\t\t\t\t\ttype: submissionValue[typeQueryParam],\n\t\t\t\t\ttarget: submissionValue[targetQueryParam],\n\t\t\t\t},\n\t\t\t},\n\t\t})\n\t}\n\n\tswitch (submissionValue[typeQueryParam]) {\n\t\tcase 'reset-password': {\n\t\t\tawait deleteVerification()\n\t\t\treturn handleResetPasswordVerification({ request, body, submission })\n\t\t}\n\t\tcase 'onboarding': {\n\t\t\tawait deleteVerification()\n\t\t\treturn handleOnboardingVerification({ request, body, submission })\n\t\t}\n\t\tcase 'change-email': {\n\t\t\tawait deleteVerification()\n\t\t\treturn handleChangeEmailVerification({ request, body, submission })\n\t\t}\n\t\tcase '2fa': {\n\t\t\treturn handleLoginTwoFactorVerification({ request, body, submission })\n\t\t}\n\t}\n}\n\nexport default function VerifyRoute() {\n\tconst [searchParams] = useSearchParams()\n\tconst isPending = useIsPending()\n\tconst actionData = useActionData<typeof action>()\n\tconst parsedType = VerificationTypeSchema.safeParse(\n\t\tsearchParams.get(typeQueryParam),\n\t)\n\tconst type = parsedType.success ? parsedType.data : null\n\n\tconst checkEmail = (\n\t\t<>\n\t\t\t<h1 className=\"text-h1\">Check your email</h1>\n\t\t\t<p className=\"mt-3 text-body-md text-muted-foreground\">\n\t\t\t\tWe've sent you a code to verify your email address.\n\t\t\t</p>\n\t\t</>\n\t)\n\n\tconst headings: Record<VerificationTypes, React.ReactNode> = {\n\t\tonboarding: checkEmail,\n\t\t'reset-password': checkEmail,\n\t\t'change-email': checkEmail,\n\t\t'2fa': (\n\t\t\t<>\n\t\t\t\t<h1 className=\"text-h1\">Check your 2FA app</h1>\n\t\t\t\t<p className=\"mt-3 text-body-md text-muted-foreground\">\n\t\t\t\t\tPlease enter your 2FA code to verify your identity.\n\t\t\t\t</p>\n\t\t\t</>\n\t\t),\n\t}\n\n\tconst [form, fields] = useForm({\n\t\tid: 'verify-form',\n\t\tconstraint: getFieldsetConstraint(VerifySchema),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: VerifySchema })\n\t\t},\n\t\tdefaultValue: {\n\t\t\tcode: searchParams.get(codeQueryParam) ?? '',\n\t\t\ttype,\n\t\t\ttarget: searchParams.get(targetQueryParam) ?? '',\n\t\t\tredirectTo: searchParams.get(redirectToQueryParam) ?? '',\n\t\t},\n\t})\n\n\treturn (\n\t\t<main className=\"container flex flex-col justify-center pb-32 pt-20\">\n\t\t\t<div className=\"text-center\">\n\t\t\t\t{type ? headings[type] : 'Invalid Verification Type'}\n\t\t\t</div>\n\n\t\t\t<Spacer size=\"xs\" />\n\n\t\t\t<div className=\"mx-auto flex w-72 max-w-full flex-col justify-center gap-1\">\n\t\t\t\t<div>\n\t\t\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex w-full gap-2\">\n\t\t\t\t\t<Form method=\"POST\" {...form.props} className=\"flex-1\">\n\t\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t\t<HoneypotInputs />\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\t\thtmlFor: fields[codeQueryParam].id,\n\t\t\t\t\t\t\t\tchildren: 'Code',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tinputProps={conform.input(fields[codeQueryParam])}\n\t\t\t\t\t\t\terrors={fields[codeQueryParam].errors}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...conform.input(fields[typeQueryParam], { type: 'hidden' })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...conform.input(fields[targetQueryParam], { type: 'hidden' })}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t{...conform.input(fields[redirectToQueryParam], {\n\t\t\t\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn <GeneralErrorBoundary />\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport * as E from '@react-email/components'\nimport { json, redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { Form, useActionData, useLoaderData } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { z } from 'zod'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport {\n\tprepareVerification,\n\trequireRecentVerification,\n\ttype VerifyFunctionArgs,\n} from '#app/routes/_auth+/verify.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { sendEmail } from '#app/utils/email.server.ts'\nimport { invariant, useIsPending } from '#app/utils/misc.tsx'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { EmailSchema } from '#app/utils/user-validation.ts'\nimport { verifySessionStorage } from '#app/utils/verification.server.ts'\nimport { type BreadcrumbHandle } from './profile.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"envelope-closed\">Change Email</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nconst newEmailAddressSessionKey = 'new-email-address'\n\nexport async function handleVerification({\n\trequest,\n\tsubmission,\n}: VerifyFunctionArgs) {\n\tawait requireRecentVerification(request)\n\tinvariant(submission.value, 'submission.value should be defined by now')\n\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst newEmail = verifySession.get(newEmailAddressSessionKey)\n\tif (!newEmail) {\n\t\tsubmission.error[''] = [\n\t\t\t'You must submit the code on the same device that requested the email change.',\n\t\t]\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\tconst preUpdateUser = await prisma.user.findFirstOrThrow({\n\t\tselect: { email: true },\n\t\twhere: { id: submission.value.target },\n\t})\n\tconst user = await prisma.user.update({\n\t\twhere: { id: submission.value.target },\n\t\tselect: { id: true, email: true, username: true },\n\t\tdata: { email: newEmail },\n\t})\n\n\tvoid sendEmail({\n\t\tto: preUpdateUser.email,\n\t\tsubject: 'Epic Stack email changed',\n\t\treact: <EmailChangeNoticeEmail userId={user.id} />,\n\t})\n\n\treturn redirectWithToast(\n\t\t'/settings/profile',\n\t\t{\n\t\t\ttitle: 'Email Changed',\n\t\t\ttype: 'success',\n\t\t\tdescription: `Your email has been changed to ${user.email}`,\n\t\t},\n\t\t{\n\t\t\theaders: {\n\t\t\t\t'set-cookie': await verifySessionStorage.destroySession(verifySession),\n\t\t\t},\n\t\t},\n\t)\n}\n\nconst ChangeEmailSchema = z.object({\n\temail: EmailSchema,\n})\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tawait requireRecentVerification(request)\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUnique({\n\t\twhere: { id: userId },\n\t\tselect: { email: true },\n\t})\n\tif (!user) {\n\t\tconst params = new URLSearchParams({ redirectTo: request.url })\n\t\tthrow redirect(`/login?${params}`)\n\t}\n\treturn json({ user })\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\tconst submission = await parse(formData, {\n\t\tschema: ChangeEmailSchema.superRefine(async (data, ctx) => {\n\t\t\tconst existingUser = await prisma.user.findUnique({\n\t\t\t\twhere: { email: data.email },\n\t\t\t})\n\t\t\tif (existingUser) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tpath: ['email'],\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: 'This email is already in use.',\n\t\t\t\t})\n\t\t\t}\n\t\t}),\n\t\tasync: true,\n\t})\n\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\tconst { otp, redirectTo, verifyUrl } = await prepareVerification({\n\t\tperiod: 10 * 60,\n\t\trequest,\n\t\ttarget: userId,\n\t\ttype: 'change-email',\n\t})\n\n\tconst response = await sendEmail({\n\t\tto: submission.value.email,\n\t\tsubject: `Epic Notes Email Change Verification`,\n\t\treact: <EmailChangeEmail verifyUrl={verifyUrl.toString()} otp={otp} />,\n\t})\n\n\tif (response.status === 'success') {\n\t\tconst verifySession = await verifySessionStorage.getSession()\n\t\tverifySession.set(newEmailAddressSessionKey, submission.value.email)\n\t\treturn redirect(redirectTo.toString(), {\n\t\t\theaders: {\n\t\t\t\t'set-cookie': await verifySessionStorage.commitSession(verifySession),\n\t\t\t},\n\t\t})\n\t} else {\n\t\tsubmission.error[''] = [response.error.message]\n\t\treturn json({ status: 'error', submission } as const, { status: 500 })\n\t}\n}\n\nexport function EmailChangeEmail({\n\tverifyUrl,\n\totp,\n}: {\n\tverifyUrl: string\n\totp: string\n}) {\n\treturn (\n\t\t<E.Html lang=\"en\" dir=\"ltr\">\n\t\t\t<E.Container>\n\t\t\t\t<h1>\n\t\t\t\t\t<E.Text>Epic Notes Email Change</E.Text>\n\t\t\t\t</h1>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>\n\t\t\t\t\t\tHere's your verification code: <strong>{otp}</strong>\n\t\t\t\t\t</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>Or click the link:</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<E.Link href={verifyUrl}>{verifyUrl}</E.Link>\n\t\t\t</E.Container>\n\t\t</E.Html>\n\t)\n}\n\nexport function EmailChangeNoticeEmail({ userId }: { userId: string }) {\n\treturn (\n\t\t<E.Html lang=\"en\" dir=\"ltr\">\n\t\t\t<E.Container>\n\t\t\t\t<h1>\n\t\t\t\t\t<E.Text>Your Epic Notes email has been changed</E.Text>\n\t\t\t\t</h1>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>\n\t\t\t\t\t\tWe're writing to let you know that your Epic Notes email has been\n\t\t\t\t\t\tchanged.\n\t\t\t\t\t</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>\n\t\t\t\t\t\tIf you changed your email address, then you can safely ignore this.\n\t\t\t\t\t\tBut if you did not change your email address, then please contact\n\t\t\t\t\t\tsupport immediately.\n\t\t\t\t\t</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>Your Account ID: {userId}</E.Text>\n\t\t\t\t</p>\n\t\t\t</E.Container>\n\t\t</E.Html>\n\t)\n}\n\nexport default function ChangeEmailIndex() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst actionData = useActionData<typeof action>()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'change-email-form',\n\t\tconstraint: getFieldsetConstraint(ChangeEmailSchema),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: ChangeEmailSchema })\n\t\t},\n\t})\n\n\tconst isPending = useIsPending()\n\treturn (\n\t\t<div>\n\t\t\t<h1 className=\"text-h1\">Change Email</h1>\n\t\t\t<p>You will receive an email at the new email address to confirm.</p>\n\t\t\t<p>\n\t\t\t\tAn email notice will also be sent to your old address {data.user.email}.\n\t\t\t</p>\n\t\t\t<div className=\"mx-auto mt-5 max-w-sm\">\n\t\t\t\t<Form method=\"POST\" {...form.props}>\n\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{ children: 'New Email' }}\n\t\t\t\t\t\tinputProps={conform.input(fields.email)}\n\t\t\t\t\t\terrors={fields.email.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<ErrorList id={form.errorId} errors={form.errors} />\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSend Confirmation\n\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t</div>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n", "import { renderAsync } from '@react-email/components'\nimport { type ReactElement } from 'react'\nimport { z } from 'zod'\n\nconst resendErrorSchema = z.union([\n\tz.object({\n\t\tname: z.string(),\n\t\tmessage: z.string(),\n\t\tstatusCode: z.number(),\n\t}),\n\tz.object({\n\t\tname: z.literal('UnknownError'),\n\t\tmessage: z.literal('Unknown Error'),\n\t\tstatusCode: z.literal(500),\n\t\tcause: z.any(),\n\t}),\n])\ntype ResendError = z.infer<typeof resendErrorSchema>\n\nconst resendSuccessSchema = z.object({\n\tid: z.string(),\n})\n\nexport async function sendEmail({\n\treact,\n\t...options\n}: {\n\tto: string\n\tsubject: string\n} & (\n\t| { html: string; text: string; react?: never }\n\t| { react: ReactElement; html?: never; text?: never }\n)) {\n\tconst from = 'hello@epicstack.dev'\n\n\tconst email = {\n\t\tfrom,\n\t\t...options,\n\t\t...(react ? await renderReactEmail(react) : null),\n\t}\n\n\t// feel free to remove this condition once you've set up resend\n\tif (!process.env.RESEND_API_KEY && !process.env.MOCKS) {\n\t\tconsole.error(`RESEND_API_KEY not set and we're not in mocks mode.`)\n\t\tconsole.error(\n\t\t\t`To send emails, set the RESEND_API_KEY environment variable.`,\n\t\t)\n\t\tconsole.error(`Would have sent the following email:`, JSON.stringify(email))\n\t\treturn {\n\t\t\tstatus: 'success',\n\t\t\tdata: { id: 'mocked' },\n\t\t} as const\n\t}\n\n\tconst response = await fetch('https://api.resend.com/emails', {\n\t\tmethod: 'POST',\n\t\tbody: JSON.stringify(email),\n\t\theaders: {\n\t\t\tAuthorization: `Bearer ${process.env.RESEND_API_KEY}`,\n\t\t\t'Content-Type': 'application/json',\n\t\t},\n\t})\n\tconst data = await response.json()\n\tconst parsedData = resendSuccessSchema.safeParse(data)\n\n\tif (response.ok && parsedData.success) {\n\t\treturn {\n\t\t\tstatus: 'success',\n\t\t\tdata: parsedData,\n\t\t} as const\n\t} else {\n\t\tconst parseResult = resendErrorSchema.safeParse(data)\n\t\tif (parseResult.success) {\n\t\t\treturn {\n\t\t\t\tstatus: 'error',\n\t\t\t\terror: parseResult.data,\n\t\t\t} as const\n\t\t} else {\n\t\t\treturn {\n\t\t\t\tstatus: 'error',\n\t\t\t\terror: {\n\t\t\t\t\tname: 'UnknownError',\n\t\t\t\t\tmessage: 'Unknown Error',\n\t\t\t\t\tstatusCode: 500,\n\t\t\t\t\tcause: data,\n\t\t\t\t} satisfies ResendError,\n\t\t\t} as const\n\t\t}\n\t}\n}\n\nasync function renderReactEmail(react: ReactElement) {\n\tconst [html, text] = await Promise.all([\n\t\trenderAsync(react),\n\t\trenderAsync(react, { plainText: true }),\n\t])\n\treturn { html, text }\n}\n", "// @epic-web/totp should be used server-side only. It imports `Crypto` which results in Remix\n// including a big polyfill. So we put the import in a `.server.ts` file to avoid that\nexport * from '@epic-web/totp'\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport {\n\tjson,\n\tredirect,\n\ttype DataFunctionArgs,\n\ttype MetaFunction,\n} from '@remix-run/node'\nimport {\n\tForm,\n\tuseActionData,\n\tuseLoaderData,\n\tuseSearchParams,\n} from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { HoneypotInputs } from 'remix-utils/honeypot/react'\nimport { safeRedirect } from 'remix-utils/safe-redirect'\nimport { z } from 'zod'\nimport { CheckboxField, ErrorList, Field } from '#app/components/forms.tsx'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { requireAnonymous, sessionKey, signup } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { checkHoneypot } from '#app/utils/honeypot.server.ts'\nimport { invariant, useIsPending } from '#app/utils/misc.tsx'\nimport { authSessionStorage } from '#app/utils/session.server.ts'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport {\n\tNameSchema,\n\tPasswordAndConfirmPasswordSchema,\n\tUsernameSchema,\n} from '#app/utils/user-validation.ts'\nimport { verifySessionStorage } from '#app/utils/verification.server.ts'\nimport { type VerifyFunctionArgs } from './verify.tsx'\n\nconst onboardingEmailSessionKey = 'onboardingEmail'\n\nconst SignupFormSchema = z\n\t.object({\n\t\tusername: UsernameSchema,\n\t\tname: NameSchema,\n\t\tagreeToTermsOfServiceAndPrivacyPolicy: z.boolean({\n\t\t\trequired_error:\n\t\t\t\t'You must agree to the terms of service and privacy policy',\n\t\t}),\n\t\tremember: z.boolean().optional(),\n\t\tredirectTo: z.string().optional(),\n\t})\n\t.and(PasswordAndConfirmPasswordSchema)\n\nasync function requireOnboardingEmail(request: Request) {\n\tawait requireAnonymous(request)\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst email = verifySession.get(onboardingEmailSessionKey)\n\tif (typeof email !== 'string' || !email) {\n\t\tthrow redirect('/signup')\n\t}\n\treturn email\n}\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst email = await requireOnboardingEmail(request)\n\treturn json({ email })\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst email = await requireOnboardingEmail(request)\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\tcheckHoneypot(formData)\n\tconst submission = await parse(formData, {\n\t\tschema: intent =>\n\t\t\tSignupFormSchema.superRefine(async (data, ctx) => {\n\t\t\t\tconst existingUser = await prisma.user.findUnique({\n\t\t\t\t\twhere: { username: data.username },\n\t\t\t\t\tselect: { id: true },\n\t\t\t\t})\n\t\t\t\tif (existingUser) {\n\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\tpath: ['username'],\n\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\tmessage: 'A user already exists with this username',\n\t\t\t\t\t})\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}).transform(async data => {\n\t\t\t\tif (intent !== 'submit') return { ...data, session: null }\n\n\t\t\t\tconst session = await signup({ ...data, email })\n\t\t\t\treturn { ...data, session }\n\t\t\t}),\n\t\tasync: true,\n\t})\n\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value?.session) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst { session, remember, redirectTo } = submission.value\n\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tauthSession.set(sessionKey, session.id)\n\tconst verifySession = await verifySessionStorage.getSession()\n\tconst headers = new Headers()\n\theaders.append(\n\t\t'set-cookie',\n\t\tawait authSessionStorage.commitSession(authSession, {\n\t\t\texpires: remember ? session.expirationDate : undefined,\n\t\t}),\n\t)\n\theaders.append(\n\t\t'set-cookie',\n\t\tawait verifySessionStorage.destroySession(verifySession),\n\t)\n\n\treturn redirectWithToast(\n\t\tsafeRedirect(redirectTo),\n\t\t{ title: 'Welcome', description: 'Thanks for signing up!' },\n\t\t{ headers },\n\t)\n}\n\nexport async function handleVerification({ submission }: VerifyFunctionArgs) {\n\tinvariant(submission.value, 'submission.value should be defined by now')\n\tconst verifySession = await verifySessionStorage.getSession()\n\tverifySession.set(onboardingEmailSessionKey, submission.value.target)\n\treturn redirect('/onboarding', {\n\t\theaders: {\n\t\t\t'set-cookie': await verifySessionStorage.commitSession(verifySession),\n\t\t},\n\t})\n}\n\nexport const meta: MetaFunction = () => {\n\treturn [{ title: 'Setup Epic Notes Account' }]\n}\n\nexport default function SignupRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\tconst [searchParams] = useSearchParams()\n\tconst redirectTo = searchParams.get('redirectTo')\n\n\tconst [form, fields] = useForm({\n\t\tid: 'onboarding-form',\n\t\tconstraint: getFieldsetConstraint(SignupFormSchema),\n\t\tdefaultValue: { redirectTo },\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: SignupFormSchema })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<div className=\"container flex min-h-full flex-col justify-center pb-32 pt-20\">\n\t\t\t<div className=\"mx-auto w-full max-w-lg\">\n\t\t\t\t<div className=\"flex flex-col gap-3 text-center\">\n\t\t\t\t\t<h1 className=\"text-h1\">Welcome aboard {data.email}!</h1>\n\t\t\t\t\t<p className=\"text-body-md text-muted-foreground\">\n\t\t\t\t\t\tPlease enter your details.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<Spacer size=\"xs\" />\n\t\t\t\t<Form\n\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\tclassName=\"mx-auto min-w-full max-w-sm sm:min-w-[368px]\"\n\t\t\t\t\t{...form.props}\n\t\t\t\t>\n\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t<HoneypotInputs />\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{ htmlFor: fields.username.id, children: 'Username' }}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.username),\n\t\t\t\t\t\t\tautoComplete: 'username',\n\t\t\t\t\t\t\tclassName: 'lowercase',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.username.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{ htmlFor: fields.name.id, children: 'Name' }}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.name),\n\t\t\t\t\t\t\tautoComplete: 'name',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.name.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{ htmlFor: fields.password.id, children: 'Password' }}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.password, { type: 'password' }),\n\t\t\t\t\t\t\tautoComplete: 'new-password',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.password.errors}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.confirmPassword.id,\n\t\t\t\t\t\t\tchildren: 'Confirm Password',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.confirmPassword, { type: 'password' }),\n\t\t\t\t\t\t\tautoComplete: 'new-password',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.confirmPassword.errors}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.agreeToTermsOfServiceAndPrivacyPolicy.id,\n\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t'Do you agree to our Terms of Service and Privacy Policy?',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tbuttonProps={conform.input(\n\t\t\t\t\t\t\tfields.agreeToTermsOfServiceAndPrivacyPolicy,\n\t\t\t\t\t\t\t{ type: 'checkbox' },\n\t\t\t\t\t\t)}\n\t\t\t\t\t\terrors={fields.agreeToTermsOfServiceAndPrivacyPolicy.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.remember.id,\n\t\t\t\t\t\t\tchildren: 'Remember me',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tbuttonProps={conform.input(fields.remember, { type: 'checkbox' })}\n\t\t\t\t\t\terrors={fields.remember.errors}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<input {...conform.input(fields.redirectTo, { type: 'hidden' })} />\n\t\t\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\n\t\t\t\t\t<div className=\"flex items-center justify-between gap-6\">\n\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCreate an account\n\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t</div>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport {\n\tjson,\n\tredirect,\n\ttype DataFunctionArgs,\n\ttype MetaFunction,\n} from '@remix-run/node'\nimport { Form, useActionData, useLoaderData } from '@remix-run/react'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { requireAnonymous, resetUserPassword } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { invariant, useIsPending } from '#app/utils/misc.tsx'\nimport { PasswordAndConfirmPasswordSchema } from '#app/utils/user-validation.ts'\nimport { verifySessionStorage } from '#app/utils/verification.server.ts'\nimport { type VerifyFunctionArgs } from './verify.tsx'\n\nconst resetPasswordUsernameSessionKey = 'resetPasswordUsername'\n\nexport async function handleVerification({ submission }: VerifyFunctionArgs) {\n\tinvariant(submission.value, 'submission.value should be defined by now')\n\tconst target = submission.value.target\n\tconst user = await prisma.user.findFirst({\n\t\twhere: { OR: [{ email: target }, { username: target }] },\n\t\tselect: { email: true, username: true },\n\t})\n\t// we don't want to say the user is not found if the email is not found\n\t// because that would allow an attacker to check if an email is registered\n\tif (!user) {\n\t\tsubmission.error.code = ['Invalid code']\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst verifySession = await verifySessionStorage.getSession()\n\tverifySession.set(resetPasswordUsernameSessionKey, user.username)\n\treturn redirect('/reset-password', {\n\t\theaders: {\n\t\t\t'set-cookie': await verifySessionStorage.commitSession(verifySession),\n\t\t},\n\t})\n}\n\nconst ResetPasswordSchema = PasswordAndConfirmPasswordSchema\n\nasync function requireResetPasswordUsername(request: Request) {\n\tawait requireAnonymous(request)\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst resetPasswordUsername = verifySession.get(\n\t\tresetPasswordUsernameSessionKey,\n\t)\n\tif (typeof resetPasswordUsername !== 'string' || !resetPasswordUsername) {\n\t\tthrow redirect('/login')\n\t}\n\treturn resetPasswordUsername\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst resetPasswordUsername = await requireResetPasswordUsername(request)\n\treturn json({ resetPasswordUsername })\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst resetPasswordUsername = await requireResetPasswordUsername(request)\n\tconst formData = await request.formData()\n\tconst submission = parse(formData, {\n\t\tschema: ResetPasswordSchema,\n\t})\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value?.password) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\tconst { password } = submission.value\n\n\tawait resetUserPassword({ username: resetPasswordUsername, password })\n\tconst verifySession = await verifySessionStorage.getSession()\n\treturn redirect('/login', {\n\t\theaders: {\n\t\t\t'set-cookie': await verifySessionStorage.destroySession(verifySession),\n\t\t},\n\t})\n}\n\nexport const meta: MetaFunction = () => {\n\treturn [{ title: 'Reset Password | Epic Notes' }]\n}\n\nexport default function ResetPasswordPage() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'reset-password',\n\t\tconstraint: getFieldsetConstraint(ResetPasswordSchema),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: ResetPasswordSchema })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<div className=\"container flex flex-col justify-center pb-32 pt-20\">\n\t\t\t<div className=\"text-center\">\n\t\t\t\t<h1 className=\"text-h1\">Password Reset</h1>\n\t\t\t\t<p className=\"mt-3 text-body-md text-muted-foreground\">\n\t\t\t\t\tHi, {data.resetPasswordUsername}. No worries. It happens all the time.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"mx-auto mt-16 min-w-full sm:min-w-[368px] max-w-sm\">\n\t\t\t\t<Form method=\"POST\" {...form.props}>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.password.id,\n\t\t\t\t\t\t\tchildren: 'New Password',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.password, { type: 'password' }),\n\t\t\t\t\t\t\tautoComplete: 'new-password',\n\t\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.password.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.confirmPassword.id,\n\t\t\t\t\t\t\tchildren: 'Confirm Password',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.confirmPassword, { type: 'password' }),\n\t\t\t\t\t\t\tautoComplete: 'new-password',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.confirmPassword.errors}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\n\t\t\t\t\t<StatusButton\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t>\n\t\t\t\t\t\tReset password\n\t\t\t\t\t</StatusButton>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn <GeneralErrorBoundary />\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport {\n\tjson,\n\tredirect,\n\ttype DataFunctionArgs,\n\ttype MetaFunction,\n} from '@remix-run/node'\nimport {\n\tForm,\n\tuseActionData,\n\tuseLoaderData,\n\tuseSearchParams,\n\ttype Params,\n} from '@remix-run/react'\nimport { safeRedirect } from 'remix-utils/safe-redirect'\nimport { z } from 'zod'\nimport { CheckboxField, ErrorList, Field } from '#app/components/forms.tsx'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport {\n\tauthenticator,\n\trequireAnonymous,\n\tsessionKey,\n\tsignupWithConnection,\n} from '#app/utils/auth.server.ts'\nimport { ProviderNameSchema } from '#app/utils/connections.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { invariant, useIsPending } from '#app/utils/misc.tsx'\nimport { authSessionStorage } from '#app/utils/session.server.ts'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { NameSchema, UsernameSchema } from '#app/utils/user-validation.ts'\nimport { verifySessionStorage } from '#app/utils/verification.server.ts'\nimport { type VerifyFunctionArgs } from './verify.tsx'\n\nexport const onboardingEmailSessionKey = 'onboardingEmail'\nexport const providerIdKey = 'providerId'\nexport const prefilledProfileKey = 'prefilledProfile'\n\nconst SignupFormSchema = z.object({\n\timageUrl: z.string().optional(),\n\tusername: UsernameSchema,\n\tname: NameSchema,\n\tagreeToTermsOfServiceAndPrivacyPolicy: z.boolean({\n\t\trequired_error: 'You must agree to the terms of service and privacy policy',\n\t}),\n\tremember: z.boolean().optional(),\n\tredirectTo: z.string().optional(),\n})\n\nasync function requireData({\n\trequest,\n\tparams,\n}: {\n\trequest: Request\n\tparams: Params\n}) {\n\tawait requireAnonymous(request)\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst email = verifySession.get(onboardingEmailSessionKey)\n\tconst providerId = verifySession.get(providerIdKey)\n\tconst result = z\n\t\t.object({\n\t\t\temail: z.string(),\n\t\t\tproviderName: ProviderNameSchema,\n\t\t\tproviderId: z.string(),\n\t\t})\n\t\t.safeParse({ email, providerName: params.provider, providerId })\n\tif (result.success) {\n\t\treturn result.data\n\t} else {\n\t\tconsole.error(result.error)\n\t\tthrow redirect('/signup')\n\t}\n}\n\nexport async function loader({ request, params }: DataFunctionArgs) {\n\tconst { email } = await requireData({ request, params })\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst prefilledProfile = verifySession.get(prefilledProfileKey)\n\n\tconst formError = authSession.get(authenticator.sessionErrorKey)\n\n\treturn json({\n\t\temail,\n\t\tstatus: 'idle',\n\t\tsubmission: {\n\t\t\tintent: '',\n\t\t\tpayload: (prefilledProfile ?? {}) as Record<string, unknown>,\n\t\t\terror: {\n\t\t\t\t'': typeof formError === 'string' ? [formError] : [],\n\t\t\t},\n\t\t},\n\t})\n}\n\nexport async function action({ request, params }: DataFunctionArgs) {\n\tconst { email, providerId, providerName } = await requireData({\n\t\trequest,\n\t\tparams,\n\t})\n\tconst formData = await request.formData()\n\tconst verifySession = await verifySessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\n\tconst submission = await parse(formData, {\n\t\tschema: SignupFormSchema.superRefine(async (data, ctx) => {\n\t\t\tconst existingUser = await prisma.user.findUnique({\n\t\t\t\twhere: { username: data.username },\n\t\t\t\tselect: { id: true },\n\t\t\t})\n\t\t\tif (existingUser) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tpath: ['username'],\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: 'A user already exists with this username',\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t}).transform(async data => {\n\t\t\tconst session = await signupWithConnection({\n\t\t\t\t...data,\n\t\t\t\temail,\n\t\t\t\tproviderId,\n\t\t\t\tproviderName,\n\t\t\t})\n\t\t\treturn { ...data, session }\n\t\t}),\n\t\tasync: true,\n\t})\n\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value?.session) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst { session, remember, redirectTo } = submission.value\n\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tauthSession.set(sessionKey, session.id)\n\tconst headers = new Headers()\n\theaders.append(\n\t\t'set-cookie',\n\t\tawait authSessionStorage.commitSession(authSession, {\n\t\t\texpires: remember ? session.expirationDate : undefined,\n\t\t}),\n\t)\n\theaders.append(\n\t\t'set-cookie',\n\t\tawait verifySessionStorage.destroySession(verifySession),\n\t)\n\n\treturn redirectWithToast(\n\t\tsafeRedirect(redirectTo),\n\t\t{ title: 'Welcome', description: 'Thanks for signing up!' },\n\t\t{ headers },\n\t)\n}\n\nexport async function handleVerification({ submission }: VerifyFunctionArgs) {\n\tinvariant(submission.value, 'submission.value should be defined by now')\n\tconst verifySession = await verifySessionStorage.getSession()\n\tverifySession.set(onboardingEmailSessionKey, submission.value.target)\n\treturn redirect('/onboarding', {\n\t\theaders: {\n\t\t\t'set-cookie': await verifySessionStorage.commitSession(verifySession),\n\t\t},\n\t})\n}\n\nexport const meta: MetaFunction = () => {\n\treturn [{ title: 'Setup Epic Notes Account' }]\n}\n\nexport default function SignupRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\tconst [searchParams] = useSearchParams()\n\tconst redirectTo = searchParams.get('redirectTo')\n\n\tconst [form, fields] = useForm({\n\t\tid: 'onboarding-provider-form',\n\t\tconstraint: getFieldsetConstraint(SignupFormSchema),\n\t\tlastSubmission: actionData?.submission ?? data.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: SignupFormSchema })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<div className=\"container flex min-h-full flex-col justify-center pb-32 pt-20\">\n\t\t\t<div className=\"mx-auto w-full max-w-lg\">\n\t\t\t\t<div className=\"flex flex-col gap-3 text-center\">\n\t\t\t\t\t<h1 className=\"text-h1\">Welcome aboard {data.email}!</h1>\n\t\t\t\t\t<p className=\"text-body-md text-muted-foreground\">\n\t\t\t\t\t\tPlease enter your details.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<Spacer size=\"xs\" />\n\t\t\t\t<Form\n\t\t\t\t\tmethod=\"POST\"\n\t\t\t\t\tclassName=\"mx-auto min-w-full max-w-sm sm:min-w-[368px]\"\n\t\t\t\t\t{...form.props}\n\t\t\t\t>\n\t\t\t\t\t{fields.imageUrl.defaultValue ? (\n\t\t\t\t\t\t<div className=\"mb-4 flex flex-col items-center justify-center gap-4\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={fields.imageUrl.defaultValue}\n\t\t\t\t\t\t\t\talt=\"Profile\"\n\t\t\t\t\t\t\t\tclassName=\"h-24 w-24 rounded-full\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<p className=\"text-body-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\tYou can change your photo later\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t\t<input {...conform.input(fields.imageUrl, { type: 'hidden' })} />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{ htmlFor: fields.username.id, children: 'Username' }}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.username),\n\t\t\t\t\t\t\tautoComplete: 'username',\n\t\t\t\t\t\t\tclassName: 'lowercase',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.username.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{ htmlFor: fields.name.id, children: 'Name' }}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t...conform.input(fields.name),\n\t\t\t\t\t\t\tautoComplete: 'name',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.name.errors}\n\t\t\t\t\t/>\n\n\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.agreeToTermsOfServiceAndPrivacyPolicy.id,\n\t\t\t\t\t\t\tchildren:\n\t\t\t\t\t\t\t\t'Do you agree to our Terms of Service and Privacy Policy?',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tbuttonProps={conform.input(\n\t\t\t\t\t\t\tfields.agreeToTermsOfServiceAndPrivacyPolicy,\n\t\t\t\t\t\t\t{ type: 'checkbox' },\n\t\t\t\t\t\t)}\n\t\t\t\t\t\terrors={fields.agreeToTermsOfServiceAndPrivacyPolicy.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<CheckboxField\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.remember.id,\n\t\t\t\t\t\t\tchildren: 'Remember me',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tbuttonProps={conform.input(fields.remember, { type: 'checkbox' })}\n\t\t\t\t\t\terrors={fields.remember.errors}\n\t\t\t\t\t/>\n\n\t\t\t\t\t{redirectTo ? (\n\t\t\t\t\t\t<input type=\"hidden\" name=\"redirectTo\" value={redirectTo} />\n\t\t\t\t\t) : null}\n\n\t\t\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\n\t\t\t\t\t<div className=\"flex items-center justify-between gap-6\">\n\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCreate an account\n\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t</div>\n\t\t\t\t</Form>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport * as E from '@react-email/components'\nimport {\n\tjson,\n\tredirect,\n\ttype DataFunctionArgs,\n\ttype MetaFunction,\n} from '@remix-run/node'\nimport { Link, useFetcher } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { HoneypotInputs } from 'remix-utils/honeypot/react'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { sendEmail } from '#app/utils/email.server.ts'\nimport { checkHoneypot } from '#app/utils/honeypot.server.ts'\nimport { EmailSchema, UsernameSchema } from '#app/utils/user-validation.ts'\nimport { prepareVerification } from './verify.tsx'\n\nconst ForgotPasswordSchema = z.object({\n\tusernameOrEmail: z.union([EmailSchema, UsernameSchema]),\n})\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\tcheckHoneypot(formData)\n\tconst submission = await parse(formData, {\n\t\tschema: ForgotPasswordSchema.superRefine(async (data, ctx) => {\n\t\t\tconst user = await prisma.user.findFirst({\n\t\t\t\twhere: {\n\t\t\t\t\tOR: [\n\t\t\t\t\t\t{ email: data.usernameOrEmail },\n\t\t\t\t\t\t{ username: data.usernameOrEmail },\n\t\t\t\t\t],\n\t\t\t\t},\n\t\t\t\tselect: { id: true },\n\t\t\t})\n\t\t\tif (!user) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tpath: ['usernameOrEmail'],\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: 'No user exists with this username or email',\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t}),\n\t\tasync: true,\n\t})\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\tconst { usernameOrEmail } = submission.value\n\n\tconst user = await prisma.user.findFirstOrThrow({\n\t\twhere: { OR: [{ email: usernameOrEmail }, { username: usernameOrEmail }] },\n\t\tselect: { email: true, username: true },\n\t})\n\n\tconst { verifyUrl, redirectTo, otp } = await prepareVerification({\n\t\tperiod: 10 * 60,\n\t\trequest,\n\t\ttype: 'reset-password',\n\t\ttarget: usernameOrEmail,\n\t})\n\n\tconst response = await sendEmail({\n\t\tto: user.email,\n\t\tsubject: `Epic Notes Password Reset`,\n\t\treact: (\n\t\t\t<ForgotPasswordEmail onboardingUrl={verifyUrl.toString()} otp={otp} />\n\t\t),\n\t})\n\n\tif (response.status === 'success') {\n\t\treturn redirect(redirectTo.toString())\n\t} else {\n\t\tsubmission.error[''] = [response.error.message]\n\t\treturn json({ status: 'error', submission } as const, { status: 500 })\n\t}\n}\n\nfunction ForgotPasswordEmail({\n\tonboardingUrl,\n\totp,\n}: {\n\tonboardingUrl: string\n\totp: string\n}) {\n\treturn (\n\t\t<E.Html lang=\"en\" dir=\"ltr\">\n\t\t\t<E.Container>\n\t\t\t\t<h1>\n\t\t\t\t\t<E.Text>Epic Notes Password Reset</E.Text>\n\t\t\t\t</h1>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>\n\t\t\t\t\t\tHere's your verification code: <strong>{otp}</strong>\n\t\t\t\t\t</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>Or click the link:</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<E.Link href={onboardingUrl}>{onboardingUrl}</E.Link>\n\t\t\t</E.Container>\n\t\t</E.Html>\n\t)\n}\n\nexport const meta: MetaFunction = () => {\n\treturn [{ title: 'Password Recovery for Epic Notes' }]\n}\n\nexport default function ForgotPasswordRoute() {\n\tconst forgotPassword = useFetcher<typeof action>()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'forgot-password-form',\n\t\tconstraint: getFieldsetConstraint(ForgotPasswordSchema),\n\t\tlastSubmission: forgotPassword.data?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: ForgotPasswordSchema })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<div className=\"container pb-32 pt-20\">\n\t\t\t<div className=\"flex flex-col justify-center\">\n\t\t\t\t<div className=\"text-center\">\n\t\t\t\t\t<h1 className=\"text-h1\">Forgot Password</h1>\n\t\t\t\t\t<p className=\"mt-3 text-body-md text-muted-foreground\">\n\t\t\t\t\t\tNo worries, we'll send you reset instructions.\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"mx-auto mt-16 min-w-full sm:min-w-[368px] max-w-sm\">\n\t\t\t\t\t<forgotPassword.Form method=\"POST\" {...form.props}>\n\t\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t\t<HoneypotInputs />\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\t\t\thtmlFor: fields.usernameOrEmail.id,\n\t\t\t\t\t\t\t\t\tchildren: 'Username or Email',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\t\t\t\t...conform.input(fields.usernameOrEmail),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\terrors={fields.usernameOrEmail.errors}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\n\t\t\t\t\t\t<div className=\"mt-6\">\n\t\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\tstatus={\n\t\t\t\t\t\t\t\t\tforgotPassword.state === 'submitting'\n\t\t\t\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t\t\t\t: forgotPassword.data?.status ?? 'idle'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tdisabled={forgotPassword.state !== 'idle'}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tRecover password\n\t\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</forgotPassword.Form>\n\t\t\t\t\t<Link\n\t\t\t\t\t\tto=\"/login\"\n\t\t\t\t\t\tclassName=\"mt-11 text-center text-body-sm font-bold\"\n\t\t\t\t\t>\n\t\t\t\t\t\tBack to Login\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn <GeneralErrorBoundary />\n}\n", "import { redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { logout } from '#app/utils/auth.server.ts'\n\nexport async function loader() {\n\treturn redirect('/')\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\treturn logout({ request })\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport * as E from '@react-email/components'\nimport {\n\tjson,\n\tredirect,\n\ttype DataFunctionArgs,\n\ttype MetaFunction,\n} from '@remix-run/node'\nimport { Form, useActionData, useSearchParams } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { HoneypotInputs } from 'remix-utils/honeypot/react'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport {\n\tProviderConnectionForm,\n\tproviderNames,\n} from '#app/utils/connections.tsx'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { sendEmail } from '#app/utils/email.server.ts'\nimport { checkHoneypot } from '#app/utils/honeypot.server.ts'\nimport { useIsPending } from '#app/utils/misc.tsx'\nimport { EmailSchema } from '#app/utils/user-validation.ts'\nimport { prepareVerification } from './verify.tsx'\n\nconst SignupSchema = z.object({\n\temail: EmailSchema,\n})\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst formData = await request.formData()\n\n\tawait validateCSRF(formData, request.headers)\n\tcheckHoneypot(formData)\n\n\tconst submission = await parse(formData, {\n\t\tschema: SignupSchema.superRefine(async (data, ctx) => {\n\t\t\tconst existingUser = await prisma.user.findUnique({\n\t\t\t\twhere: { email: data.email },\n\t\t\t\tselect: { id: true },\n\t\t\t})\n\t\t\tif (existingUser) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tpath: ['email'],\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: 'A user already exists with this email',\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t}\n\t\t}),\n\t\tasync: true,\n\t})\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\tconst { email } = submission.value\n\tconst { verifyUrl, redirectTo, otp } = await prepareVerification({\n\t\tperiod: 10 * 60,\n\t\trequest,\n\t\ttype: 'onboarding',\n\t\ttarget: email,\n\t})\n\n\tconst response = await sendEmail({\n\t\tto: email,\n\t\tsubject: `Welcome to Epic Notes!`,\n\t\treact: <SignupEmail onboardingUrl={verifyUrl.toString()} otp={otp} />,\n\t})\n\n\tif (response.status === 'success') {\n\t\treturn redirect(redirectTo.toString())\n\t} else {\n\t\tsubmission.error[''] = [response.error.message]\n\t\treturn json({ status: 'error', submission } as const, { status: 500 })\n\t}\n}\n\nexport function SignupEmail({\n\tonboardingUrl,\n\totp,\n}: {\n\tonboardingUrl: string\n\totp: string\n}) {\n\treturn (\n\t\t<E.Html lang=\"en\" dir=\"ltr\">\n\t\t\t<E.Container>\n\t\t\t\t<h1>\n\t\t\t\t\t<E.Text>Welcome to Epic Notes!</E.Text>\n\t\t\t\t</h1>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>\n\t\t\t\t\t\tHere's your verification code: <strong>{otp}</strong>\n\t\t\t\t\t</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<p>\n\t\t\t\t\t<E.Text>Or click the link to get started:</E.Text>\n\t\t\t\t</p>\n\t\t\t\t<E.Link href={onboardingUrl}>{onboardingUrl}</E.Link>\n\t\t\t</E.Container>\n\t\t</E.Html>\n\t)\n}\n\nexport const meta: MetaFunction = () => {\n\treturn [{ title: 'Sign Up | Epic Notes' }]\n}\n\nexport default function SignupRoute() {\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\tconst [searchParams] = useSearchParams()\n\tconst redirectTo = searchParams.get('redirectTo')\n\n\tconst [form, fields] = useForm({\n\t\tid: 'signup-form',\n\t\tconstraint: getFieldsetConstraint(SignupSchema),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\tconst result = parse(formData, { schema: SignupSchema })\n\t\t\treturn result\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<div className=\"container flex flex-col justify-center pb-32 pt-20\">\n\t\t\t<div className=\"text-center\">\n\t\t\t\t<h1 className=\"text-h1\">Let's start your journey!</h1>\n\t\t\t\t<p className=\"mt-3 text-body-md text-muted-foreground\">\n\t\t\t\t\tPlease enter your email.\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t<div className=\"mx-auto mt-16 min-w-full sm:min-w-[368px] max-w-sm\">\n\t\t\t\t<Form method=\"POST\" {...form.props}>\n\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t<HoneypotInputs />\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\thtmlFor: fields.email.id,\n\t\t\t\t\t\t\tchildren: 'Email',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tinputProps={{ ...conform.input(fields.email), autoFocus: true }}\n\t\t\t\t\t\terrors={fields.email.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\t\t\t\t\t<StatusButton\n\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t>\n\t\t\t\t\t\tSubmit\n\t\t\t\t\t</StatusButton>\n\t\t\t\t</Form>\n\t\t\t\t<ul className=\"mt-5 flex flex-col gap-5 border-b-2 border-t-2 border-border py-3\">\n\t\t\t\t\t{providerNames.map(providerName => (\n\t\t\t\t\t\t<li key={providerName}>\n\t\t\t\t\t\t\t<ProviderConnectionForm\n\t\t\t\t\t\t\t\ttype=\"Signup\"\n\t\t\t\t\t\t\t\tproviderName={providerName}\n\t\t\t\t\t\t\t\tredirectTo={redirectTo}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn <GeneralErrorBoundary />\n}\n", "export default function AboutRoute() {\n\treturn <div>About page</div>\n}\n", "import { type MetaFunction } from '@remix-run/node'\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from '#app/components/ui/tooltip.tsx'\nimport { logos, stars } from './logos/logos.ts'\n\nexport const meta: MetaFunction = () => [{ title: 'Epic Notes' }]\n\nexport default function Index() {\n\treturn (\n\t\t<main className=\"relative min-h-screen sm:flex sm:items-center sm:justify-center\">\n\t\t\t<div className=\"relative sm:pb-16 sm:pt-8\">\n\t\t\t\t<div className=\"mx-auto max-w-7xl sm:px-6 lg:px-8\">\n\t\t\t\t\t<div className=\"relative shadow-xl sm:overflow-hidden sm:rounded-2xl\">\n\t\t\t\t\t\t<div className=\"absolute inset-0\">\n\t\t\t\t\t\t\t<img className=\"h-full w-full object-cover\" src={stars} alt=\"\" />\n\t\t\t\t\t\t\t<div className=\"absolute inset-0 bg-[color:rgba(30,23,38,0.5)] mix-blend-multiply\" />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div className=\"lg:pt-18 relative px-4 pb-8 pt-8 sm:px-6 sm:pb-14 sm:pt-16 lg:px-8 lg:pb-20\">\n\t\t\t\t\t\t\t<h1 className=\"text-center text-mega font-extrabold tracking-tight sm:text-8xl lg:text-9xl\">\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"block uppercase text-white drop-shadow-md\"\n\t\t\t\t\t\t\t\t\thref=\"https://www.epicweb.dev/stack\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<span>Epic Stack</span>\n\t\t\t\t\t\t\t\t\t<svg\n\t\t\t\t\t\t\t\t\t\tclassName=\"mx-auto mt-2\"\n\t\t\t\t\t\t\t\t\t\txmlns=\"http://www.w3.org/2000/svg\"\n\t\t\t\t\t\t\t\t\t\twidth=\"120\"\n\t\t\t\t\t\t\t\t\t\theight=\"120\"\n\t\t\t\t\t\t\t\t\t\tfill=\"none\"\n\t\t\t\t\t\t\t\t\t\tviewBox=\"0 0 65 65\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<path\n\t\t\t\t\t\t\t\t\t\t\tfill=\"currentColor\"\n\t\t\t\t\t\t\t\t\t\t\td=\"M39.445 25.555 37 17.163 65 0 47.821 28l-8.376-2.445Zm-13.89 0L28 17.163 0 0l17.179 28 8.376-2.445Zm13.89 13.89L37 47.837 65 65 47.821 37l-8.376 2.445Zm-13.89 0L28 47.837 0 65l17.179-28 8.376 2.445Z\"\n\t\t\t\t\t\t\t\t\t\t></path>\n\t\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t\t<p className=\"mx-auto mt-6 max-w-lg text-center text-xl text-white sm:max-w-3xl\">\n\t\t\t\t\t\t\t\tCheck the{' '}\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName=\"underline\"\n\t\t\t\t\t\t\t\t\thref=\"https://github.com/epicweb-dev/epic-stack/blob/main/docs/getting-started.md\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\tGetting Started\n\t\t\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\t\t\tguide file for how to get your project off the ground!\n\t\t\t\t\t\t\t</p>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<div className=\"mx-auto mt-8 max-w-7xl px-4 py-2 sm:px-6 lg:px-8\">\n\t\t\t\t\t<div className=\"flex flex-wrap justify-center gap-8 rounded-3xl bg-slate-100 py-4 dark:bg-slate-200\">\n\t\t\t\t\t\t<TooltipProvider>\n\t\t\t\t\t\t\t{logos.map(img => (\n\t\t\t\t\t\t\t\t<Tooltip key={img.href}>\n\t\t\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\t\t\thref={img.href}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"flex h-16 w-32 justify-center p-1 grayscale transition hover:grayscale-0 focus:grayscale-0\"\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\t\talt={img.alt}\n\t\t\t\t\t\t\t\t\t\t\t\tsrc={img.src}\n\t\t\t\t\t\t\t\t\t\t\t\tclassName=\"object-contain\"\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t\t\t<TooltipContent>{img.alt}</TooltipContent>\n\t\t\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</TooltipProvider>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t)\n}\n", "import docker from './docker.svg'\nimport eslint from './eslint.svg'\nimport fakerJS from './faker.svg'\nimport fly from './fly.svg'\nimport github from './github.svg'\nimport msw from './msw.svg'\nimport playwright from './playwright.svg'\nimport prettier from './prettier.svg'\nimport prisma from './prisma.svg'\nimport radixUI from './radix.svg'\nimport reactEmail from './react-email.svg'\nimport remix from './remix.svg'\nimport resend from './resend.svg'\nimport sentry from './sentry.svg'\nimport shadcnUI from './shadcn-ui.svg'\nimport sqlite from './sqlite.svg'\nimport tailwind from './tailwind.svg'\nimport testingLibrary from './testing-library.png'\nimport typescript from './typescript.svg'\nimport vitest from './vitest.svg'\nimport zod from './zod.svg'\n\nexport { default as stars } from './stars.jpg'\n\nexport const logos = [\n\t{\n\t\tsrc: remix,\n\t\talt: 'Remix',\n\t\thref: 'https://remix.run',\n\t},\n\t{\n\t\tsrc: fly,\n\t\talt: 'Fly.io',\n\t\thref: 'https://fly.io',\n\t},\n\t{\n\t\tsrc: sqlite,\n\t\talt: 'SQLite',\n\t\thref: 'https://sqlite.org',\n\t},\n\t{\n\t\tsrc: prisma,\n\t\talt: 'Prisma',\n\t\thref: 'https://prisma.io',\n\t},\n\t{\n\t\tsrc: zod,\n\t\talt: 'Zod',\n\t\thref: 'https://zod.dev/',\n\t},\n\t{\n\t\tsrc: github,\n\t\talt: 'GitHub',\n\t\thref: 'https://github.com',\n\t},\n\t{\n\t\tsrc: resend,\n\t\talt: 'Resend',\n\t\thref: 'https://resend.com',\n\t},\n\t{\n\t\tsrc: reactEmail,\n\t\talt: 'React Email',\n\t\thref: 'https://react.email',\n\t},\n\t{\n\t\tsrc: tailwind,\n\t\talt: 'Tailwind',\n\t\thref: 'https://tailwindcss.com',\n\t},\n\t{\n\t\tsrc: radixUI,\n\t\talt: 'Radix UI',\n\t\thref: 'https://www.radix-ui.com/',\n\t},\n\t{\n\t\tsrc: shadcnUI,\n\t\talt: 'shadcn/ui',\n\t\thref: 'https://ui.shadcn.com/',\n\t},\n\t{\n\t\tsrc: playwright,\n\t\talt: 'Playwright',\n\t\thref: 'https://playwright.dev/',\n\t},\n\t{\n\t\tsrc: msw,\n\t\talt: 'MSW',\n\t\thref: 'https://mswjs.io',\n\t},\n\t{\n\t\tsrc: fakerJS,\n\t\talt: 'Faker.js',\n\t\thref: 'https://fakerjs.dev/',\n\t},\n\t{\n\t\tsrc: vitest,\n\t\talt: 'Vitest',\n\t\thref: 'https://vitest.dev',\n\t},\n\t{\n\t\tsrc: testingLibrary,\n\t\talt: 'Testing Library',\n\t\thref: 'https://testing-library.com',\n\t},\n\t{\n\t\tsrc: docker,\n\t\talt: 'Docker',\n\t\thref: 'https://www.docker.com',\n\t},\n\t{\n\t\tsrc: typescript,\n\t\talt: 'TypeScript',\n\t\thref: 'https://typescriptlang.org',\n\t},\n\t{\n\t\tsrc: prettier,\n\t\talt: 'Prettier',\n\t\thref: 'https://prettier.io',\n\t},\n\t{\n\t\tsrc: eslint,\n\t\talt: 'ESLint',\n\t\thref: 'https://eslint.org',\n\t},\n\t{\n\t\tsrc: sentry,\n\t\talt: 'Sentry',\n\t\thref: 'https://sentry.io',\n\t},\n]\n", "export default function PrivacyRoute() {\n\treturn <div>Privacy</div>\n}\n", "export default function SupportRoute() {\n\treturn <div>Support</div>\n}\n", "export default function TermsOfServiceRoute() {\n\treturn <div>Terms of service</div>\n}\n", "import { generateRobotsTxt } from '@nasa-gcn/remix-seo'\nimport { type DataFunctionArgs } from '@remix-run/node'\nimport { getDomainUrl } from '#app/utils/misc.tsx'\n\nexport function loader({ request }: DataFunctionArgs) {\n\treturn generateRobotsTxt([\n\t\t{ type: 'sitemap', value: `${getDomainUrl(request)}/sitemap.xml` },\n\t])\n}\n", "import { generateSitemap } from '@nasa-gcn/remix-seo'\n// @ts-expect-error - this does work, though it's not exactly a public API\nimport { routes } from '@remix-run/dev/server-build'\nimport { type DataFunctionArgs } from '@remix-run/node'\nimport { getDomainUrl } from '#app/utils/misc.tsx'\n\nexport function loader({ request }: DataFunctionArgs) {\n\treturn generateSitemap(request, routes, {\n\t\tsiteUrl: getDomainUrl(request),\n\t\theaders: {\n\t\t\t'Cache-Control': `public, max-age=${60 * 5}`,\n\t\t},\n\t})\n}\n", "import { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, redirect, type DataFunctionArgs } from '@remix-run/node'\nimport {\n\tForm,\n\tLink,\n\tuseFetcher,\n\tuseLoaderData,\n\tuseSearchParams,\n\tuseSubmit,\n} from '@remix-run/react'\nimport { Field } from '#app/components/forms.tsx'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport {\n\tcache,\n\tgetAllCacheKeys,\n\tlruCache,\n\tsearchCacheKeys,\n} from '#app/utils/cache.server.ts'\nimport {\n\tensureInstance,\n\tgetAllInstances,\n\tgetInstanceInfo,\n} from '#app/utils/litefs.server.ts'\nimport {\n\tinvariantResponse,\n\tuseDebounce,\n\tuseDoubleCheck,\n} from '#app/utils/misc.tsx'\nimport { requireUserWithRole } from '#app/utils/permissions.ts'\n\nexport const handle: SEOHandle = {\n\tgetSitemapEntries: () => null,\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tawait requireUserWithRole(request, 'admin')\n\tconst searchParams = new URL(request.url).searchParams\n\tconst query = searchParams.get('query')\n\tif (query === '') {\n\t\tsearchParams.delete('query')\n\t\treturn redirect(`/admin/cache?${searchParams.toString()}`)\n\t}\n\tconst limit = Number(searchParams.get('limit') ?? 100)\n\n\tconst currentInstanceInfo = await getInstanceInfo()\n\tconst instance =\n\t\tsearchParams.get('instance') ?? currentInstanceInfo.currentInstance\n\tconst instances = await getAllInstances()\n\tawait ensureInstance(instance)\n\n\tlet cacheKeys: { sqlite: Array<string>; lru: Array<string> }\n\tif (typeof query === 'string') {\n\t\tcacheKeys = await searchCacheKeys(query, limit)\n\t} else {\n\t\tcacheKeys = await getAllCacheKeys(limit)\n\t}\n\treturn json({ cacheKeys, instance, instances, currentInstanceInfo })\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tawait requireUserWithRole(request, 'admin')\n\tconst formData = await request.formData()\n\tconst key = formData.get('cacheKey')\n\tconst { currentInstance } = await getInstanceInfo()\n\tconst instance = formData.get('instance') ?? currentInstance\n\tconst type = formData.get('type')\n\n\tinvariantResponse(typeof key === 'string', 'cacheKey must be a string')\n\tinvariantResponse(typeof type === 'string', 'type must be a string')\n\tinvariantResponse(typeof instance === 'string', 'instance must be a string')\n\tawait ensureInstance(instance)\n\n\tswitch (type) {\n\t\tcase 'sqlite': {\n\t\t\tawait cache.delete(key)\n\t\t\tbreak\n\t\t}\n\t\tcase 'lru': {\n\t\t\tlruCache.delete(key)\n\t\t\tbreak\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unknown cache type: ${type}`)\n\t\t}\n\t}\n\treturn json({ success: true })\n}\n\nexport default function CacheAdminRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst [searchParams] = useSearchParams()\n\tconst submit = useSubmit()\n\tconst query = searchParams.get('query') ?? ''\n\tconst limit = searchParams.get('limit') ?? '100'\n\tconst instance = searchParams.get('instance') ?? data.instance\n\n\tconst handleFormChange = useDebounce((form: HTMLFormElement) => {\n\t\tsubmit(form)\n\t}, 400)\n\n\treturn (\n\t\t<div className=\"container\">\n\t\t\t<h1 className=\"text-h1\">Cache Admin</h1>\n\t\t\t<Spacer size=\"2xs\" />\n\t\t\t<Form\n\t\t\t\tmethod=\"get\"\n\t\t\t\tclassName=\"flex flex-col gap-4\"\n\t\t\t\tonChange={e => handleFormChange(e.currentTarget)}\n\t\t\t>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<div className=\"flex flex-1 gap-4\">\n\t\t\t\t\t\t<button\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tclassName=\"flex h-16 items-center justify-center\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\uD83D\uDD0E\n\t\t\t\t\t\t</button>\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tclassName=\"flex-1\"\n\t\t\t\t\t\t\tlabelProps={{ children: 'Search' }}\n\t\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\t\ttype: 'search',\n\t\t\t\t\t\t\t\tname: 'query',\n\t\t\t\t\t\t\t\tdefaultValue: query,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<div className=\"flex h-16 w-14 items-center text-lg font-medium text-muted-foreground\">\n\t\t\t\t\t\t\t<span title=\"Total results shown\">\n\t\t\t\t\t\t\t\t{data.cacheKeys.sqlite.length + data.cacheKeys.lru.length}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex flex-wrap items-center gap-4\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\tchildren: 'Limit',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\tname: 'limit',\n\t\t\t\t\t\t\tdefaultValue: limit,\n\t\t\t\t\t\t\ttype: 'number',\n\t\t\t\t\t\t\tstep: '1',\n\t\t\t\t\t\t\tmin: '1',\n\t\t\t\t\t\t\tmax: '10000',\n\t\t\t\t\t\t\tplaceholder: 'results limit',\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<select name=\"instance\" defaultValue={instance}>\n\t\t\t\t\t\t{Object.entries(data.instances).map(([inst, region]) => (\n\t\t\t\t\t\t\t<option key={inst} value={inst}>\n\t\t\t\t\t\t\t\t{[\n\t\t\t\t\t\t\t\t\tinst,\n\t\t\t\t\t\t\t\t\t`(${region})`,\n\t\t\t\t\t\t\t\t\tinst === data.currentInstanceInfo.currentInstance\n\t\t\t\t\t\t\t\t\t\t? '(current)'\n\t\t\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\t\t\t\tinst === data.currentInstanceInfo.primaryInstance\n\t\t\t\t\t\t\t\t\t\t? ' (primary)'\n\t\t\t\t\t\t\t\t\t\t: '',\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t.filter(Boolean)\n\t\t\t\t\t\t\t\t\t.join(' ')}\n\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</select>\n\t\t\t\t</div>\n\t\t\t</Form>\n\t\t\t<Spacer size=\"2xs\" />\n\t\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t\t<h2 className=\"text-h2\">LRU Cache:</h2>\n\t\t\t\t{data.cacheKeys.lru.map(key => (\n\t\t\t\t\t<CacheKeyRow\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\tcacheKey={key}\n\t\t\t\t\t\tinstance={instance}\n\t\t\t\t\t\ttype=\"lru\"\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t\t<Spacer size=\"3xs\" />\n\t\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t\t<h2 className=\"text-h2\">SQLite Cache:</h2>\n\t\t\t\t{data.cacheKeys.sqlite.map(key => (\n\t\t\t\t\t<CacheKeyRow\n\t\t\t\t\t\tkey={key}\n\t\t\t\t\t\tcacheKey={key}\n\t\t\t\t\t\tinstance={instance}\n\t\t\t\t\t\ttype=\"sqlite\"\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nfunction CacheKeyRow({\n\tcacheKey,\n\tinstance,\n\ttype,\n}: {\n\tcacheKey: string\n\tinstance?: string\n\ttype: 'sqlite' | 'lru'\n}) {\n\tconst fetcher = useFetcher<typeof action>()\n\tconst dc = useDoubleCheck()\n\tconst encodedKey = encodeURIComponent(cacheKey)\n\tconst valuePage = `/admin/cache/${type}/${encodedKey}?instance=${instance}`\n\treturn (\n\t\t<div className=\"flex items-center gap-2 font-mono\">\n\t\t\t<fetcher.Form method=\"POST\">\n\t\t\t\t<input type=\"hidden\" name=\"cacheKey\" value={cacheKey} />\n\t\t\t\t<input type=\"hidden\" name=\"instance\" value={instance} />\n\t\t\t\t<input type=\"hidden\" name=\"type\" value={type} />\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t{...dc.getButtonProps({ type: 'submit' })}\n\t\t\t\t>\n\t\t\t\t\t{fetcher.state === 'idle'\n\t\t\t\t\t\t? dc.doubleCheck\n\t\t\t\t\t\t\t? 'You sure?'\n\t\t\t\t\t\t\t: 'Delete'\n\t\t\t\t\t\t: 'Deleting...'}\n\t\t\t\t</Button>\n\t\t\t</fetcher.Form>\n\t\t\t<Link reloadDocument to={valuePage}>\n\t\t\t\t{cacheKey}\n\t\t\t</Link>\n\t\t</div>\n\t)\n}\n\nexport function ErrorBoundary({ error }: { error: Error }) {\n\tconsole.error(error)\n\n\treturn <div>An unexpected error occurred: {error.message}</div>\n}\n", "import { json } from '@remix-run/node'\nimport { requireUserId } from './auth.server.ts'\nimport { prisma } from './db.server.ts'\nimport { type useUser } from './user.ts'\n\nexport async function requireUserWithPermission(\n\trequest: Request,\n\tpermission: PermissionString,\n) {\n\tconst userId = await requireUserId(request)\n\tconst permissionData = parsePermissionString(permission)\n\tconst user = await prisma.user.findFirst({\n\t\tselect: { id: true },\n\t\twhere: {\n\t\t\tid: userId,\n\t\t\troles: {\n\t\t\t\tsome: {\n\t\t\t\t\tpermissions: {\n\t\t\t\t\t\tsome: {\n\t\t\t\t\t\t\t...permissionData,\n\t\t\t\t\t\t\taccess: permissionData.access\n\t\t\t\t\t\t\t\t? { in: permissionData.access }\n\t\t\t\t\t\t\t\t: undefined,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\tif (!user) {\n\t\tthrow json(\n\t\t\t{\n\t\t\t\terror: 'Unauthorized',\n\t\t\t\trequiredPermission: permissionData,\n\t\t\t\tmessage: `Unauthorized: required permissions: ${permission}`,\n\t\t\t},\n\t\t\t{ status: 403 },\n\t\t)\n\t}\n\treturn user.id\n}\n\nexport async function requireUserWithRole(request: Request, name: string) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findFirst({\n\t\tselect: { id: true },\n\t\twhere: { id: userId, roles: { some: { name } } },\n\t})\n\tif (!user) {\n\t\tthrow json(\n\t\t\t{\n\t\t\t\terror: 'Unauthorized',\n\t\t\t\trequiredRole: name,\n\t\t\t\tmessage: `Unauthorized: required role: ${name}`,\n\t\t\t},\n\t\t\t{ status: 403 },\n\t\t)\n\t}\n\treturn user.id\n}\n\ntype Action = 'create' | 'read' | 'update' | 'delete'\ntype Entity = 'user' | 'note'\ntype Access = 'own' | 'any' | 'own,any' | 'any,own'\ntype PermissionString = `${Action}:${Entity}` | `${Action}:${Entity}:${Access}`\nfunction parsePermissionString(permissionString: PermissionString) {\n\tconst [action, entity, access] = permissionString.split(':') as [\n\t\tAction,\n\t\tEntity,\n\t\tAccess | undefined,\n\t]\n\treturn {\n\t\taction,\n\t\tentity,\n\t\taccess: access ? (access.split(',') as Array<Access>) : undefined,\n\t}\n}\n\nexport function userHasPermission(\n\tuser: Pick<ReturnType<typeof useUser>, 'roles'> | null | undefined,\n\tpermission: PermissionString,\n) {\n\tif (!user) return false\n\tconst { action, entity, access } = parsePermissionString(permission)\n\treturn user.roles.some(role =>\n\t\trole.permissions.some(\n\t\t\tpermission =>\n\t\t\t\tpermission.entity === entity &&\n\t\t\t\tpermission.action === action &&\n\t\t\t\t(!access || access.includes(permission.access)),\n\t\t),\n\t)\n}\n\nexport function userHasRole(\n\tuser: Pick<ReturnType<typeof useUser>, 'roles'> | null,\n\trole: string,\n) {\n\tif (!user) return false\n\treturn user.roles.some(r => r.name === role)\n}\n", "import { json, type DataFunctionArgs } from '@remix-run/node'\nimport { getAllInstances, getInstanceInfo } from 'litefs-js'\nimport { ensureInstance } from 'litefs-js/remix.js'\nimport { lruCache } from '#app/utils/cache.server.ts'\nimport { invariantResponse } from '#app/utils/misc.tsx'\nimport { requireUserWithRole } from '#app/utils/permissions.ts'\n\nexport async function loader({ request, params }: DataFunctionArgs) {\n\tawait requireUserWithRole(request, 'admin')\n\tconst searchParams = new URL(request.url).searchParams\n\tconst currentInstanceInfo = await getInstanceInfo()\n\tconst allInstances = await getAllInstances()\n\tconst instance =\n\t\tsearchParams.get('instance') ?? currentInstanceInfo.currentInstance\n\tawait ensureInstance(instance)\n\n\tconst { cacheKey } = params\n\tinvariantResponse(cacheKey, 'cacheKey is required')\n\treturn json({\n\t\tinstance: {\n\t\t\thostname: instance,\n\t\t\tregion: allInstances[instance],\n\t\t\tisPrimary: currentInstanceInfo.primaryInstance === instance,\n\t\t},\n\t\tcacheKey,\n\t\tvalue: lruCache.get(cacheKey),\n\t})\n}\n", "import { json, type DataFunctionArgs } from '@remix-run/node'\nimport { getAllInstances, getInstanceInfo } from 'litefs-js'\nimport { ensureInstance } from 'litefs-js/remix.js'\nimport { cache } from '#app/utils/cache.server.ts'\nimport { invariantResponse } from '#app/utils/misc.tsx'\nimport { requireUserWithRole } from '#app/utils/permissions.ts'\n\nexport async function loader({ request, params }: DataFunctionArgs) {\n\tawait requireUserWithRole(request, 'admin')\n\tconst searchParams = new URL(request.url).searchParams\n\tconst currentInstanceInfo = await getInstanceInfo()\n\tconst allInstances = await getAllInstances()\n\tconst instance =\n\t\tsearchParams.get('instance') ?? currentInstanceInfo.currentInstance\n\tawait ensureInstance(instance)\n\n\tconst { cacheKey } = params\n\tinvariantResponse(cacheKey, 'cacheKey is required')\n\treturn json({\n\t\tinstance: {\n\t\t\thostname: instance,\n\t\t\tregion: allInstances[instance],\n\t\t\tisPrimary: currentInstanceInfo.primaryInstance === instance,\n\t\t},\n\t\tcacheKey,\n\t\tvalue: cache.get(cacheKey),\n\t})\n}\n", "import { redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { requireUserId, logout } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUnique({ where: { id: userId } })\n\tif (!user) {\n\t\tconst requestUrl = new URL(request.url)\n\t\tconst loginParams = new URLSearchParams([\n\t\t\t['redirectTo', `${requestUrl.pathname}${requestUrl.search}`],\n\t\t])\n\t\tconst redirectTo = `/login?${loginParams}`\n\t\tawait logout({ request, redirectTo })\n\t\treturn redirect(redirectTo)\n\t}\n\treturn redirect(`/users/${user.username}`)\n}\n", "import { json, type DataFunctionArgs } from '@remix-run/node'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { getDomainUrl } from '#app/utils/misc.tsx'\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUniqueOrThrow({\n\t\twhere: { id: userId },\n\t\t// this is one of the *few* instances where you can use \"include\" because\n\t\t// the goal is to literally get *everything*. Normally you should be\n\t\t// explicit with \"select\". We're suing select for images because we don't\n\t\t// want to send back the entire blob of the image. We'll send a URL they can\n\t\t// use to download it instead.\n\t\tinclude: {\n\t\t\timage: {\n\t\t\t\tselect: {\n\t\t\t\t\tid: true,\n\t\t\t\t\tcreatedAt: true,\n\t\t\t\t\tupdatedAt: true,\n\t\t\t\t\tcontentType: true,\n\t\t\t\t},\n\t\t\t},\n\t\t\tnotes: {\n\t\t\t\tinclude: {\n\t\t\t\t\timages: {\n\t\t\t\t\t\tselect: {\n\t\t\t\t\t\t\tid: true,\n\t\t\t\t\t\t\tcreatedAt: true,\n\t\t\t\t\t\t\tupdatedAt: true,\n\t\t\t\t\t\t\tcontentType: true,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t\tpassword: false, // <-- intentionally omit password\n\t\t\tsessions: true,\n\t\t\troles: true,\n\t\t},\n\t})\n\n\tconst domain = getDomainUrl(request)\n\n\treturn json({\n\t\tuser: {\n\t\t\t...user,\n\t\t\timage: user.image\n\t\t\t\t? {\n\t\t\t\t\t\t...user.image,\n\t\t\t\t\t\turl: `${domain}/resources/user-images/${user.image.id}`,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t\tnotes: user.notes.map(note => ({\n\t\t\t\t...note,\n\t\t\t\timages: note.images.map(image => ({\n\t\t\t\t\t...image,\n\t\t\t\t\turl: `${domain}/resources/note-images/${image.id}`,\n\t\t\t\t})),\n\t\t\t})),\n\t\t},\n\t})\n}\n", "// learn more: https://fly.io/docs/reference/configuration/#services-http_checks\nimport { type DataFunctionArgs } from '@remix-run/node'\nimport { prisma } from '#app/utils/db.server.ts'\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst host =\n\t\trequest.headers.get('X-Forwarded-Host') ?? request.headers.get('host')\n\n\ttry {\n\t\t// if we can connect to the database and make a simple query\n\t\t// and make a HEAD request to ourselves, then we're good.\n\t\tawait Promise.all([\n\t\t\tprisma.user.count(),\n\t\t\tfetch(`${new URL(request.url).protocol}${host}`, {\n\t\t\t\tmethod: 'HEAD',\n\t\t\t\theaders: { 'X-Healthcheck': 'true' },\n\t\t\t}).then(r => {\n\t\t\t\tif (!r.ok) return Promise.reject(r)\n\t\t\t}),\n\t\t])\n\t\treturn new Response('OK')\n\t} catch (error: unknown) {\n\t\tconsole.log('healthcheck \u274C', { error })\n\t\treturn new Response('ERROR', { status: 500 })\n\t}\n}\n", "import { type DataFunctionArgs } from '@remix-run/node'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { invariantResponse } from '#app/utils/misc.tsx'\n\nexport async function loader({ params }: DataFunctionArgs) {\n\tinvariantResponse(params.imageId, 'Image ID is required', { status: 400 })\n\tconst image = await prisma.noteImage.findUnique({\n\t\twhere: { id: params.imageId },\n\t\tselect: { contentType: true, blob: true },\n\t})\n\n\tinvariantResponse(image, 'Not found', { status: 404 })\n\n\treturn new Response(image.blob, {\n\t\theaders: {\n\t\t\t'Content-Type': image.contentType,\n\t\t\t'Content-Length': Buffer.byteLength(image.blob).toString(),\n\t\t\t'Content-Disposition': `inline; filename=\"${params.imageId}\"`,\n\t\t\t'Cache-Control': 'public, max-age=31536000, immutable',\n\t\t},\n\t})\n}\n", "import { type DataFunctionArgs } from '@remix-run/node'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { invariantResponse } from '#app/utils/misc.tsx'\n\nexport async function loader({ params }: DataFunctionArgs) {\n\tinvariantResponse(params.imageId, 'Image ID is required', { status: 400 })\n\tconst image = await prisma.userImage.findUnique({\n\t\twhere: { id: params.imageId },\n\t\tselect: { contentType: true, blob: true },\n\t})\n\n\tinvariantResponse(image, 'Not found', { status: 404 })\n\n\treturn new Response(image.blob, {\n\t\theaders: {\n\t\t\t'Content-Type': image.contentType,\n\t\t\t'Content-Length': Buffer.byteLength(image.blob).toString(),\n\t\t\t'Content-Disposition': `inline; filename=\"${params.imageId}\"`,\n\t\t\t'Cache-Control': 'public, max-age=31536000, immutable',\n\t\t},\n\t})\n}\n", "import { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, type DataFunctionArgs } from '@remix-run/node'\nimport { Link, Outlet, useMatches } from '@remix-run/react'\nimport { z } from 'zod'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn, invariantResponse } from '#app/utils/misc.tsx'\nimport { useUser } from '#app/utils/user.ts'\n\nexport const BreadcrumbHandle = z.object({ breadcrumb: z.any() })\nexport type BreadcrumbHandle = z.infer<typeof BreadcrumbHandle>\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"file-text\">Edit Profile</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUnique({\n\t\twhere: { id: userId },\n\t\tselect: { username: true },\n\t})\n\tinvariantResponse(user, 'User not found', { status: 404 })\n\treturn json({})\n}\n\nconst BreadcrumbHandleMatch = z.object({\n\thandle: BreadcrumbHandle,\n})\n\nexport default function EditUserProfile() {\n\tconst user = useUser()\n\tconst matches = useMatches()\n\tconst breadcrumbs = matches\n\t\t.map(m => {\n\t\t\tconst result = BreadcrumbHandleMatch.safeParse(m)\n\t\t\tif (!result.success || !result.data.handle.breadcrumb) return null\n\t\t\treturn (\n\t\t\t\t<Link key={m.id} to={m.pathname} className=\"flex items-center\">\n\t\t\t\t\t{result.data.handle.breadcrumb}\n\t\t\t\t</Link>\n\t\t\t)\n\t\t})\n\t\t.filter(Boolean)\n\n\treturn (\n\t\t<div className=\"m-auto mb-24 mt-16 max-w-3xl\">\n\t\t\t<div className=\"container\">\n\t\t\t\t<ul className=\"flex gap-3\">\n\t\t\t\t\t<li>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tclassName=\"text-muted-foreground\"\n\t\t\t\t\t\t\tto={`/users/${user.username}`}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tProfile\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</li>\n\t\t\t\t\t{breadcrumbs.map((breadcrumb, i, arr) => (\n\t\t\t\t\t\t<li\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\tclassName={cn('flex items-center gap-3', {\n\t\t\t\t\t\t\t\t'text-muted-foreground': i < arr.length - 1,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\u25B6\uFE0F {breadcrumb}\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t</div>\n\t\t\t<Spacer size=\"xs\" />\n\t\t\t<main className=\"mx-auto bg-muted px-6 py-8 md:container md:rounded-3xl\">\n\t\t\t\t<Outlet />\n\t\t\t</main>\n\t\t</div>\n\t)\n}\n", "import { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport {\n\tjson,\n\ttype DataFunctionArgs,\n\ttype SerializeFrom,\n\ttype HeadersFunction,\n} from '@remix-run/node'\nimport { useFetcher, useLoaderData } from '@remix-run/react'\nimport { useState } from 'react'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport {\n\tTooltip,\n\tTooltipContent,\n\tTooltipProvider,\n\tTooltipTrigger,\n} from '#app/components/ui/tooltip.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { resolveConnectionData } from '#app/utils/connections.server.ts'\nimport {\n\tProviderConnectionForm,\n\ttype ProviderName,\n\tProviderNameSchema,\n\tproviderIcons,\n\tproviderNames,\n} from '#app/utils/connections.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { invariantResponse } from '#app/utils/misc.tsx'\nimport { makeTimings } from '#app/utils/timing.server.ts'\nimport { createToastHeaders } from '#app/utils/toast.server.ts'\nimport { type BreadcrumbHandle } from './profile.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"link-2\">Connections</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nasync function userCanDeleteConnections(userId: string) {\n\tconst user = await prisma.user.findUnique({\n\t\tselect: {\n\t\t\tpassword: { select: { userId: true } },\n\t\t\t_count: { select: { connections: true } },\n\t\t},\n\t\twhere: { id: userId },\n\t})\n\t// user can delete their connections if they have a password\n\tif (user?.password) return true\n\t// users have to have more than one remaining connection to delete one\n\treturn Boolean(user?._count.connections && user?._count.connections > 1)\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst timings = makeTimings('profile connections loader')\n\tconst rawConnections = await prisma.connection.findMany({\n\t\tselect: { id: true, providerName: true, providerId: true, createdAt: true },\n\t\twhere: { userId },\n\t})\n\tconst connections: Array<{\n\t\tproviderName: ProviderName\n\t\tid: string\n\t\tdisplayName: string\n\t\tlink?: string | null\n\t\tcreatedAtFormatted: string\n\t}> = []\n\tfor (const connection of rawConnections) {\n\t\tconst r = ProviderNameSchema.safeParse(connection.providerName)\n\t\tif (!r.success) continue\n\t\tconst providerName = r.data\n\t\tconst connectionData = await resolveConnectionData(\n\t\t\tproviderName,\n\t\t\tconnection.providerId,\n\t\t\t{ timings },\n\t\t)\n\t\tconnections.push({\n\t\t\t...connectionData,\n\t\t\tproviderName,\n\t\t\tid: connection.id,\n\t\t\tcreatedAtFormatted: connection.createdAt.toLocaleString(),\n\t\t})\n\t}\n\n\treturn json(\n\t\t{\n\t\t\tconnections,\n\t\t\tcanDeleteConnections: await userCanDeleteConnections(userId),\n\t\t},\n\t\t{ headers: { 'Server-Timing': timings.toString() } },\n\t)\n}\n\nexport const headers: HeadersFunction = ({ loaderHeaders }) => {\n\tconst headers = {\n\t\t'Server-Timing': loaderHeaders.get('Server-Timing') ?? '',\n\t}\n\treturn headers\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst formData = await request.formData()\n\tinvariantResponse(\n\t\tformData.get('intent') === 'delete-connection',\n\t\t'Invalid intent',\n\t)\n\tinvariantResponse(\n\t\tawait userCanDeleteConnections(userId),\n\t\t'You cannot delete your last connection unless you have a password.',\n\t)\n\tconst connectionId = formData.get('connectionId')\n\tinvariantResponse(typeof connectionId === 'string', 'Invalid connectionId')\n\tawait prisma.connection.delete({\n\t\twhere: {\n\t\t\tid: connectionId,\n\t\t\tuserId: userId,\n\t\t},\n\t})\n\tconst toastHeaders = await createToastHeaders({\n\t\ttitle: 'Deleted',\n\t\tdescription: 'Your connection has been deleted.',\n\t})\n\treturn json({ status: 'success' } as const, { headers: toastHeaders })\n}\n\nexport default function Connections() {\n\tconst data = useLoaderData<typeof loader>()\n\n\treturn (\n\t\t<div className=\"mx-auto max-w-md\">\n\t\t\t{data.connections.length ? (\n\t\t\t\t<div className=\"flex flex-col gap-2\">\n\t\t\t\t\t<p>Here are your current connections:</p>\n\t\t\t\t\t<ul className=\"flex flex-col gap-4\">\n\t\t\t\t\t\t{data.connections.map(c => (\n\t\t\t\t\t\t\t<li key={c.id}>\n\t\t\t\t\t\t\t\t<Connection\n\t\t\t\t\t\t\t\t\tconnection={c}\n\t\t\t\t\t\t\t\t\tcanDelete={data.canDeleteConnections}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</ul>\n\t\t\t\t</div>\n\t\t\t) : (\n\t\t\t\t<p>You don't have any connections yet.</p>\n\t\t\t)}\n\t\t\t<div className=\"mt-5 flex flex-col gap-5 border-b-2 border-t-2 border-border py-3\">\n\t\t\t\t{providerNames.map(providerName => (\n\t\t\t\t\t<ProviderConnectionForm\n\t\t\t\t\t\tkey={providerName}\n\t\t\t\t\t\ttype=\"Connect\"\n\t\t\t\t\t\tproviderName={providerName}\n\t\t\t\t\t/>\n\t\t\t\t))}\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nfunction Connection({\n\tconnection,\n\tcanDelete,\n}: {\n\tconnection: SerializeFrom<typeof loader>['connections'][number]\n\tcanDelete: boolean\n}) {\n\tconst deleteFetcher = useFetcher<typeof action>()\n\tconst [infoOpen, setInfoOpen] = useState(false)\n\tconst icon = providerIcons[connection.providerName]\n\treturn (\n\t\t<div className=\"flex justify-between gap-2\">\n\t\t\t<span className={`inline-flex items-center gap-1.5`}>\n\t\t\t\t{icon}\n\t\t\t\t<span>\n\t\t\t\t\t{connection.link ? (\n\t\t\t\t\t\t<a href={connection.link} className=\"underline\">\n\t\t\t\t\t\t\t{connection.displayName}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t) : (\n\t\t\t\t\t\tconnection.displayName\n\t\t\t\t\t)}{' '}\n\t\t\t\t\t({connection.createdAtFormatted})\n\t\t\t\t</span>\n\t\t\t</span>\n\t\t\t{canDelete ? (\n\t\t\t\t<deleteFetcher.Form method=\"POST\">\n\t\t\t\t\t<input name=\"connectionId\" value={connection.id} type=\"hidden\" />\n\t\t\t\t\t<TooltipProvider>\n\t\t\t\t\t\t<Tooltip>\n\t\t\t\t\t\t\t<TooltipTrigger asChild>\n\t\t\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\t\t\tname=\"intent\"\n\t\t\t\t\t\t\t\t\tvalue=\"delete-connection\"\n\t\t\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t\t\tsize=\"sm\"\n\t\t\t\t\t\t\t\t\tstatus={\n\t\t\t\t\t\t\t\t\t\tdeleteFetcher.state !== 'idle'\n\t\t\t\t\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t\t\t\t\t: deleteFetcher.data?.status ?? 'idle'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<Icon name=\"cross-1\" />\n\t\t\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t\t<TooltipContent>Disconnect this account</TooltipContent>\n\t\t\t\t\t\t</Tooltip>\n\t\t\t\t\t</TooltipProvider>\n\t\t\t\t</deleteFetcher.Form>\n\t\t\t) : (\n\t\t\t\t<TooltipProvider>\n\t\t\t\t\t<Tooltip open={infoOpen} onOpenChange={setInfoOpen}>\n\t\t\t\t\t\t<TooltipTrigger onClick={() => setInfoOpen(true)}>\n\t\t\t\t\t\t\t<Icon name=\"question-mark-circled\"></Icon>\n\t\t\t\t\t\t</TooltipTrigger>\n\t\t\t\t\t\t<TooltipContent>\n\t\t\t\t\t\t\tYou cannot delete your last connection unless you have a password.\n\t\t\t\t\t\t</TooltipContent>\n\t\t\t\t\t</Tooltip>\n\t\t\t\t</TooltipProvider>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, type DataFunctionArgs } from '@remix-run/node'\nimport { Link, useFetcher, useLoaderData } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { z } from 'zod'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { requireUserId, sessionKey } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport {\n\tgetUserImgSrc,\n\tinvariantResponse,\n\tuseDoubleCheck,\n} from '#app/utils/misc.tsx'\nimport { authSessionStorage } from '#app/utils/session.server.ts'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { NameSchema, UsernameSchema } from '#app/utils/user-validation.ts'\nimport { twoFAVerificationType } from './profile.two-factor.tsx'\n\nexport const handle: SEOHandle = {\n\tgetSitemapEntries: () => null,\n}\n\nconst ProfileFormSchema = z.object({\n\tname: NameSchema.optional(),\n\tusername: UsernameSchema,\n})\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUniqueOrThrow({\n\t\twhere: { id: userId },\n\t\tselect: {\n\t\t\tid: true,\n\t\t\tname: true,\n\t\t\tusername: true,\n\t\t\temail: true,\n\t\t\timage: {\n\t\t\t\tselect: { id: true },\n\t\t\t},\n\t\t\t_count: {\n\t\t\t\tselect: {\n\t\t\t\t\tsessions: {\n\t\t\t\t\t\twhere: {\n\t\t\t\t\t\t\texpirationDate: { gt: new Date() },\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\n\tconst twoFactorVerification = await prisma.verification.findUnique({\n\t\tselect: { id: true },\n\t\twhere: { target_type: { type: twoFAVerificationType, target: userId } },\n\t})\n\n\tconst password = await prisma.password.findUnique({\n\t\tselect: { userId: true },\n\t\twhere: { userId },\n\t})\n\n\treturn json({\n\t\tuser,\n\t\thasPassword: Boolean(password),\n\t\tisTwoFactorEnabled: Boolean(twoFactorVerification),\n\t})\n}\n\ntype ProfileActionArgs = {\n\trequest: Request\n\tuserId: string\n\tformData: FormData\n}\nconst profileUpdateActionIntent = 'update-profile'\nconst signOutOfSessionsActionIntent = 'sign-out-of-sessions'\nconst deleteDataActionIntent = 'delete-data'\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\tconst intent = formData.get('intent')\n\tswitch (intent) {\n\t\tcase profileUpdateActionIntent: {\n\t\t\treturn profileUpdateAction({ request, userId, formData })\n\t\t}\n\t\tcase signOutOfSessionsActionIntent: {\n\t\t\treturn signOutOfSessionsAction({ request, userId, formData })\n\t\t}\n\t\tcase deleteDataActionIntent: {\n\t\t\treturn deleteDataAction({ request, userId, formData })\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Response(`Invalid intent \"${intent}\"`, { status: 400 })\n\t\t}\n\t}\n}\n\nexport default function EditUserProfile() {\n\tconst data = useLoaderData<typeof loader>()\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-12\">\n\t\t\t<div className=\"flex justify-center\">\n\t\t\t\t<div className=\"relative h-52 w-52\">\n\t\t\t\t\t<img\n\t\t\t\t\t\tsrc={getUserImgSrc(data.user.image?.id)}\n\t\t\t\t\t\talt={data.user.username}\n\t\t\t\t\t\tclassName=\"h-full w-full rounded-full object-cover\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tasChild\n\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\tclassName=\"absolute -right-3 top-3 flex h-10 w-10 items-center justify-center rounded-full p-0\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tpreventScrollReset\n\t\t\t\t\t\t\tto=\"photo\"\n\t\t\t\t\t\t\ttitle=\"Change profile photo\"\n\t\t\t\t\t\t\taria-label=\"Change profile photo\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon name=\"camera\" className=\"h-4 w-4\" />\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<UpdateProfile />\n\n\t\t\t<div className=\"col-span-6 my-6 h-1 border-b-[1.5px] border-foreground\" />\n\t\t\t<div className=\"col-span-full flex flex-col gap-6\">\n\t\t\t\t<div>\n\t\t\t\t\t<Link to=\"change-email\">\n\t\t\t\t\t\t<Icon name=\"envelope-closed\">\n\t\t\t\t\t\t\tChange email from {data.user.email}\n\t\t\t\t\t\t</Icon>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Link to=\"two-factor\">\n\t\t\t\t\t\t{data.isTwoFactorEnabled ? (\n\t\t\t\t\t\t\t<Icon name=\"lock-closed\">2FA is enabled</Icon>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Icon name=\"lock-open-1\">Enable 2FA</Icon>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Link to={data.hasPassword ? 'password' : 'password/create'}>\n\t\t\t\t\t\t<Icon name=\"dots-horizontal\">\n\t\t\t\t\t\t\t{data.hasPassword ? 'Change Password' : 'Create a Password'}\n\t\t\t\t\t\t</Icon>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Link to=\"connections\">\n\t\t\t\t\t\t<Icon name=\"link-2\">Manage connections</Icon>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<Link\n\t\t\t\t\t\treloadDocument\n\t\t\t\t\t\tdownload=\"my-epic-notes-data.json\"\n\t\t\t\t\t\tto=\"/resources/download-user-data\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon name=\"download\">Download your data</Icon>\n\t\t\t\t\t</Link>\n\t\t\t\t</div>\n\t\t\t\t<SignOutOfSessions />\n\t\t\t\t<DeleteData />\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nasync function profileUpdateAction({ userId, formData }: ProfileActionArgs) {\n\tconst submission = await parse(formData, {\n\t\tasync: true,\n\t\tschema: ProfileFormSchema.superRefine(async ({ username }, ctx) => {\n\t\t\tconst existingUsername = await prisma.user.findUnique({\n\t\t\t\twhere: { username },\n\t\t\t\tselect: { id: true },\n\t\t\t})\n\t\t\tif (existingUsername && existingUsername.id !== userId) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tpath: ['username'],\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: 'A user already exists with this username',\n\t\t\t\t})\n\t\t\t}\n\t\t}),\n\t})\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst data = submission.value\n\n\tawait prisma.user.update({\n\t\tselect: { username: true },\n\t\twhere: { id: userId },\n\t\tdata: {\n\t\t\tname: data.name,\n\t\t\tusername: data.username,\n\t\t},\n\t})\n\n\treturn json({ status: 'success', submission } as const)\n}\n\nfunction UpdateProfile() {\n\tconst data = useLoaderData<typeof loader>()\n\n\tconst fetcher = useFetcher<typeof profileUpdateAction>()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'edit-profile',\n\t\tconstraint: getFieldsetConstraint(ProfileFormSchema),\n\t\tlastSubmission: fetcher.data?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: ProfileFormSchema })\n\t\t},\n\t\tdefaultValue: {\n\t\t\tusername: data.user.username,\n\t\t\tname: data.user.name ?? '',\n\t\t\temail: data.user.email,\n\t\t},\n\t})\n\n\treturn (\n\t\t<fetcher.Form method=\"POST\" {...form.props}>\n\t\t\t<AuthenticityTokenInput />\n\t\t\t<div className=\"grid grid-cols-6 gap-x-10\">\n\t\t\t\t<Field\n\t\t\t\t\tclassName=\"col-span-3\"\n\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\thtmlFor: fields.username.id,\n\t\t\t\t\t\tchildren: 'Username',\n\t\t\t\t\t}}\n\t\t\t\t\tinputProps={conform.input(fields.username)}\n\t\t\t\t\terrors={fields.username.errors}\n\t\t\t\t/>\n\t\t\t\t<Field\n\t\t\t\t\tclassName=\"col-span-3\"\n\t\t\t\t\tlabelProps={{ htmlFor: fields.name.id, children: 'Name' }}\n\t\t\t\t\tinputProps={conform.input(fields.name)}\n\t\t\t\t\terrors={fields.name.errors}\n\t\t\t\t/>\n\t\t\t</div>\n\n\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\n\t\t\t<div className=\"mt-8 flex justify-center\">\n\t\t\t\t<StatusButton\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tsize=\"wide\"\n\t\t\t\t\tname=\"intent\"\n\t\t\t\t\tvalue={profileUpdateActionIntent}\n\t\t\t\t\tstatus={\n\t\t\t\t\t\tfetcher.state !== 'idle'\n\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t: fetcher.data?.status ?? 'idle'\n\t\t\t\t\t}\n\t\t\t\t>\n\t\t\t\t\tSave changes\n\t\t\t\t</StatusButton>\n\t\t\t</div>\n\t\t</fetcher.Form>\n\t)\n}\n\nasync function signOutOfSessionsAction({ request, userId }: ProfileActionArgs) {\n\tconst authSession = await authSessionStorage.getSession(\n\t\trequest.headers.get('cookie'),\n\t)\n\tconst sessionId = authSession.get(sessionKey)\n\tinvariantResponse(\n\t\tsessionId,\n\t\t'You must be authenticated to sign out of other sessions',\n\t)\n\tawait prisma.session.deleteMany({\n\t\twhere: {\n\t\t\tuserId,\n\t\t\tid: { not: sessionId },\n\t\t},\n\t})\n\treturn json({ status: 'success' } as const)\n}\n\nfunction SignOutOfSessions() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst dc = useDoubleCheck()\n\n\tconst fetcher = useFetcher<typeof signOutOfSessionsAction>()\n\tconst otherSessionsCount = data.user._count.sessions - 1\n\treturn (\n\t\t<div>\n\t\t\t{otherSessionsCount ? (\n\t\t\t\t<fetcher.Form method=\"POST\">\n\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t{...dc.getButtonProps({\n\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\tname: 'intent',\n\t\t\t\t\t\t\tvalue: signOutOfSessionsActionIntent,\n\t\t\t\t\t\t})}\n\t\t\t\t\t\tvariant={dc.doubleCheck ? 'destructive' : 'default'}\n\t\t\t\t\t\tstatus={\n\t\t\t\t\t\t\tfetcher.state !== 'idle'\n\t\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t\t: fetcher.data?.status ?? 'idle'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon name=\"avatar\">\n\t\t\t\t\t\t\t{dc.doubleCheck\n\t\t\t\t\t\t\t\t? `Are you sure?`\n\t\t\t\t\t\t\t\t: `Sign out of ${otherSessionsCount} other sessions`}\n\t\t\t\t\t\t</Icon>\n\t\t\t\t\t</StatusButton>\n\t\t\t\t</fetcher.Form>\n\t\t\t) : (\n\t\t\t\t<Icon name=\"avatar\">This is your only session</Icon>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n\nasync function deleteDataAction({ userId }: ProfileActionArgs) {\n\tawait prisma.user.delete({ where: { id: userId } })\n\treturn redirectWithToast('/', {\n\t\ttype: 'success',\n\t\ttitle: 'Data Deleted',\n\t\tdescription: 'All of your data has been deleted',\n\t})\n}\n\nfunction DeleteData() {\n\tconst dc = useDoubleCheck()\n\n\tconst fetcher = useFetcher<typeof deleteDataAction>()\n\treturn (\n\t\t<div>\n\t\t\t<fetcher.Form method=\"POST\">\n\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t<StatusButton\n\t\t\t\t\t{...dc.getButtonProps({\n\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\tname: 'intent',\n\t\t\t\t\t\tvalue: deleteDataActionIntent,\n\t\t\t\t\t})}\n\t\t\t\t\tvariant={dc.doubleCheck ? 'destructive' : 'default'}\n\t\t\t\t\tstatus={fetcher.state !== 'idle' ? 'pending' : 'idle'}\n\t\t\t\t>\n\t\t\t\t\t<Icon name=\"trash\">\n\t\t\t\t\t\t{dc.doubleCheck ? `Are you sure?` : `Delete all your data`}\n\t\t\t\t\t</Icon>\n\t\t\t\t</StatusButton>\n\t\t\t</fetcher.Form>\n\t\t</div>\n\t)\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { Form, Link, useActionData } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { z } from 'zod'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport {\n\tgetPasswordHash,\n\trequireUserId,\n\tverifyUserPassword,\n} from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { useIsPending } from '#app/utils/misc.tsx'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { PasswordSchema } from '#app/utils/user-validation.ts'\nimport { type BreadcrumbHandle } from './profile.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"dots-horizontal\">Password</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nconst ChangePasswordForm = z\n\t.object({\n\t\tcurrentPassword: PasswordSchema,\n\t\tnewPassword: PasswordSchema,\n\t\tconfirmNewPassword: PasswordSchema,\n\t})\n\t.superRefine(({ confirmNewPassword, newPassword }, ctx) => {\n\t\tif (confirmNewPassword !== newPassword) {\n\t\t\tctx.addIssue({\n\t\t\t\tpath: ['confirmNewPassword'],\n\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\tmessage: 'The passwords must match',\n\t\t\t})\n\t\t}\n\t})\n\nasync function requirePassword(userId: string) {\n\tconst password = await prisma.password.findUnique({\n\t\tselect: { userId: true },\n\t\twhere: { userId },\n\t})\n\tif (!password) {\n\t\tthrow redirect('/settings/profile/password/create')\n\t}\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tawait requirePassword(userId)\n\treturn json({})\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tawait requirePassword(userId)\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\tconst submission = await parse(formData, {\n\t\tasync: true,\n\t\tschema: ChangePasswordForm.superRefine(\n\t\t\tasync ({ currentPassword, newPassword }, ctx) => {\n\t\t\t\tif (currentPassword && newPassword) {\n\t\t\t\t\tconst user = await verifyUserPassword({ id: userId }, currentPassword)\n\t\t\t\t\tif (!user) {\n\t\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\t\tpath: ['currentPassword'],\n\t\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\t\tmessage: 'Incorrect password.',\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t),\n\t})\n\t// clear the payload so we don't send the password back to the client\n\tsubmission.payload = {}\n\tif (submission.intent !== 'submit') {\n\t\t// clear the value so we don't send the password back to the client\n\t\tsubmission.value = undefined\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst { newPassword } = submission.value\n\n\tawait prisma.user.update({\n\t\tselect: { username: true },\n\t\twhere: { id: userId },\n\t\tdata: {\n\t\t\tpassword: {\n\t\t\t\tupdate: {\n\t\t\t\t\thash: await getPasswordHash(newPassword),\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\n\treturn redirectWithToast(\n\t\t`/settings/profile`,\n\t\t{\n\t\t\ttype: 'success',\n\t\t\ttitle: 'Password Changed',\n\t\t\tdescription: 'Your password has been changed.',\n\t\t},\n\t\t{ status: 302 },\n\t)\n}\n\nexport default function ChangePasswordRoute() {\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'password-change-form',\n\t\tconstraint: getFieldsetConstraint(ChangePasswordForm),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: ChangePasswordForm })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<Form method=\"POST\" {...form.props} className=\"mx-auto max-w-md\">\n\t\t\t<AuthenticityTokenInput />\n\t\t\t<Field\n\t\t\t\tlabelProps={{ children: 'Current Password' }}\n\t\t\t\tinputProps={conform.input(fields.currentPassword, { type: 'password' })}\n\t\t\t\terrors={fields.currentPassword.errors}\n\t\t\t/>\n\t\t\t<Field\n\t\t\t\tlabelProps={{ children: 'New Password' }}\n\t\t\t\tinputProps={conform.input(fields.newPassword, { type: 'password' })}\n\t\t\t\terrors={fields.newPassword.errors}\n\t\t\t/>\n\t\t\t<Field\n\t\t\t\tlabelProps={{ children: 'Confirm New Password' }}\n\t\t\t\tinputProps={conform.input(fields.confirmNewPassword, {\n\t\t\t\t\ttype: 'password',\n\t\t\t\t})}\n\t\t\t\terrors={fields.confirmNewPassword.errors}\n\t\t\t/>\n\t\t\t<ErrorList id={form.errorId} errors={form.errors} />\n\t\t\t<div className=\"grid w-full grid-cols-2 gap-6\">\n\t\t\t\t<Button variant=\"secondary\" asChild>\n\t\t\t\t\t<Link to=\"..\">Cancel</Link>\n\t\t\t\t</Button>\n\t\t\t\t<StatusButton\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t>\n\t\t\t\t\tChange Password\n\t\t\t\t</StatusButton>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { Form, Link, useActionData } from '@remix-run/react'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { getPasswordHash, requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { useIsPending } from '#app/utils/misc.tsx'\nimport { PasswordAndConfirmPasswordSchema } from '#app/utils/user-validation.ts'\nimport { type BreadcrumbHandle } from './profile.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"dots-horizontal\">Password</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nconst CreatePasswordForm = PasswordAndConfirmPasswordSchema\n\nasync function requireNoPassword(userId: string) {\n\tconst password = await prisma.password.findUnique({\n\t\tselect: { userId: true },\n\t\twhere: { userId },\n\t})\n\tif (password) {\n\t\tthrow redirect('/settings/profile/password')\n\t}\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tawait requireNoPassword(userId)\n\treturn json({})\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tawait requireNoPassword(userId)\n\tconst formData = await request.formData()\n\tconst submission = await parse(formData, {\n\t\tasync: true,\n\t\tschema: CreatePasswordForm,\n\t})\n\t// clear the payload so we don't send the password back to the client\n\tsubmission.payload = {}\n\tif (submission.intent !== 'submit') {\n\t\t// clear the value so we don't send the password back to the client\n\t\tsubmission.value = undefined\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst { password } = submission.value\n\n\tawait prisma.user.update({\n\t\tselect: { username: true },\n\t\twhere: { id: userId },\n\t\tdata: {\n\t\t\tpassword: {\n\t\t\t\tcreate: {\n\t\t\t\t\thash: await getPasswordHash(password),\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\n\treturn redirect(`/settings/profile`, { status: 302 })\n}\n\nexport default function CreatePasswordRoute() {\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'password-create-form',\n\t\tconstraint: getFieldsetConstraint(CreatePasswordForm),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: CreatePasswordForm })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\treturn (\n\t\t<Form method=\"POST\" {...form.props} className=\"mx-auto max-w-md\">\n\t\t\t<Field\n\t\t\t\tlabelProps={{ children: 'New Password' }}\n\t\t\t\tinputProps={conform.input(fields.password, { type: 'password' })}\n\t\t\t\terrors={fields.password.errors}\n\t\t\t/>\n\t\t\t<Field\n\t\t\t\tlabelProps={{ children: 'Confirm New Password' }}\n\t\t\t\tinputProps={conform.input(fields.confirmPassword, {\n\t\t\t\t\ttype: 'password',\n\t\t\t\t})}\n\t\t\t\terrors={fields.confirmPassword.errors}\n\t\t\t/>\n\t\t\t<ErrorList id={form.errorId} errors={form.errors} />\n\t\t\t<div className=\"grid w-full grid-cols-2 gap-6\">\n\t\t\t\t<Button variant=\"secondary\" asChild>\n\t\t\t\t\t<Link to=\"..\">Cancel</Link>\n\t\t\t\t</Button>\n\t\t\t\t<StatusButton\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\t>\n\t\t\t\t\tCreate Password\n\t\t\t\t</StatusButton>\n\t\t\t</div>\n\t\t</Form>\n\t)\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport {\n\tjson,\n\tredirect,\n\tunstable_createMemoryUploadHandler,\n\tunstable_parseMultipartFormData,\n\ttype DataFunctionArgs,\n} from '@remix-run/node'\nimport {\n\tForm,\n\tuseActionData,\n\tuseLoaderData,\n\tuseNavigation,\n} from '@remix-run/react'\nimport { useState } from 'react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { z } from 'zod'\nimport { ErrorList } from '#app/components/forms.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport {\n\tgetUserImgSrc,\n\tinvariantResponse,\n\tuseDoubleCheck,\n\tuseIsPending,\n} from '#app/utils/misc.tsx'\nimport { type BreadcrumbHandle } from './profile.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"avatar\">Photo</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nconst MAX_SIZE = 1024 * 1024 * 3 // 3MB\n\nconst DeleteImageSchema = z.object({\n\tintent: z.literal('delete'),\n})\n\nconst NewImageSchema = z.object({\n\tintent: z.literal('submit'),\n\tphotoFile: z\n\t\t.instanceof(File)\n\t\t.refine(file => file.size > 0, 'Image is required')\n\t\t.refine(file => file.size <= MAX_SIZE, 'Image size must be less than 3MB'),\n})\n\nconst PhotoFormSchema = z.union([DeleteImageSchema, NewImageSchema])\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst user = await prisma.user.findUnique({\n\t\twhere: { id: userId },\n\t\tselect: {\n\t\t\tid: true,\n\t\t\tname: true,\n\t\t\tusername: true,\n\t\t\timage: { select: { id: true } },\n\t\t},\n\t})\n\tinvariantResponse(user, 'User not found', { status: 404 })\n\treturn json({ user })\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst formData = await unstable_parseMultipartFormData(\n\t\trequest,\n\t\tunstable_createMemoryUploadHandler({ maxPartSize: MAX_SIZE }),\n\t)\n\tawait validateCSRF(formData, request.headers)\n\n\tconst submission = await parse(formData, {\n\t\tschema: PhotoFormSchema.transform(async data => {\n\t\t\tif (data.intent === 'delete') return { intent: 'delete' }\n\t\t\tif (data.photoFile.size <= 0) return z.NEVER\n\t\t\treturn {\n\t\t\t\tintent: data.intent,\n\t\t\t\timage: {\n\t\t\t\t\tcontentType: data.photoFile.type,\n\t\t\t\t\tblob: Buffer.from(await data.photoFile.arrayBuffer()),\n\t\t\t\t},\n\t\t\t}\n\t\t}),\n\t\tasync: true,\n\t})\n\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst { image, intent } = submission.value\n\n\tif (intent === 'delete') {\n\t\tawait prisma.userImage.deleteMany({ where: { userId } })\n\t\treturn redirect('/settings/profile')\n\t}\n\n\tawait prisma.$transaction(async $prisma => {\n\t\tawait $prisma.userImage.deleteMany({ where: { userId } })\n\t\tawait $prisma.user.update({\n\t\t\twhere: { id: userId },\n\t\t\tdata: { image: { create: image } },\n\t\t})\n\t})\n\n\treturn redirect('/settings/profile')\n}\n\nexport default function PhotoRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\n\tconst doubleCheckDeleteImage = useDoubleCheck()\n\n\tconst actionData = useActionData<typeof action>()\n\tconst navigation = useNavigation()\n\n\tconst [form, fields] = useForm({\n\t\tid: 'profile-photo',\n\t\tconstraint: getFieldsetConstraint(PhotoFormSchema),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\t// otherwise, the best error zod gives us is \"Invalid input\" which is not\n\t\t\t// enough\n\t\t\tif (formData.get('intent') === 'delete') {\n\t\t\t\treturn parse(formData, { schema: DeleteImageSchema })\n\t\t\t}\n\t\t\treturn parse(formData, { schema: NewImageSchema })\n\t\t},\n\t\tshouldRevalidate: 'onBlur',\n\t})\n\n\tconst isPending = useIsPending()\n\tconst pendingIntent = isPending ? navigation.formData?.get('intent') : null\n\tconst lastSubmissionIntent = actionData?.submission.value?.intent\n\n\tconst [newImageSrc, setNewImageSrc] = useState<string | null>(null)\n\n\treturn (\n\t\t<div>\n\t\t\t<Form\n\t\t\t\tmethod=\"POST\"\n\t\t\t\tencType=\"multipart/form-data\"\n\t\t\t\tclassName=\"flex flex-col items-center justify-center gap-10\"\n\t\t\t\tonReset={() => setNewImageSrc(null)}\n\t\t\t\t{...form.props}\n\t\t\t>\n\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t<img\n\t\t\t\t\tsrc={\n\t\t\t\t\t\tnewImageSrc ?? (data.user ? getUserImgSrc(data.user.image?.id) : '')\n\t\t\t\t\t}\n\t\t\t\t\tclassName=\"h-52 w-52 rounded-full object-cover\"\n\t\t\t\t\talt={data.user?.name ?? data.user?.username}\n\t\t\t\t/>\n\t\t\t\t<ErrorList errors={fields.photoFile.errors} id={fields.photoFile.id} />\n\t\t\t\t<div className=\"flex gap-4\">\n\t\t\t\t\t{/*\n\t\t\t\t\t\tWe're doing some kinda odd things to make it so this works well\n\t\t\t\t\t\twithout JavaScript. Basically, we're using CSS to ensure the right\n\t\t\t\t\t\tbuttons show up based on the input's \"valid\" state (whether or not\n\t\t\t\t\t\tan image has been selected). Progressive enhancement FTW!\n\t\t\t\t\t*/}\n\t\t\t\t\t<input\n\t\t\t\t\t\t{...conform.input(fields.photoFile, { type: 'file' })}\n\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\tclassName=\"peer sr-only\"\n\t\t\t\t\t\trequired\n\t\t\t\t\t\ttabIndex={newImageSrc ? -1 : 0}\n\t\t\t\t\t\tonChange={e => {\n\t\t\t\t\t\t\tconst file = e.currentTarget.files?.[0]\n\t\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\t\tconst reader = new FileReader()\n\t\t\t\t\t\t\t\treader.onload = event => {\n\t\t\t\t\t\t\t\t\tsetNewImageSrc(event.target?.result?.toString() ?? null)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treader.readAsDataURL(file)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tasChild\n\t\t\t\t\t\tclassName=\"cursor-pointer peer-valid:hidden peer-focus-within:ring-4 peer-focus-visible:ring-4\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<label htmlFor={fields.photoFile.id}>\n\t\t\t\t\t\t\t<Icon name=\"pencil-1\">Change</Icon>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</Button>\n\t\t\t\t\t<StatusButton\n\t\t\t\t\t\tname=\"intent\"\n\t\t\t\t\t\tvalue=\"submit\"\n\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\tclassName=\"peer-invalid:hidden\"\n\t\t\t\t\t\tstatus={\n\t\t\t\t\t\t\tpendingIntent === 'submit'\n\t\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t\t: lastSubmissionIntent === 'submit'\n\t\t\t\t\t\t\t\t? actionData?.status ?? 'idle'\n\t\t\t\t\t\t\t\t: 'idle'\n\t\t\t\t\t\t}\n\t\t\t\t\t>\n\t\t\t\t\t\tSave Photo\n\t\t\t\t\t</StatusButton>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype=\"reset\"\n\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\tclassName=\"peer-invalid:hidden\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon name=\"trash\">Reset</Icon>\n\t\t\t\t\t</Button>\n\t\t\t\t\t{data.user.image?.id ? (\n\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\tclassName=\"peer-valid:hidden\"\n\t\t\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\t\t\t{...doubleCheckDeleteImage.getButtonProps({\n\t\t\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t\t\t\tname: 'intent',\n\t\t\t\t\t\t\t\tvalue: 'delete',\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\tstatus={\n\t\t\t\t\t\t\t\tpendingIntent === 'delete'\n\t\t\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t\t\t: lastSubmissionIntent === 'delete'\n\t\t\t\t\t\t\t\t\t? actionData?.status ?? 'idle'\n\t\t\t\t\t\t\t\t\t: 'idle'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon name=\"trash\">\n\t\t\t\t\t\t\t\t{doubleCheckDeleteImage.doubleCheck\n\t\t\t\t\t\t\t\t\t? 'Are you sure?'\n\t\t\t\t\t\t\t\t\t: 'Delete'}\n\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t) : null}\n\t\t\t\t</div>\n\t\t\t\t<ErrorList errors={form.errors} />\n\t\t\t</Form>\n\t\t</div>\n\t)\n}\n", "import { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, type DataFunctionArgs } from '@remix-run/node'\nimport { useFetcher } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { requireRecentVerification } from '#app/routes/_auth+/verify.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { useDoubleCheck } from '#app/utils/misc.tsx'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { type BreadcrumbHandle } from './profile.tsx'\nimport { twoFAVerificationType } from './profile.two-factor.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"lock-open-1\">Disable</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tawait requireRecentVerification(request)\n\treturn json({})\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tawait requireRecentVerification(request)\n\tawait validateCSRF(await request.formData(), request.headers)\n\tconst userId = await requireUserId(request)\n\tawait prisma.verification.delete({\n\t\twhere: { target_type: { target: userId, type: twoFAVerificationType } },\n\t})\n\treturn redirectWithToast('/settings/profile/two-factor', {\n\t\ttitle: '2FA Disabled',\n\t\tdescription: 'Two factor authentication has been disabled.',\n\t})\n}\n\nexport default function TwoFactorDisableRoute() {\n\tconst disable2FAFetcher = useFetcher<typeof action>()\n\tconst dc = useDoubleCheck()\n\n\treturn (\n\t\t<div className=\"mx-auto max-w-sm\">\n\t\t\t<disable2FAFetcher.Form method=\"POST\">\n\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t<p>\n\t\t\t\t\tDisabling two factor authentication is not recommended. However, if\n\t\t\t\t\tyou would like to do so, click here:\n\t\t\t\t</p>\n\t\t\t\t<StatusButton\n\t\t\t\t\tvariant=\"destructive\"\n\t\t\t\t\tstatus={disable2FAFetcher.state === 'loading' ? 'pending' : 'idle'}\n\t\t\t\t\t{...dc.getButtonProps({\n\t\t\t\t\t\tclassName: 'mx-auto',\n\t\t\t\t\t\tname: 'intent',\n\t\t\t\t\t\tvalue: 'disable',\n\t\t\t\t\t\ttype: 'submit',\n\t\t\t\t\t})}\n\t\t\t\t>\n\t\t\t\t\t{dc.doubleCheck ? 'Are you sure?' : 'Disable 2FA'}\n\t\t\t\t</StatusButton>\n\t\t\t</disable2FAFetcher.Form>\n\t\t</div>\n\t)\n}\n", "import { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { Link, useFetcher, useLoaderData } from '@remix-run/react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { generateTOTP } from '#app/utils/totp.server.ts'\nimport { twoFAVerificationType } from './profile.two-factor.tsx'\nimport { twoFAVerifyVerificationType } from './profile.two-factor.verify.tsx'\n\nexport const handle: SEOHandle = {\n\tgetSitemapEntries: () => null,\n}\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst verification = await prisma.verification.findUnique({\n\t\twhere: { target_type: { type: twoFAVerificationType, target: userId } },\n\t\tselect: { id: true },\n\t})\n\treturn json({ is2FAEnabled: Boolean(verification) })\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tawait validateCSRF(await request.formData(), request.headers)\n\tconst { otp: _otp, ...config } = generateTOTP()\n\tconst verificationData = {\n\t\t...config,\n\t\ttype: twoFAVerifyVerificationType,\n\t\ttarget: userId,\n\t}\n\tawait prisma.verification.upsert({\n\t\twhere: {\n\t\t\ttarget_type: { target: userId, type: twoFAVerifyVerificationType },\n\t\t},\n\t\tcreate: verificationData,\n\t\tupdate: verificationData,\n\t})\n\treturn redirect('/settings/profile/two-factor/verify')\n}\n\nexport default function TwoFactorRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst enable2FAFetcher = useFetcher<typeof action>()\n\n\treturn (\n\t\t<div className=\"flex flex-col gap-4\">\n\t\t\t{data.is2FAEnabled ? (\n\t\t\t\t<>\n\t\t\t\t\t<p className=\"text-lg\">\n\t\t\t\t\t\t<Icon name=\"check\">\n\t\t\t\t\t\t\tYou have enabled two-factor authentication.\n\t\t\t\t\t\t</Icon>\n\t\t\t\t\t</p>\n\t\t\t\t\t<Link to=\"disable\">\n\t\t\t\t\t\t<Icon name=\"lock-open-1\">Disable 2FA</Icon>\n\t\t\t\t\t</Link>\n\t\t\t\t</>\n\t\t\t) : (\n\t\t\t\t<>\n\t\t\t\t\t<p>\n\t\t\t\t\t\t<Icon name=\"lock-open-1\">\n\t\t\t\t\t\t\tYou have not enabled two-factor authentication yet.\n\t\t\t\t\t\t</Icon>\n\t\t\t\t\t</p>\n\t\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\t\tTwo factor authentication adds an extra layer of security to your\n\t\t\t\t\t\taccount. You will need to enter a code from an authenticator app\n\t\t\t\t\t\tlike{' '}\n\t\t\t\t\t\t<a className=\"underline\" href=\"https://1password.com/\">\n\t\t\t\t\t\t\t1Password\n\t\t\t\t\t\t</a>{' '}\n\t\t\t\t\t\tto log in.\n\t\t\t\t\t</p>\n\t\t\t\t\t<enable2FAFetcher.Form method=\"POST\">\n\t\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\tname=\"intent\"\n\t\t\t\t\t\t\tvalue=\"enable\"\n\t\t\t\t\t\t\tstatus={enable2FAFetcher.state === 'loading' ? 'pending' : 'idle'}\n\t\t\t\t\t\t\tclassName=\"mx-auto\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tEnable 2FA\n\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t</enable2FAFetcher.Form>\n\t\t\t\t</>\n\t\t\t)}\n\t\t</div>\n\t)\n}\n", "import { conform, useForm } from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { type SEOHandle } from '@nasa-gcn/remix-seo'\nimport { json, redirect, type DataFunctionArgs } from '@remix-run/node'\nimport {\n\tForm,\n\tuseActionData,\n\tuseLoaderData,\n\tuseNavigation,\n} from '@remix-run/react'\nimport * as QRCode from 'qrcode'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { z } from 'zod'\nimport { ErrorList, Field } from '#app/components/forms.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { isCodeValid } from '#app/routes/_auth+/verify.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { getDomainUrl, useIsPending } from '#app/utils/misc.tsx'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { getTOTPAuthUri } from '#app/utils/totp.server.ts'\nimport { type BreadcrumbHandle } from './profile.tsx'\nimport { twoFAVerificationType } from './profile.two-factor.tsx'\n\nexport const handle: BreadcrumbHandle & SEOHandle = {\n\tbreadcrumb: <Icon name=\"check\">Verify</Icon>,\n\tgetSitemapEntries: () => null,\n}\n\nconst CancelSchema = z.object({ intent: z.literal('cancel') })\nconst VerifySchema = z.object({\n\tintent: z.literal('verify'),\n\tcode: z.string().min(6).max(6),\n})\n\nconst ActionSchema = z.union([CancelSchema, VerifySchema])\n\nexport const twoFAVerifyVerificationType = '2fa-verify'\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst verification = await prisma.verification.findUnique({\n\t\twhere: {\n\t\t\ttarget_type: { type: twoFAVerifyVerificationType, target: userId },\n\t\t},\n\t\tselect: {\n\t\t\tid: true,\n\t\t\talgorithm: true,\n\t\t\tsecret: true,\n\t\t\tperiod: true,\n\t\t\tdigits: true,\n\t\t},\n\t})\n\tif (!verification) {\n\t\treturn redirect('/settings/profile/two-factor')\n\t}\n\tconst user = await prisma.user.findUniqueOrThrow({\n\t\twhere: { id: userId },\n\t\tselect: { email: true },\n\t})\n\tconst issuer = new URL(getDomainUrl(request)).host\n\tconst otpUri = getTOTPAuthUri({\n\t\t...verification,\n\t\taccountName: user.email,\n\t\tissuer,\n\t})\n\tconst qrCode = await QRCode.toDataURL(otpUri)\n\treturn json({ otpUri, qrCode })\n}\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\n\tconst submission = await parse(formData, {\n\t\tschema: () =>\n\t\t\tActionSchema.superRefine(async (data, ctx) => {\n\t\t\t\tif (data.intent === 'cancel') return null\n\t\t\t\tconst codeIsValid = await isCodeValid({\n\t\t\t\t\tcode: data.code,\n\t\t\t\t\ttype: twoFAVerifyVerificationType,\n\t\t\t\t\ttarget: userId,\n\t\t\t\t})\n\t\t\t\tif (!codeIsValid) {\n\t\t\t\t\tctx.addIssue({\n\t\t\t\t\t\tpath: ['code'],\n\t\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\t\tmessage: `Invalid code`,\n\t\t\t\t\t})\n\t\t\t\t\treturn z.NEVER\n\t\t\t\t}\n\t\t\t}),\n\t\tasync: true,\n\t})\n\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tswitch (submission.value.intent) {\n\t\tcase 'cancel': {\n\t\t\tawait prisma.verification.deleteMany({\n\t\t\t\twhere: { type: twoFAVerifyVerificationType, target: userId },\n\t\t\t})\n\t\t\treturn redirect('/settings/profile/two-factor')\n\t\t}\n\t\tcase 'verify': {\n\t\t\tawait prisma.verification.update({\n\t\t\t\twhere: {\n\t\t\t\t\ttarget_type: { type: twoFAVerifyVerificationType, target: userId },\n\t\t\t\t},\n\t\t\t\tdata: { type: twoFAVerificationType },\n\t\t\t})\n\t\t\treturn redirectWithToast('/settings/profile/two-factor', {\n\t\t\t\ttype: 'success',\n\t\t\t\ttitle: 'Enabled',\n\t\t\t\tdescription: 'Two-factor authentication has been enabled.',\n\t\t\t})\n\t\t}\n\t}\n}\n\nexport default function TwoFactorRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst actionData = useActionData<typeof action>()\n\tconst navigation = useNavigation()\n\n\tconst isPending = useIsPending()\n\tconst pendingIntent = isPending ? navigation.formData?.get('intent') : null\n\tconst lastSubmissionIntent = actionData?.submission.value?.intent\n\n\tconst [form, fields] = useForm({\n\t\tid: 'verify-form',\n\t\tconstraint: getFieldsetConstraint(ActionSchema),\n\t\tlastSubmission: actionData?.submission,\n\t\tonValidate({ formData }) {\n\t\t\t// otherwise, the best error zod gives us is \"Invalid input\" which is not\n\t\t\t// enough\n\t\t\tif (formData.get('intent') === 'cancel') {\n\t\t\t\treturn parse(formData, { schema: CancelSchema })\n\t\t\t}\n\t\t\treturn parse(formData, { schema: VerifySchema })\n\t\t},\n\t})\n\n\treturn (\n\t\t<div>\n\t\t\t<div className=\"flex flex-col items-center gap-4\">\n\t\t\t\t<img alt=\"qr code\" src={data.qrCode} className=\"h-56 w-56\" />\n\t\t\t\t<p>Scan this QR code with your authenticator app.</p>\n\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\tIf you cannot scan the QR code, you can manually add this account to\n\t\t\t\t\tyour authenticator app using this code:\n\t\t\t\t</p>\n\t\t\t\t<div className=\"p-3\">\n\t\t\t\t\t<pre\n\t\t\t\t\t\tclassName=\"whitespace-pre-wrap break-all text-sm\"\n\t\t\t\t\t\taria-label=\"One-time Password URI\"\n\t\t\t\t\t>\n\t\t\t\t\t\t{data.otpUri}\n\t\t\t\t\t</pre>\n\t\t\t\t</div>\n\t\t\t\t<p className=\"text-sm\">\n\t\t\t\t\tOnce you've added the account, enter the code from your authenticator\n\t\t\t\t\tapp below. Once you enable 2FA, you will need to enter a code from\n\t\t\t\t\tyour authenticator app every time you log in or perform important\n\t\t\t\t\tactions. Do not lose access to your authenticator app, or you will\n\t\t\t\t\tlose access to your account.\n\t\t\t\t</p>\n\t\t\t\t<div className=\"flex w-full max-w-xs flex-col justify-center gap-4\">\n\t\t\t\t\t<Form method=\"POST\" {...form.props} className=\"flex-1\">\n\t\t\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t\t\t<Field\n\t\t\t\t\t\t\tlabelProps={{\n\t\t\t\t\t\t\t\thtmlFor: fields.code.id,\n\t\t\t\t\t\t\t\tchildren: 'Code',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tinputProps={{ ...conform.input(fields.code), autoFocus: true }}\n\t\t\t\t\t\t\terrors={fields.code.errors}\n\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t<div className=\"min-h-[32px] px-4 pb-3 pt-1\">\n\t\t\t\t\t\t\t<ErrorList id={form.errorId} errors={form.errors} />\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className=\"flex justify-between gap-4\">\n\t\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\tstatus={\n\t\t\t\t\t\t\t\t\tpendingIntent === 'verify'\n\t\t\t\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t\t\t\t: lastSubmissionIntent === 'verify'\n\t\t\t\t\t\t\t\t\t\t? actionData?.status ?? 'idle'\n\t\t\t\t\t\t\t\t\t\t: 'idle'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tname=\"intent\"\n\t\t\t\t\t\t\t\tvalue=\"verify\"\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tSubmit\n\t\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t\t\t<StatusButton\n\t\t\t\t\t\t\t\tclassName=\"w-full\"\n\t\t\t\t\t\t\t\tvariant=\"secondary\"\n\t\t\t\t\t\t\t\tstatus={\n\t\t\t\t\t\t\t\t\tpendingIntent === 'cancel'\n\t\t\t\t\t\t\t\t\t\t? 'pending'\n\t\t\t\t\t\t\t\t\t\t: lastSubmissionIntent === 'cancel'\n\t\t\t\t\t\t\t\t\t\t? actionData?.status ?? 'idle'\n\t\t\t\t\t\t\t\t\t\t: 'idle'\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\tname=\"intent\"\n\t\t\t\t\t\t\t\tvalue=\"cancel\"\n\t\t\t\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</StatusButton>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Form>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n", "import { json, type DataFunctionArgs } from '@remix-run/node'\nimport { Form, Link, useLoaderData, type MetaFunction } from '@remix-run/react'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { Spacer } from '#app/components/spacer.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { getUserImgSrc, invariantResponse } from '#app/utils/misc.tsx'\nimport { useOptionalUser } from '#app/utils/user.ts'\n\nexport async function loader({ params }: DataFunctionArgs) {\n\tconst user = await prisma.user.findFirst({\n\t\tselect: {\n\t\t\tid: true,\n\t\t\tname: true,\n\t\t\tusername: true,\n\t\t\tcreatedAt: true,\n\t\t\timage: { select: { id: true } },\n\t\t},\n\t\twhere: {\n\t\t\tusername: params.username,\n\t\t},\n\t})\n\n\tinvariantResponse(user, 'User not found', { status: 404 })\n\n\treturn json({ user, userJoinedDisplay: user.createdAt.toLocaleDateString() })\n}\n\nexport default function ProfileRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst user = data.user\n\tconst userDisplayName = user.name ?? user.username\n\tconst loggedInUser = useOptionalUser()\n\tconst isLoggedInUser = data.user.id === loggedInUser?.id\n\n\treturn (\n\t\t<div className=\"container mb-48 mt-36 flex flex-col items-center justify-center\">\n\t\t\t<Spacer size=\"4xs\" />\n\n\t\t\t<div className=\"container flex flex-col items-center rounded-3xl bg-muted p-12\">\n\t\t\t\t<div className=\"relative w-52\">\n\t\t\t\t\t<div className=\"absolute -top-40\">\n\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={getUserImgSrc(data.user.image?.id)}\n\t\t\t\t\t\t\t\talt={userDisplayName}\n\t\t\t\t\t\t\t\tclassName=\"h-52 w-52 rounded-full object-cover\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\n\t\t\t\t<Spacer size=\"sm\" />\n\n\t\t\t\t<div className=\"flex flex-col items-center\">\n\t\t\t\t\t<div className=\"flex flex-wrap items-center justify-center gap-4\">\n\t\t\t\t\t\t<h1 className=\"text-center text-h2\">{userDisplayName}</h1>\n\t\t\t\t\t</div>\n\t\t\t\t\t<p className=\"mt-2 text-center text-muted-foreground\">\n\t\t\t\t\t\tJoined {data.userJoinedDisplay}\n\t\t\t\t\t</p>\n\t\t\t\t\t{isLoggedInUser ? (\n\t\t\t\t\t\t<Form action=\"/logout\" method=\"POST\" className=\"mt-3\">\n\t\t\t\t\t\t\t<Button type=\"submit\" variant=\"link\" size=\"pill\">\n\t\t\t\t\t\t\t\t<Icon name=\"exit\" className=\"scale-125 max-md:scale-150\">\n\t\t\t\t\t\t\t\t\tLogout\n\t\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</Form>\n\t\t\t\t\t) : null}\n\t\t\t\t\t<div className=\"mt-10 flex gap-4\">\n\t\t\t\t\t\t{isLoggedInUser ? (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<Button asChild>\n\t\t\t\t\t\t\t\t\t<Link to=\"notes\" prefetch=\"intent\">\n\t\t\t\t\t\t\t\t\t\tMy notes\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t<Button asChild>\n\t\t\t\t\t\t\t\t\t<Link to=\"/settings/profile\" prefetch=\"intent\">\n\t\t\t\t\t\t\t\t\t\tEdit profile\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t<Button asChild>\n\t\t\t\t\t\t\t\t<Link to=\"notes\" prefetch=\"intent\">\n\t\t\t\t\t\t\t\t\t{userDisplayName}'s notes\n\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nexport const meta: MetaFunction<typeof loader> = ({ data, params }) => {\n\tconst displayName = data?.user.name ?? params.username\n\treturn [\n\t\t{ title: `${displayName} | Epic Notes` },\n\t\t{\n\t\t\tname: 'description',\n\t\t\tcontent: `Profile of ${displayName} on Epic Notes`,\n\t\t},\n\t]\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No user with the username \"{params.username}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n", "import { json, type DataFunctionArgs } from '@remix-run/node'\nimport { Link, NavLink, Outlet, useLoaderData } from '@remix-run/react'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn, getUserImgSrc, invariantResponse } from '#app/utils/misc.tsx'\nimport { useOptionalUser } from '#app/utils/user.ts'\n\nexport async function loader({ params }: DataFunctionArgs) {\n\tconst owner = await prisma.user.findFirst({\n\t\tselect: {\n\t\t\tid: true,\n\t\t\tname: true,\n\t\t\tusername: true,\n\t\t\timage: { select: { id: true } },\n\t\t\tnotes: { select: { id: true, title: true } },\n\t\t},\n\t\twhere: { username: params.username },\n\t})\n\n\tinvariantResponse(owner, 'Owner not found', { status: 404 })\n\n\treturn json({ owner })\n}\n\nexport default function NotesRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst user = useOptionalUser()\n\tconst isOwner = user?.id === data.owner.id\n\tconst ownerDisplayName = data.owner.name ?? data.owner.username\n\tconst navLinkDefaultClassName =\n\t\t'line-clamp-2 block rounded-l-full py-2 pl-8 pr-6 text-base lg:text-xl'\n\treturn (\n\t\t<main className=\"container flex h-full min-h-[400px] px-0 pb-12 md:px-8\">\n\t\t\t<div className=\"grid w-full grid-cols-4 bg-muted pl-2 md:container md:mx-2 md:rounded-3xl md:pr-0\">\n\t\t\t\t<div className=\"relative col-span-1\">\n\t\t\t\t\t<div className=\"absolute inset-0 flex flex-col\">\n\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\tto={`/users/${data.owner.username}`}\n\t\t\t\t\t\t\tclassName=\"flex flex-col items-center justify-center gap-2 bg-muted pb-4 pl-8 pr-4 pt-12 lg:flex-row lg:justify-start lg:gap-4\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\tsrc={getUserImgSrc(data.owner.image?.id)}\n\t\t\t\t\t\t\t\talt={ownerDisplayName}\n\t\t\t\t\t\t\t\tclassName=\"h-16 w-16 rounded-full object-cover lg:h-24 lg:w-24\"\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<h1 className=\"text-center text-base font-bold md:text-lg lg:text-left lg:text-2xl\">\n\t\t\t\t\t\t\t\t{ownerDisplayName}'s Notes\n\t\t\t\t\t\t\t</h1>\n\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t<ul className=\"overflow-y-auto overflow-x-hidden pb-12\">\n\t\t\t\t\t\t\t{isOwner ? (\n\t\t\t\t\t\t\t\t<li className=\"p-1 pr-0\">\n\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\tto=\"new\"\n\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\n\t\t\t\t\t\t\t\t\t\t\tcn(navLinkDefaultClassName, isActive && 'bg-accent')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<Icon name=\"plus\">New Note</Icon>\n\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t{data.owner.notes.map(note => (\n\t\t\t\t\t\t\t\t<li key={note.id} className=\"p-1 pr-0\">\n\t\t\t\t\t\t\t\t\t<NavLink\n\t\t\t\t\t\t\t\t\t\tto={note.id}\n\t\t\t\t\t\t\t\t\t\tpreventScrollReset\n\t\t\t\t\t\t\t\t\t\tprefetch=\"intent\"\n\t\t\t\t\t\t\t\t\t\tclassName={({ isActive }) =>\n\t\t\t\t\t\t\t\t\t\t\tcn(navLinkDefaultClassName, isActive && 'bg-accent')\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{note.title}\n\t\t\t\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"relative col-span-3 bg-accent md:rounded-r-3xl\">\n\t\t\t\t\t<Outlet />\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</main>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No user with the username \"{params.username}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n", "import { useForm } from '@conform-to/react'\nimport { parse } from '@conform-to/zod'\nimport { json, type DataFunctionArgs } from '@remix-run/node'\nimport {\n\tForm,\n\tLink,\n\tuseActionData,\n\tuseLoaderData,\n\ttype MetaFunction,\n} from '@remix-run/react'\nimport { formatDistanceToNow } from 'date-fns'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { floatingToolbarClassName } from '#app/components/floating-toolbar.tsx'\nimport { ErrorList } from '#app/components/forms.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport {\n\tgetNoteImgSrc,\n\tinvariantResponse,\n\tuseIsPending,\n} from '#app/utils/misc.tsx'\nimport {\n\trequireUserWithPermission,\n\tuserHasPermission,\n} from '#app/utils/permissions.ts'\nimport { redirectWithToast } from '#app/utils/toast.server.ts'\nimport { useOptionalUser } from '#app/utils/user.ts'\nimport { type loader as notesLoader } from './notes.tsx'\n\nexport async function loader({ params }: DataFunctionArgs) {\n\tconst note = await prisma.note.findUnique({\n\t\twhere: { id: params.noteId },\n\t\tselect: {\n\t\t\tid: true,\n\t\t\ttitle: true,\n\t\t\tcontent: true,\n\t\t\townerId: true,\n\t\t\tupdatedAt: true,\n\t\t\timages: {\n\t\t\t\tselect: {\n\t\t\t\t\tid: true,\n\t\t\t\t\taltText: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t})\n\n\tinvariantResponse(note, 'Not found', { status: 404 })\n\n\tconst date = new Date(note.updatedAt)\n\tconst timeAgo = formatDistanceToNow(date)\n\n\treturn json({\n\t\tnote,\n\t\ttimeAgo,\n\t})\n}\n\nconst DeleteFormSchema = z.object({\n\tintent: z.literal('delete-note'),\n\tnoteId: z.string(),\n})\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst formData = await request.formData()\n\tawait validateCSRF(formData, request.headers)\n\tconst submission = parse(formData, {\n\t\tschema: DeleteFormSchema,\n\t})\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst { noteId } = submission.value\n\n\tconst note = await prisma.note.findFirst({\n\t\tselect: { id: true, ownerId: true, owner: { select: { username: true } } },\n\t\twhere: { id: noteId },\n\t})\n\tinvariantResponse(note, 'Not found', { status: 404 })\n\n\tconst isOwner = note.ownerId === userId\n\tawait requireUserWithPermission(\n\t\trequest,\n\t\tisOwner ? `delete:note:own` : `delete:note:any`,\n\t)\n\n\tawait prisma.note.delete({ where: { id: note.id } })\n\n\treturn redirectWithToast(`/users/${note.owner.username}/notes`, {\n\t\ttype: 'success',\n\t\ttitle: 'Success',\n\t\tdescription: 'Your note has been deleted.',\n\t})\n}\n\nexport default function NoteRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst user = useOptionalUser()\n\tconst isOwner = user?.id === data.note.ownerId\n\tconst canDelete = userHasPermission(\n\t\tuser,\n\t\tisOwner ? `delete:note:own` : `delete:note:any`,\n\t)\n\tconst displayBar = canDelete || isOwner\n\n\treturn (\n\t\t<div className=\"absolute inset-0 flex flex-col px-10\">\n\t\t\t<h2 className=\"mb-2 pt-12 text-h2 lg:mb-6\">{data.note.title}</h2>\n\t\t\t<div className={`${displayBar ? 'pb-24' : 'pb-12'} overflow-y-auto`}>\n\t\t\t\t<ul className=\"flex flex-wrap gap-5 py-5\">\n\t\t\t\t\t{data.note.images.map(image => (\n\t\t\t\t\t\t<li key={image.id}>\n\t\t\t\t\t\t\t<a href={getNoteImgSrc(image.id)}>\n\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\tsrc={getNoteImgSrc(image.id)}\n\t\t\t\t\t\t\t\t\talt={image.altText ?? ''}\n\t\t\t\t\t\t\t\t\tclassName=\"h-32 w-32 rounded-lg object-cover\"\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t\t))}\n\t\t\t\t</ul>\n\t\t\t\t<p className=\"whitespace-break-spaces text-sm md:text-lg\">\n\t\t\t\t\t{data.note.content}\n\t\t\t\t</p>\n\t\t\t</div>\n\t\t\t{displayBar ? (\n\t\t\t\t<div className={floatingToolbarClassName}>\n\t\t\t\t\t<span className=\"text-sm text-foreground/90 max-[524px]:hidden\">\n\t\t\t\t\t\t<Icon name=\"clock\" className=\"scale-125\">\n\t\t\t\t\t\t\t{data.timeAgo} ago\n\t\t\t\t\t\t</Icon>\n\t\t\t\t\t</span>\n\t\t\t\t\t<div className=\"grid flex-1 grid-cols-2 justify-end gap-2 min-[525px]:flex md:gap-4\">\n\t\t\t\t\t\t{canDelete ? <DeleteNote id={data.note.id} /> : null}\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tasChild\n\t\t\t\t\t\t\tclassName=\"min-[525px]:max-md:aspect-square min-[525px]:max-md:px-0\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Link to=\"edit\">\n\t\t\t\t\t\t\t\t<Icon name=\"pencil-1\" className=\"scale-125 max-md:scale-150\">\n\t\t\t\t\t\t\t\t\t<span className=\"max-md:hidden\">Edit</span>\n\t\t\t\t\t\t\t\t</Icon>\n\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t) : null}\n\t\t</div>\n\t)\n}\n\nexport function DeleteNote({ id }: { id: string }) {\n\tconst actionData = useActionData<typeof action>()\n\tconst isPending = useIsPending()\n\tconst [form] = useForm({\n\t\tid: 'delete-note',\n\t\tlastSubmission: actionData?.submission,\n\t})\n\n\treturn (\n\t\t<Form method=\"POST\" {...form.props}>\n\t\t\t<AuthenticityTokenInput />\n\t\t\t<input type=\"hidden\" name=\"noteId\" value={id} />\n\t\t\t<StatusButton\n\t\t\t\ttype=\"submit\"\n\t\t\t\tname=\"intent\"\n\t\t\t\tvalue=\"delete-note\"\n\t\t\t\tvariant=\"destructive\"\n\t\t\t\tstatus={isPending ? 'pending' : actionData?.status ?? 'idle'}\n\t\t\t\tdisabled={isPending}\n\t\t\t\tclassName=\"w-full max-md:aspect-square max-md:px-0\"\n\t\t\t>\n\t\t\t\t<Icon name=\"trash\" className=\"scale-125 max-md:scale-150\">\n\t\t\t\t\t<span className=\"max-md:hidden\">Delete</span>\n\t\t\t\t</Icon>\n\t\t\t</StatusButton>\n\t\t\t<ErrorList errors={form.errors} id={form.errorId} />\n\t\t</Form>\n\t)\n}\n\nexport const meta: MetaFunction<\n\ttypeof loader,\n\t{ 'routes/users+/$username_+/notes': typeof notesLoader }\n> = ({ data, params, matches }) => {\n\tconst notesMatch = matches.find(\n\t\tm => m.id === 'routes/users+/$username_+/notes',\n\t)\n\tconst displayName = notesMatch?.data?.owner.name ?? params.username\n\tconst noteTitle = data?.note.title ?? 'Note'\n\tconst noteContentsSummary =\n\t\tdata && data.note.content.length > 100\n\t\t\t? data?.note.content.slice(0, 97) + '...'\n\t\t\t: 'No content'\n\treturn [\n\t\t{ title: `${noteTitle} | ${displayName}'s Notes | Epic Notes` },\n\t\t{\n\t\t\tname: 'description',\n\t\t\tcontent: noteContentsSummary,\n\t\t},\n\t]\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t403: () => <p>You are not allowed to do that</p>,\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No note with the id \"{params.noteId}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n", "export const floatingToolbarClassName =\n\t'absolute bottom-3 left-3 right-3 flex items-center gap-2 rounded-lg bg-muted/80 p-4 pl-5 shadow-xl shadow-accent backdrop-blur-sm md:gap-4 md:pl-7 justify-end'\n", "import { json, type DataFunctionArgs } from '@remix-run/node'\nimport { useLoaderData } from '@remix-run/react'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { invariantResponse } from '#app/utils/misc.tsx'\nimport { NoteEditor, action } from './__note-editor.tsx'\n\nexport { action }\n\nexport async function loader({ params, request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\tconst note = await prisma.note.findFirst({\n\t\tselect: {\n\t\t\tid: true,\n\t\t\ttitle: true,\n\t\t\tcontent: true,\n\t\t\timages: {\n\t\t\t\tselect: {\n\t\t\t\t\tid: true,\n\t\t\t\t\taltText: true,\n\t\t\t\t},\n\t\t\t},\n\t\t},\n\t\twhere: {\n\t\t\tid: params.noteId,\n\t\t\townerId: userId,\n\t\t},\n\t})\n\tinvariantResponse(note, 'Not found', { status: 404 })\n\treturn json({ note: note })\n}\n\nexport default function NoteEdit() {\n\tconst data = useLoaderData<typeof loader>()\n\n\treturn <NoteEditor note={data.note} />\n}\n", "import {\n\tconform,\n\tlist,\n\tuseFieldList,\n\tuseFieldset,\n\tuseForm,\n\ttype FieldConfig,\n} from '@conform-to/react'\nimport { getFieldsetConstraint, parse } from '@conform-to/zod'\nimport { createId as cuid } from '@paralleldrive/cuid2'\nimport { type Note, type NoteImage } from '@prisma/client'\nimport {\n\tunstable_createMemoryUploadHandler as createMemoryUploadHandler,\n\tjson,\n\tunstable_parseMultipartFormData as parseMultipartFormData,\n\tredirect,\n\ttype DataFunctionArgs,\n\ttype SerializeFrom,\n} from '@remix-run/node'\nimport { Form, useFetcher } from '@remix-run/react'\nimport { useRef, useState } from 'react'\nimport { AuthenticityTokenInput } from 'remix-utils/csrf/react'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { floatingToolbarClassName } from '#app/components/floating-toolbar.tsx'\nimport { ErrorList, Field, TextareaField } from '#app/components/forms.tsx'\nimport { Button } from '#app/components/ui/button.tsx'\nimport { Icon } from '#app/components/ui/icon.tsx'\nimport { Label } from '#app/components/ui/label.tsx'\nimport { StatusButton } from '#app/components/ui/status-button.tsx'\nimport { Textarea } from '#app/components/ui/textarea.tsx'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { validateCSRF } from '#app/utils/csrf.server.ts'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn, getNoteImgSrc } from '#app/utils/misc.tsx'\n\nconst titleMinLength = 1\nconst titleMaxLength = 100\nconst contentMinLength = 1\nconst contentMaxLength = 10000\n\nconst MAX_UPLOAD_SIZE = 1024 * 1024 * 3 // 3MB\n\nconst ImageFieldsetSchema = z.object({\n\tid: z.string().optional(),\n\tfile: z\n\t\t.instanceof(File)\n\t\t.optional()\n\t\t.refine(file => {\n\t\t\treturn !file || file.size <= MAX_UPLOAD_SIZE\n\t\t}, 'File size must be less than 3MB'),\n\taltText: z.string().optional(),\n})\n\ntype ImageFieldset = z.infer<typeof ImageFieldsetSchema>\n\nfunction imageHasFile(\n\timage: ImageFieldset,\n): image is ImageFieldset & { file: NonNullable<ImageFieldset['file']> } {\n\treturn Boolean(image.file?.size && image.file?.size > 0)\n}\n\nfunction imageHasId(\n\timage: ImageFieldset,\n): image is ImageFieldset & { id: NonNullable<ImageFieldset['id']> } {\n\treturn image.id != null\n}\n\nconst NoteEditorSchema = z.object({\n\tid: z.string().optional(),\n\ttitle: z.string().min(titleMinLength).max(titleMaxLength),\n\tcontent: z.string().min(contentMinLength).max(contentMaxLength),\n\timages: z.array(ImageFieldsetSchema).max(5).optional(),\n})\n\nexport async function action({ request }: DataFunctionArgs) {\n\tconst userId = await requireUserId(request)\n\n\tconst formData = await parseMultipartFormData(\n\t\trequest,\n\t\tcreateMemoryUploadHandler({ maxPartSize: MAX_UPLOAD_SIZE }),\n\t)\n\tawait validateCSRF(formData, request.headers)\n\n\tconst submission = await parse(formData, {\n\t\tschema: NoteEditorSchema.superRefine(async (data, ctx) => {\n\t\t\tif (!data.id) return\n\n\t\t\tconst note = await prisma.note.findUnique({\n\t\t\t\tselect: { id: true },\n\t\t\t\twhere: { id: data.id, ownerId: userId },\n\t\t\t})\n\t\t\tif (!note) {\n\t\t\t\tctx.addIssue({\n\t\t\t\t\tcode: z.ZodIssueCode.custom,\n\t\t\t\t\tmessage: 'Note not found',\n\t\t\t\t})\n\t\t\t}\n\t\t}).transform(async ({ images = [], ...data }) => {\n\t\t\treturn {\n\t\t\t\t...data,\n\t\t\t\timageUpdates: await Promise.all(\n\t\t\t\t\timages.filter(imageHasId).map(async i => {\n\t\t\t\t\t\tif (imageHasFile(i)) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: i.id,\n\t\t\t\t\t\t\t\taltText: i.altText,\n\t\t\t\t\t\t\t\tcontentType: i.file.type,\n\t\t\t\t\t\t\t\tblob: Buffer.from(await i.file.arrayBuffer()),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tid: i.id,\n\t\t\t\t\t\t\t\taltText: i.altText,\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t\tnewImages: await Promise.all(\n\t\t\t\t\timages\n\t\t\t\t\t\t.filter(imageHasFile)\n\t\t\t\t\t\t.filter(i => !i.id)\n\t\t\t\t\t\t.map(async image => {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\taltText: image.altText,\n\t\t\t\t\t\t\t\tcontentType: image.file.type,\n\t\t\t\t\t\t\t\tblob: Buffer.from(await image.file.arrayBuffer()),\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}),\n\t\t\t\t),\n\t\t\t}\n\t\t}),\n\t\tasync: true,\n\t})\n\n\tif (submission.intent !== 'submit') {\n\t\treturn json({ status: 'idle', submission } as const)\n\t}\n\n\tif (!submission.value) {\n\t\treturn json({ status: 'error', submission } as const, { status: 400 })\n\t}\n\n\tconst {\n\t\tid: noteId,\n\t\ttitle,\n\t\tcontent,\n\t\timageUpdates = [],\n\t\tnewImages = [],\n\t} = submission.value\n\n\tconst updatedNote = await prisma.note.upsert({\n\t\tselect: { id: true, owner: { select: { username: true } } },\n\t\twhere: { id: noteId ?? '__new_note__' },\n\t\tcreate: {\n\t\t\townerId: userId,\n\t\t\ttitle,\n\t\t\tcontent,\n\t\t\timages: { create: newImages },\n\t\t},\n\t\tupdate: {\n\t\t\ttitle,\n\t\t\tcontent,\n\t\t\timages: {\n\t\t\t\tdeleteMany: { id: { notIn: imageUpdates.map(i => i.id) } },\n\t\t\t\tupdateMany: imageUpdates.map(updates => ({\n\t\t\t\t\twhere: { id: updates.id },\n\t\t\t\t\tdata: { ...updates, id: updates.blob ? cuid() : updates.id },\n\t\t\t\t})),\n\t\t\t\tcreate: newImages,\n\t\t\t},\n\t\t},\n\t})\n\n\treturn redirect(\n\t\t`/users/${updatedNote.owner.username}/notes/${updatedNote.id}`,\n\t)\n}\n\nexport function NoteEditor({\n\tnote,\n}: {\n\tnote?: SerializeFrom<\n\t\tPick<Note, 'id' | 'title' | 'content'> & {\n\t\t\timages: Array<Pick<NoteImage, 'id' | 'altText'>>\n\t\t}\n\t>\n}) {\n\tconst noteFetcher = useFetcher<typeof action>()\n\tconst isPending = noteFetcher.state !== 'idle'\n\n\tconst [form, fields] = useForm({\n\t\tid: 'note-editor',\n\t\tconstraint: getFieldsetConstraint(NoteEditorSchema),\n\t\tlastSubmission: noteFetcher.data?.submission,\n\t\tonValidate({ formData }) {\n\t\t\treturn parse(formData, { schema: NoteEditorSchema })\n\t\t},\n\t\tdefaultValue: {\n\t\t\ttitle: note?.title ?? '',\n\t\t\tcontent: note?.content ?? '',\n\t\t\timages: note?.images ?? [{}],\n\t\t},\n\t})\n\tconst imageList = useFieldList(form.ref, fields.images)\n\n\treturn (\n\t\t<div className=\"absolute inset-0\">\n\t\t\t<Form\n\t\t\t\tmethod=\"POST\"\n\t\t\t\tclassName=\"flex h-full flex-col gap-y-4 overflow-y-auto overflow-x-hidden px-10 pb-28 pt-12\"\n\t\t\t\t{...form.props}\n\t\t\t\tencType=\"multipart/form-data\"\n\t\t\t>\n\t\t\t\t<AuthenticityTokenInput />\n\t\t\t\t{/*\n\t\t\t\t\tThis hidden submit button is here to ensure that when the user hits\n\t\t\t\t\t\"enter\" on an input field, the primary form function is submitted\n\t\t\t\t\trather than the first button in the form (which is delete/add image).\n\t\t\t\t*/}\n\t\t\t\t<button type=\"submit\" className=\"hidden\" />\n\t\t\t\t{note ? <input type=\"hidden\" name=\"id\" value={note.id} /> : null}\n\t\t\t\t<div className=\"flex flex-col gap-1\">\n\t\t\t\t\t<Field\n\t\t\t\t\t\tlabelProps={{ children: 'Title' }}\n\t\t\t\t\t\tinputProps={{\n\t\t\t\t\t\t\tautoFocus: true,\n\t\t\t\t\t\t\t...conform.input(fields.title, { ariaAttributes: true }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.title.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<TextareaField\n\t\t\t\t\t\tlabelProps={{ children: 'Content' }}\n\t\t\t\t\t\ttextareaProps={{\n\t\t\t\t\t\t\t...conform.textarea(fields.content, { ariaAttributes: true }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t\terrors={fields.content.errors}\n\t\t\t\t\t/>\n\t\t\t\t\t<div>\n\t\t\t\t\t\t<Label>Images</Label>\n\t\t\t\t\t\t<ul className=\"flex flex-col gap-4\">\n\t\t\t\t\t\t\t{imageList.map((image, index) => (\n\t\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\t\tkey={image.key}\n\t\t\t\t\t\t\t\t\tclassName=\"relative border-b-2 border-muted-foreground\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<button\n\t\t\t\t\t\t\t\t\t\tclassName=\"absolute right-0 top-0 text-foreground-destructive\"\n\t\t\t\t\t\t\t\t\t\t{...list.remove(fields.images.name, { index })}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<span aria-hidden>\n\t\t\t\t\t\t\t\t\t\t\t<Icon name=\"cross-1\" />\n\t\t\t\t\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t\t\t\t\t<span className=\"sr-only\">Remove image {index + 1}</span>\n\t\t\t\t\t\t\t\t\t</button>\n\t\t\t\t\t\t\t\t\t<ImageChooser config={image} />\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t</div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tclassName=\"mt-3\"\n\t\t\t\t\t\t{...list.insert(fields.images.name, { defaultValue: {} })}\n\t\t\t\t\t>\n\t\t\t\t\t\t<span aria-hidden>\n\t\t\t\t\t\t\t<Icon name=\"plus\">Image</Icon>\n\t\t\t\t\t\t</span>{' '}\n\t\t\t\t\t\t<span className=\"sr-only\">Add image</span>\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t\t<ErrorList id={form.errorId} errors={form.errors} />\n\t\t\t</Form>\n\t\t\t<div className={floatingToolbarClassName}>\n\t\t\t\t<Button form={form.id} variant=\"destructive\" type=\"reset\">\n\t\t\t\t\tReset\n\t\t\t\t</Button>\n\t\t\t\t<StatusButton\n\t\t\t\t\tform={form.id}\n\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\tdisabled={isPending}\n\t\t\t\t\tstatus={isPending ? 'pending' : 'idle'}\n\t\t\t\t>\n\t\t\t\t\tSubmit\n\t\t\t\t</StatusButton>\n\t\t\t</div>\n\t\t</div>\n\t)\n}\n\nfunction ImageChooser({\n\tconfig,\n}: {\n\tconfig: FieldConfig<z.infer<typeof ImageFieldsetSchema>>\n}) {\n\tconst ref = useRef<HTMLFieldSetElement>(null)\n\tconst fields = useFieldset(ref, config)\n\tconst existingImage = Boolean(fields.id.defaultValue)\n\tconst [previewImage, setPreviewImage] = useState<string | null>(\n\t\tfields.id.defaultValue ? getNoteImgSrc(fields.id.defaultValue) : null,\n\t)\n\tconst [altText, setAltText] = useState(fields.altText.defaultValue ?? '')\n\n\treturn (\n\t\t<fieldset\n\t\t\tref={ref}\n\t\t\taria-invalid={Boolean(config.errors?.length) || undefined}\n\t\t\taria-describedby={config.errors?.length ? config.errorId : undefined}\n\t\t>\n\t\t\t<div className=\"flex gap-3\">\n\t\t\t\t<div className=\"w-32\">\n\t\t\t\t\t<div className=\"relative h-32 w-32\">\n\t\t\t\t\t\t<label\n\t\t\t\t\t\t\thtmlFor={fields.file.id}\n\t\t\t\t\t\t\tclassName={cn('group absolute h-32 w-32 rounded-lg', {\n\t\t\t\t\t\t\t\t'bg-accent opacity-40 focus-within:opacity-100 hover:opacity-100':\n\t\t\t\t\t\t\t\t\t!previewImage,\n\t\t\t\t\t\t\t\t'cursor-pointer focus-within:ring-4': !existingImage,\n\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{previewImage ? (\n\t\t\t\t\t\t\t\t<div className=\"relative\">\n\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\tsrc={previewImage}\n\t\t\t\t\t\t\t\t\t\talt={altText ?? ''}\n\t\t\t\t\t\t\t\t\t\tclassName=\"h-32 w-32 rounded-lg object-cover\"\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t{existingImage ? null : (\n\t\t\t\t\t\t\t\t\t\t<div className=\"pointer-events-none absolute -right-0.5 -top-0.5 rotate-12 rounded-sm bg-secondary px-2 py-1 text-xs text-secondary-foreground shadow-md\">\n\t\t\t\t\t\t\t\t\t\t\tnew\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t<div className=\"flex h-32 w-32 items-center justify-center rounded-lg border border-muted-foreground text-4xl text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t<Icon name=\"plus\" />\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t{existingImage ? (\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t{...conform.input(fields.id, {\n\t\t\t\t\t\t\t\t\t\ttype: 'hidden',\n\t\t\t\t\t\t\t\t\t\tariaAttributes: true,\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\taria-label=\"Image\"\n\t\t\t\t\t\t\t\tclassName=\"absolute left-0 top-0 z-0 h-32 w-32 cursor-pointer opacity-0\"\n\t\t\t\t\t\t\t\tonChange={event => {\n\t\t\t\t\t\t\t\t\tconst file = event.target.files?.[0]\n\n\t\t\t\t\t\t\t\t\tif (file) {\n\t\t\t\t\t\t\t\t\t\tconst reader = new FileReader()\n\t\t\t\t\t\t\t\t\t\treader.onloadend = () => {\n\t\t\t\t\t\t\t\t\t\t\tsetPreviewImage(reader.result as string)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\treader.readAsDataURL(file)\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tsetPreviewImage(null)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\taccept=\"image/*\"\n\t\t\t\t\t\t\t\t{...conform.input(fields.file, {\n\t\t\t\t\t\t\t\t\ttype: 'file',\n\t\t\t\t\t\t\t\t\tariaAttributes: true,\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"min-h-[32px] px-4 pb-3 pt-1\">\n\t\t\t\t\t\t<ErrorList id={fields.file.errorId} errors={fields.file.errors} />\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<div className=\"flex-1\">\n\t\t\t\t\t<Label htmlFor={fields.altText.id}>Alt Text</Label>\n\t\t\t\t\t<Textarea\n\t\t\t\t\t\tonChange={e => setAltText(e.currentTarget.value)}\n\t\t\t\t\t\t{...conform.textarea(fields.altText, { ariaAttributes: true })}\n\t\t\t\t\t/>\n\t\t\t\t\t<div className=\"min-h-[32px] px-4 pb-3 pt-1\">\n\t\t\t\t\t\t<ErrorList\n\t\t\t\t\t\t\tid={fields.altText.errorId}\n\t\t\t\t\t\t\terrors={fields.altText.errors}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className=\"min-h-[32px] px-4 pb-3 pt-1\">\n\t\t\t\t<ErrorList id={config.errorId} errors={config.errors} />\n\t\t\t</div>\n\t\t</fieldset>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn (\n\t\t<GeneralErrorBoundary\n\t\t\tstatusHandlers={{\n\t\t\t\t404: ({ params }) => (\n\t\t\t\t\t<p>No note with the id \"{params.noteId}\" exists</p>\n\t\t\t\t),\n\t\t\t}}\n\t\t/>\n\t)\n}\n", "import { type MetaFunction } from '@remix-run/react'\nimport { type loader as notesLoader } from './notes.tsx'\n\nexport default function NotesIndexRoute() {\n\treturn (\n\t\t<div className=\"container pt-12\">\n\t\t\t<p className=\"text-body-md\">Select a note</p>\n\t\t</div>\n\t)\n}\n\nexport const meta: MetaFunction<\n\tnull,\n\t{ 'routes/users+/$username_+/notes': typeof notesLoader }\n> = ({ params, matches }) => {\n\tconst notesMatch = matches.find(\n\t\tm => m.id === 'routes/users+/$username_+/notes',\n\t)\n\tconst displayName = notesMatch?.data?.owner.name ?? params.username\n\tconst noteCount = notesMatch?.data?.owner.notes.length ?? 0\n\tconst notesText = noteCount === 1 ? 'note' : 'notes'\n\treturn [\n\t\t{ title: `${displayName}'s Notes | Epic Notes` },\n\t\t{\n\t\t\tname: 'description',\n\t\t\tcontent: `Checkout ${displayName}'s ${noteCount} ${notesText} on Epic Notes`,\n\t\t},\n\t]\n}\n", "import { json } from '@remix-run/node'\nimport { type DataFunctionArgs } from '@remix-run/server-runtime'\nimport { requireUserId } from '#app/utils/auth.server.ts'\nimport { NoteEditor, action } from './__note-editor.tsx'\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tawait requireUserId(request)\n\treturn json({})\n}\n\nexport { action }\nexport default NoteEditor\n", "import { json, redirect, type DataFunctionArgs } from '@remix-run/node'\nimport { Link, useLoaderData } from '@remix-run/react'\nimport { z } from 'zod'\nimport { GeneralErrorBoundary } from '#app/components/error-boundary.tsx'\nimport { ErrorList } from '#app/components/forms.tsx'\nimport { SearchBar } from '#app/components/search-bar.tsx'\nimport { prisma } from '#app/utils/db.server.ts'\nimport { cn, getUserImgSrc, useDelayedIsPending } from '#app/utils/misc.tsx'\n\nconst UserSearchResultSchema = z.object({\n\tid: z.string(),\n\tusername: z.string(),\n\tname: z.string().nullable(),\n\timageId: z.string().nullable(),\n})\n\nconst UserSearchResultsSchema = z.array(UserSearchResultSchema)\n\nexport async function loader({ request }: DataFunctionArgs) {\n\tconst searchTerm = new URL(request.url).searchParams.get('search')\n\tif (searchTerm === '') {\n\t\treturn redirect('/users')\n\t}\n\n\tconst like = `%${searchTerm ?? ''}%`\n\tconst rawUsers = await prisma.$queryRaw`\n\t\tSELECT User.id, User.username, User.name, UserImage.id AS imageId\n\t\tFROM User\n\t\tLEFT JOIN UserImage ON User.id = UserImage.userId\n\t\tWHERE User.username LIKE ${like}\n\t\tOR User.name LIKE ${like}\n\t\tORDER BY (\n\t\t\tSELECT Note.updatedAt\n\t\t\tFROM Note\n\t\t\tWHERE Note.ownerId = User.id\n\t\t\tORDER BY Note.updatedAt DESC\n\t\t\tLIMIT 1\n\t\t) DESC\n\t\tLIMIT 50\n\t`\n\n\tconst result = UserSearchResultsSchema.safeParse(rawUsers)\n\tif (!result.success) {\n\t\treturn json({ status: 'error', error: result.error.message } as const, {\n\t\t\tstatus: 400,\n\t\t})\n\t}\n\treturn json({ status: 'idle', users: result.data } as const)\n}\n\nexport default function UsersRoute() {\n\tconst data = useLoaderData<typeof loader>()\n\tconst isPending = useDelayedIsPending({\n\t\tformMethod: 'GET',\n\t\tformAction: '/users',\n\t})\n\n\tif (data.status === 'error') {\n\t\tconsole.error(data.error)\n\t}\n\n\treturn (\n\t\t<div className=\"container mb-48 mt-36 flex flex-col items-center justify-center gap-6\">\n\t\t\t<h1 className=\"text-h1\">Epic Notes Users</h1>\n\t\t\t<div className=\"w-full max-w-[700px] \">\n\t\t\t\t<SearchBar status={data.status} autoFocus autoSubmit />\n\t\t\t</div>\n\t\t\t<main>\n\t\t\t\t{data.status === 'idle' ? (\n\t\t\t\t\tdata.users.length ? (\n\t\t\t\t\t\t<ul\n\t\t\t\t\t\t\tclassName={cn(\n\t\t\t\t\t\t\t\t'flex w-full flex-wrap items-center justify-center gap-4 delay-200',\n\t\t\t\t\t\t\t\t{ 'opacity-50': isPending },\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{data.users.map(user => (\n\t\t\t\t\t\t\t\t<li key={user.id}>\n\t\t\t\t\t\t\t\t\t<Link\n\t\t\t\t\t\t\t\t\t\tto={user.username}\n\t\t\t\t\t\t\t\t\t\tclassName=\"flex h-36 w-44 flex-col items-center justify-center rounded-lg bg-muted px-5 py-3\"\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t<img\n\t\t\t\t\t\t\t\t\t\t\talt={user.name ?? user.username}\n\t\t\t\t\t\t\t\t\t\t\tsrc={getUserImgSrc(user.imageId)}\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"h-16 w-16 rounded-full\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t{user.name ? (\n\t\t\t\t\t\t\t\t\t\t\t<span className=\"w-full overflow-hidden text-ellipsis whitespace-nowrap text-center text-body-md\">\n\t\t\t\t\t\t\t\t\t\t\t\t{user.name}\n\t\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t\t\t\t<span className=\"w-full overflow-hidden text-ellipsis text-center text-body-sm text-muted-foreground\">\n\t\t\t\t\t\t\t\t\t\t\t{user.username}\n\t\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t\t</Link>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</ul>\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<p>No users found</p>\n\t\t\t\t\t)\n\t\t\t\t) : data.status === 'error' ? (\n\t\t\t\t\t<ErrorList errors={['There was an error parsing the results']} />\n\t\t\t\t) : null}\n\t\t\t</main>\n\t\t</div>\n\t)\n}\n\nexport function ErrorBoundary() {\n\treturn <GeneralErrorBoundary />\n}\n", "export default {'entry':{'module':'/build/entry.client-H6SK6IEI.js','imports':['/build/_shared/chunk-ZWGWGGVF.js','/build/_shared/chunk-PHQUHPUM.js','/build/_shared/chunk-GIAAE3CH.js','/build/_shared/chunk-76ZEIH4H.js','/build/_shared/chunk-UWV35TSL.js','/build/_shared/chunk-XU7DNSPJ.js','/build/_shared/chunk-BOXFZXVX.js','/build/_shared/chunk-PNG5AS42.js']},'routes':{'root':{'id':'root','parentId':undefined,'path':'','index':undefined,'caseSensitive':undefined,'module':'/build/root-HEG7BLOT.js','imports':['/build/_shared/chunk-EEEUZJA4.js','/build/_shared/chunk-Y7VT56QR.js','/build/_shared/chunk-6NMOG26R.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':true},'routes/$':{'id':'routes/$','parentId':'root','path':'*','index':undefined,'caseSensitive':undefined,'module':'/build/routes/$-DKOEJKML.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':true},'routes/_auth+/auth.$provider':{'id':'routes/_auth+/auth.$provider','parentId':'root','path':'auth/:provider','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/auth.$provider-WW2QFSVE.js','imports':undefined,'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/_auth+/auth.$provider.callback':{'id':'routes/_auth+/auth.$provider.callback','parentId':'routes/_auth+/auth.$provider','path':'callback','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/auth.$provider.callback-5XAADI4U.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/_auth+/forgot-password':{'id':'routes/_auth+/forgot-password','parentId':'root','path':'forgot-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/forgot-password-L4OF4SVH.js','imports':['/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-XSA5YJR6.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':true,'hasLoader':false,'hasErrorBoundary':true},'routes/_auth+/login':{'id':'routes/_auth+/login','parentId':'root','path':'login','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/login-2RPVQ3SL.js','imports':['/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-XSA5YJR6.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':true},'routes/_auth+/logout':{'id':'routes/_auth+/logout','parentId':'root','path':'logout','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/logout-M5ZJ3ZMG.js','imports':undefined,'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/_auth+/onboarding':{'id':'routes/_auth+/onboarding','parentId':'root','path':'onboarding','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/onboarding-YRVA42RB.js','imports':['/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/_auth+/onboarding_.$provider':{'id':'routes/_auth+/onboarding_.$provider','parentId':'root','path':'onboarding/:provider','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/onboarding_.$provider-7YPMLTIY.js','imports':['/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/_auth+/reset-password':{'id':'routes/_auth+/reset-password','parentId':'root','path':'reset-password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/reset-password-EJZQUZLL.js','imports':['/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':true},'routes/_auth+/signup':{'id':'routes/_auth+/signup','parentId':'root','path':'signup','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/signup-DIBGULHT.js','imports':['/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-XSA5YJR6.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':true,'hasLoader':false,'hasErrorBoundary':true},'routes/_auth+/verify':{'id':'routes/_auth+/verify','parentId':'root','path':'verify','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_auth+/verify-6WH3HGUS.js','imports':['/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-XSA5YJR6.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':true,'hasLoader':false,'hasErrorBoundary':true},'routes/_marketing+/about':{'id':'routes/_marketing+/about','parentId':'root','path':'about','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_marketing+/about-4LFHBFNE.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasErrorBoundary':false},'routes/_marketing+/index':{'id':'routes/_marketing+/index','parentId':'root','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/_marketing+/index-6PSQ7GTS.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasErrorBoundary':false},'routes/_marketing+/privacy':{'id':'routes/_marketing+/privacy','parentId':'root','path':'privacy','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_marketing+/privacy-CHBEGGHJ.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasErrorBoundary':false},'routes/_marketing+/support':{'id':'routes/_marketing+/support','parentId':'root','path':'support','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_marketing+/support-26QXFA7O.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasErrorBoundary':false},'routes/_marketing+/tos':{'id':'routes/_marketing+/tos','parentId':'root','path':'tos','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_marketing+/tos-5B37E7D7.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasErrorBoundary':false},'routes/_seo+/robots[.]txt':{'id':'routes/_seo+/robots[.]txt','parentId':'root','path':'robots.txt','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_seo+/robots[.]txt-TBZGNCYM.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/_seo+/sitemap[.]xml':{'id':'routes/_seo+/sitemap[.]xml','parentId':'root','path':'sitemap.xml','index':undefined,'caseSensitive':undefined,'module':'/build/routes/_seo+/sitemap[.]xml-JQ7RJ3XX.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/admin+/cache':{'id':'routes/admin+/cache','parentId':'root','path':'admin/cache','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin+/cache-TSPVEV22.js','imports':['/build/_shared/chunk-ZL5Q24C5.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-NBRO6RFG.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':true},'routes/admin+/cache_.lru.$cacheKey':{'id':'routes/admin+/cache_.lru.$cacheKey','parentId':'root','path':'admin/cache/lru/:cacheKey','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin+/cache_.lru.$cacheKey-X2GRYDAK.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/admin+/cache_.sqlite':{'id':'routes/admin+/cache_.sqlite','parentId':'root','path':'admin/cache/sqlite','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin+/cache_.sqlite-7USYJDNY.js','imports':undefined,'hasAction':true,'hasLoader':false,'hasErrorBoundary':false},'routes/admin+/cache_.sqlite.$cacheKey':{'id':'routes/admin+/cache_.sqlite.$cacheKey','parentId':'routes/admin+/cache_.sqlite','path':':cacheKey','index':undefined,'caseSensitive':undefined,'module':'/build/routes/admin+/cache_.sqlite.$cacheKey-QRUNMDV6.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/me':{'id':'routes/me','parentId':'root','path':'me','index':undefined,'caseSensitive':undefined,'module':'/build/routes/me-YJ7U5JB6.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/resources+/download-user-data':{'id':'routes/resources+/download-user-data','parentId':'root','path':'resources/download-user-data','index':undefined,'caseSensitive':undefined,'module':'/build/routes/resources+/download-user-data-QWZFMFWX.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/resources+/healthcheck':{'id':'routes/resources+/healthcheck','parentId':'root','path':'resources/healthcheck','index':undefined,'caseSensitive':undefined,'module':'/build/routes/resources+/healthcheck-HMP4SYN5.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/resources+/note-images.$imageId':{'id':'routes/resources+/note-images.$imageId','parentId':'root','path':'resources/note-images/:imageId','index':undefined,'caseSensitive':undefined,'module':'/build/routes/resources+/note-images.$imageId-XY7AWGVH.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/resources+/user-images.$imageId':{'id':'routes/resources+/user-images.$imageId','parentId':'root','path':'resources/user-images/:imageId','index':undefined,'caseSensitive':undefined,'module':'/build/routes/resources+/user-images.$imageId-N2KMUSZO.js','imports':undefined,'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile':{'id':'routes/settings+/profile','parentId':'root','path':'settings/profile','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile-56PYED4Z.js','imports':['/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':false,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.change-email':{'id':'routes/settings+/profile.change-email','parentId':'routes/settings+/profile','path':'change-email','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.change-email-5V5WMMJ3.js','imports':['/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-XSA5YJR6.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-6NMOG26R.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.connections':{'id':'routes/settings+/profile.connections','parentId':'routes/settings+/profile','path':'connections','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.connections-EHLR6WVN.js','imports':['/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.index':{'id':'routes/settings+/profile.index','parentId':'routes/settings+/profile','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.index-QS2JA7SD.js','imports':['/build/_shared/chunk-XSA5YJR6.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.password':{'id':'routes/settings+/profile.password','parentId':'routes/settings+/profile','path':'password','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.password-4PYCLHBP.js','imports':['/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.password_.create':{'id':'routes/settings+/profile.password_.create','parentId':'routes/settings+/profile','path':'password/create','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.password_.create-NA44CZCA.js','imports':['/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.photo':{'id':'routes/settings+/profile.photo','parentId':'routes/settings+/profile','path':'photo','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.photo-UA45USEA.js','imports':['/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.two-factor':{'id':'routes/settings+/profile.two-factor','parentId':'routes/settings+/profile','path':'two-factor','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.two-factor-O4OMHZHP.js','imports':['/build/_shared/chunk-XSA5YJR6.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':false,'hasLoader':false,'hasErrorBoundary':false},'routes/settings+/profile.two-factor.disable':{'id':'routes/settings+/profile.two-factor.disable','parentId':'routes/settings+/profile.two-factor','path':'disable','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.two-factor.disable-4OI3IES7.js','imports':['/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js','/build/_shared/chunk-6NMOG26R.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.two-factor.index':{'id':'routes/settings+/profile.two-factor.index','parentId':'routes/settings+/profile.two-factor','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.two-factor.index-MHRBGHOA.js','imports':['/build/_shared/chunk-35QU5M5L.js','/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js','/build/_shared/chunk-6NMOG26R.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/settings+/profile.two-factor.verify':{'id':'routes/settings+/profile.two-factor.verify','parentId':'routes/settings+/profile.two-factor','path':'verify','index':undefined,'caseSensitive':undefined,'module':'/build/routes/settings+/profile.two-factor.verify-N5J73JPR.js','imports':['/build/_shared/chunk-35QU5M5L.js','/build/_shared/chunk-MRLKUITJ.js','/build/_shared/chunk-NMZL6IDN.js','/build/_shared/chunk-YROKGDF2.js','/build/_shared/chunk-3QJDM65C.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-V3X6G6DM.js','/build/_shared/chunk-SAJ3AEKV.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-R7SB74WW.js','/build/_shared/chunk-PIFLCODP.js','/build/_shared/chunk-DIRETMJJ.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-FSP6GK2P.js','/build/_shared/chunk-6NMOG26R.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/users+/$username':{'id':'routes/users+/$username','parentId':'root','path':'users/:username','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users+/$username-4Q3HQIOD.js','imports':['/build/_shared/chunk-NBRO6RFG.js','/build/_shared/chunk-FSP6GK2P.js'],'hasAction':false,'hasLoader':true,'hasErrorBoundary':true},'routes/users+/$username_+/notes':{'id':'routes/users+/$username_+/notes','parentId':'root','path':'users/:username/notes','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users+/$username_+/notes-DVSOC5RI.js','imports':['/build/_shared/chunk-FSP6GK2P.js'],'hasAction':false,'hasLoader':true,'hasErrorBoundary':true},'routes/users+/$username_+/notes.$noteId':{'id':'routes/users+/$username_+/notes.$noteId','parentId':'routes/users+/$username_+/notes','path':':noteId','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users+/$username_+/notes.$noteId-KCMVWPNB.js','imports':['/build/_shared/chunk-RZOEGAMM.js','/build/_shared/chunk-ZL5Q24C5.js','/build/_shared/chunk-Y7VT56QR.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-O7MTR2WV.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':true},'routes/users+/$username_+/notes.$noteId_.edit':{'id':'routes/users+/$username_+/notes.$noteId_.edit','parentId':'routes/users+/$username_+/notes','path':':noteId/edit','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users+/$username_+/notes.$noteId_.edit-XSLEPOCQ.js','imports':['/build/_shared/chunk-EAQ55TK3.js','/build/_shared/chunk-RZOEGAMM.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/users+/$username_+/notes.index':{'id':'routes/users+/$username_+/notes.index','parentId':'routes/users+/$username_+/notes','path':undefined,'index':true,'caseSensitive':undefined,'module':'/build/routes/users+/$username_+/notes.index-CVSNFNSO.js','imports':undefined,'hasAction':false,'hasLoader':false,'hasErrorBoundary':false},'routes/users+/$username_+/notes.new':{'id':'routes/users+/$username_+/notes.new','parentId':'routes/users+/$username_+/notes','path':'new','index':undefined,'caseSensitive':undefined,'module':'/build/routes/users+/$username_+/notes.new-M6HASQUC.js','imports':['/build/_shared/chunk-EAQ55TK3.js','/build/_shared/chunk-RZOEGAMM.js','/build/_shared/chunk-YBPZLMI7.js','/build/_shared/chunk-44XOYWRB.js','/build/_shared/chunk-6LMWWETO.js','/build/_shared/chunk-FS75F6DH.js','/build/_shared/chunk-SS7EHFNL.js','/build/_shared/chunk-YTDRTWMN.js','/build/_shared/chunk-H2TCL2LU.js','/build/_shared/chunk-RHPIMEJG.js','/build/_shared/chunk-G7CHZRZX.js','/build/_shared/chunk-7RTSRIVO.js','/build/_shared/chunk-TAQPVQBK.js','/build/_shared/chunk-CHQ4BA76.js','/build/_shared/chunk-XV5O3AU2.js','/build/_shared/chunk-R2QIY5GK.js','/build/_shared/chunk-HGS2R3YL.js','/build/_shared/chunk-POVIIGBA.js'],'hasAction':true,'hasLoader':true,'hasErrorBoundary':false},'routes/users+/index':{'id':'routes/users+/index','parentId':'root','path':'users/','index':true,'caseSensitive':undefined,'module':'/build/routes/users+/index-X2CZUN26.js','imports':['/build/_shared/chunk-FSP6GK2P.js'],'hasAction':false,'hasLoader':true,'hasErrorBoundary':true}},'version':'20977a79','hmr':{'runtime':'/build/_shared/chunk-76ZEIH4H.js','timestamp':1700854273676},'url':'/build/manifest-20977A79.js'};", "\nimport * as entryServer from \"/home/dev/projects/epic/app/entry.server.tsx\";\nimport * as route0 from \"./root.tsx\";\nimport * as route1 from \"./routes/$.tsx\";\nimport * as route2 from \"./routes/_auth+/auth.$provider.ts\";\nimport * as route3 from \"./routes/_auth+/auth.$provider.callback.ts\";\nimport * as route4 from \"./routes/_auth+/forgot-password.tsx\";\nimport * as route5 from \"./routes/_auth+/login.tsx\";\nimport * as route6 from \"./routes/_auth+/logout.tsx\";\nimport * as route7 from \"./routes/_auth+/onboarding.tsx\";\nimport * as route8 from \"./routes/_auth+/onboarding_.$provider.tsx\";\nimport * as route9 from \"./routes/_auth+/reset-password.tsx\";\nimport * as route10 from \"./routes/_auth+/signup.tsx\";\nimport * as route11 from \"./routes/_auth+/verify.tsx\";\nimport * as route12 from \"./routes/_marketing+/about.tsx\";\nimport * as route13 from \"./routes/_marketing+/index.tsx\";\nimport * as route14 from \"./routes/_marketing+/privacy.tsx\";\nimport * as route15 from \"./routes/_marketing+/support.tsx\";\nimport * as route16 from \"./routes/_marketing+/tos.tsx\";\nimport * as route17 from \"./routes/_seo+/robots[.]txt.ts\";\nimport * as route18 from \"./routes/_seo+/sitemap[.]xml.ts\";\nimport * as route19 from \"./routes/admin+/cache.tsx\";\nimport * as route20 from \"./routes/admin+/cache_.lru.$cacheKey.ts\";\nimport * as route21 from \"./routes/admin+/cache_.sqlite.tsx\";\nimport * as route22 from \"./routes/admin+/cache_.sqlite.$cacheKey.ts\";\nimport * as route23 from \"./routes/me.tsx\";\nimport * as route24 from \"./routes/resources+/download-user-data.tsx\";\nimport * as route25 from \"./routes/resources+/healthcheck.tsx\";\nimport * as route26 from \"./routes/resources+/note-images.$imageId.tsx\";\nimport * as route27 from \"./routes/resources+/user-images.$imageId.tsx\";\nimport * as route28 from \"./routes/settings+/profile.tsx\";\nimport * as route29 from \"./routes/settings+/profile.change-email.tsx\";\nimport * as route30 from \"./routes/settings+/profile.connections.tsx\";\nimport * as route31 from \"./routes/settings+/profile.index.tsx\";\nimport * as route32 from \"./routes/settings+/profile.password.tsx\";\nimport * as route33 from \"./routes/settings+/profile.password_.create.tsx\";\nimport * as route34 from \"./routes/settings+/profile.photo.tsx\";\nimport * as route35 from \"./routes/settings+/profile.two-factor.tsx\";\nimport * as route36 from \"./routes/settings+/profile.two-factor.disable.tsx\";\nimport * as route37 from \"./routes/settings+/profile.two-factor.index.tsx\";\nimport * as route38 from \"./routes/settings+/profile.two-factor.verify.tsx\";\nimport * as route39 from \"./routes/users+/$username.tsx\";\nimport * as route40 from \"./routes/users+/$username_+/notes.tsx\";\nimport * as route41 from \"./routes/users+/$username_+/notes.$noteId.tsx\";\nimport * as route42 from \"./routes/users+/$username_+/notes.$noteId_.edit.tsx\";\nimport * as route43 from \"./routes/users+/$username_+/notes.index.tsx\";\nimport * as route44 from \"./routes/users+/$username_+/notes.new.tsx\";\nimport * as route45 from \"./routes/users+/index.tsx\";\n  export const mode = \"development\";\n  export { default as assets } from \"@remix-run/dev/assets-manifest\";\n  export const assetsBuildDirectory = \"public/build\";\n  export const future = {\"v3_fetcherPersist\":false};\n  export const publicPath = \"/build/\";\n  export const entry = { module: entryServer };\n  export const routes = {\n    \"root\": {\n      id: \"root\",\n      parentId: undefined,\n      path: \"\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route0\n    },\n  \"routes/$\": {\n      id: \"routes/$\",\n      parentId: \"root\",\n      path: \"*\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route1\n    },\n  \"routes/_auth+/auth.$provider\": {\n      id: \"routes/_auth+/auth.$provider\",\n      parentId: \"root\",\n      path: \"auth/:provider\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route2\n    },\n  \"routes/_auth+/auth.$provider.callback\": {\n      id: \"routes/_auth+/auth.$provider.callback\",\n      parentId: \"routes/_auth+/auth.$provider\",\n      path: \"callback\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route3\n    },\n  \"routes/_auth+/forgot-password\": {\n      id: \"routes/_auth+/forgot-password\",\n      parentId: \"root\",\n      path: \"forgot-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route4\n    },\n  \"routes/_auth+/login\": {\n      id: \"routes/_auth+/login\",\n      parentId: \"root\",\n      path: \"login\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route5\n    },\n  \"routes/_auth+/logout\": {\n      id: \"routes/_auth+/logout\",\n      parentId: \"root\",\n      path: \"logout\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route6\n    },\n  \"routes/_auth+/onboarding\": {\n      id: \"routes/_auth+/onboarding\",\n      parentId: \"root\",\n      path: \"onboarding\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route7\n    },\n  \"routes/_auth+/onboarding_.$provider\": {\n      id: \"routes/_auth+/onboarding_.$provider\",\n      parentId: \"root\",\n      path: \"onboarding/:provider\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route8\n    },\n  \"routes/_auth+/reset-password\": {\n      id: \"routes/_auth+/reset-password\",\n      parentId: \"root\",\n      path: \"reset-password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route9\n    },\n  \"routes/_auth+/signup\": {\n      id: \"routes/_auth+/signup\",\n      parentId: \"root\",\n      path: \"signup\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route10\n    },\n  \"routes/_auth+/verify\": {\n      id: \"routes/_auth+/verify\",\n      parentId: \"root\",\n      path: \"verify\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route11\n    },\n  \"routes/_marketing+/about\": {\n      id: \"routes/_marketing+/about\",\n      parentId: \"root\",\n      path: \"about\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route12\n    },\n  \"routes/_marketing+/index\": {\n      id: \"routes/_marketing+/index\",\n      parentId: \"root\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route13\n    },\n  \"routes/_marketing+/privacy\": {\n      id: \"routes/_marketing+/privacy\",\n      parentId: \"root\",\n      path: \"privacy\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route14\n    },\n  \"routes/_marketing+/support\": {\n      id: \"routes/_marketing+/support\",\n      parentId: \"root\",\n      path: \"support\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route15\n    },\n  \"routes/_marketing+/tos\": {\n      id: \"routes/_marketing+/tos\",\n      parentId: \"root\",\n      path: \"tos\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route16\n    },\n  \"routes/_seo+/robots[.]txt\": {\n      id: \"routes/_seo+/robots[.]txt\",\n      parentId: \"root\",\n      path: \"robots.txt\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route17\n    },\n  \"routes/_seo+/sitemap[.]xml\": {\n      id: \"routes/_seo+/sitemap[.]xml\",\n      parentId: \"root\",\n      path: \"sitemap.xml\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route18\n    },\n  \"routes/admin+/cache\": {\n      id: \"routes/admin+/cache\",\n      parentId: \"root\",\n      path: \"admin/cache\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route19\n    },\n  \"routes/admin+/cache_.lru.$cacheKey\": {\n      id: \"routes/admin+/cache_.lru.$cacheKey\",\n      parentId: \"root\",\n      path: \"admin/cache/lru/:cacheKey\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route20\n    },\n  \"routes/admin+/cache_.sqlite\": {\n      id: \"routes/admin+/cache_.sqlite\",\n      parentId: \"root\",\n      path: \"admin/cache/sqlite\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route21\n    },\n  \"routes/admin+/cache_.sqlite.$cacheKey\": {\n      id: \"routes/admin+/cache_.sqlite.$cacheKey\",\n      parentId: \"routes/admin+/cache_.sqlite\",\n      path: \":cacheKey\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route22\n    },\n  \"routes/me\": {\n      id: \"routes/me\",\n      parentId: \"root\",\n      path: \"me\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route23\n    },\n  \"routes/resources+/download-user-data\": {\n      id: \"routes/resources+/download-user-data\",\n      parentId: \"root\",\n      path: \"resources/download-user-data\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route24\n    },\n  \"routes/resources+/healthcheck\": {\n      id: \"routes/resources+/healthcheck\",\n      parentId: \"root\",\n      path: \"resources/healthcheck\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route25\n    },\n  \"routes/resources+/note-images.$imageId\": {\n      id: \"routes/resources+/note-images.$imageId\",\n      parentId: \"root\",\n      path: \"resources/note-images/:imageId\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route26\n    },\n  \"routes/resources+/user-images.$imageId\": {\n      id: \"routes/resources+/user-images.$imageId\",\n      parentId: \"root\",\n      path: \"resources/user-images/:imageId\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route27\n    },\n  \"routes/settings+/profile\": {\n      id: \"routes/settings+/profile\",\n      parentId: \"root\",\n      path: \"settings/profile\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route28\n    },\n  \"routes/settings+/profile.change-email\": {\n      id: \"routes/settings+/profile.change-email\",\n      parentId: \"routes/settings+/profile\",\n      path: \"change-email\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route29\n    },\n  \"routes/settings+/profile.connections\": {\n      id: \"routes/settings+/profile.connections\",\n      parentId: \"routes/settings+/profile\",\n      path: \"connections\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route30\n    },\n  \"routes/settings+/profile.index\": {\n      id: \"routes/settings+/profile.index\",\n      parentId: \"routes/settings+/profile\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route31\n    },\n  \"routes/settings+/profile.password\": {\n      id: \"routes/settings+/profile.password\",\n      parentId: \"routes/settings+/profile\",\n      path: \"password\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route32\n    },\n  \"routes/settings+/profile.password_.create\": {\n      id: \"routes/settings+/profile.password_.create\",\n      parentId: \"routes/settings+/profile\",\n      path: \"password/create\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route33\n    },\n  \"routes/settings+/profile.photo\": {\n      id: \"routes/settings+/profile.photo\",\n      parentId: \"routes/settings+/profile\",\n      path: \"photo\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route34\n    },\n  \"routes/settings+/profile.two-factor\": {\n      id: \"routes/settings+/profile.two-factor\",\n      parentId: \"routes/settings+/profile\",\n      path: \"two-factor\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route35\n    },\n  \"routes/settings+/profile.two-factor.disable\": {\n      id: \"routes/settings+/profile.two-factor.disable\",\n      parentId: \"routes/settings+/profile.two-factor\",\n      path: \"disable\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route36\n    },\n  \"routes/settings+/profile.two-factor.index\": {\n      id: \"routes/settings+/profile.two-factor.index\",\n      parentId: \"routes/settings+/profile.two-factor\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route37\n    },\n  \"routes/settings+/profile.two-factor.verify\": {\n      id: \"routes/settings+/profile.two-factor.verify\",\n      parentId: \"routes/settings+/profile.two-factor\",\n      path: \"verify\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route38\n    },\n  \"routes/users+/$username\": {\n      id: \"routes/users+/$username\",\n      parentId: \"root\",\n      path: \"users/:username\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route39\n    },\n  \"routes/users+/$username_+/notes\": {\n      id: \"routes/users+/$username_+/notes\",\n      parentId: \"root\",\n      path: \"users/:username/notes\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route40\n    },\n  \"routes/users+/$username_+/notes.$noteId\": {\n      id: \"routes/users+/$username_+/notes.$noteId\",\n      parentId: \"routes/users+/$username_+/notes\",\n      path: \":noteId\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route41\n    },\n  \"routes/users+/$username_+/notes.$noteId_.edit\": {\n      id: \"routes/users+/$username_+/notes.$noteId_.edit\",\n      parentId: \"routes/users+/$username_+/notes\",\n      path: \":noteId/edit\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route42\n    },\n  \"routes/users+/$username_+/notes.index\": {\n      id: \"routes/users+/$username_+/notes.index\",\n      parentId: \"routes/users+/$username_+/notes\",\n      path: undefined,\n      index: true,\n      caseSensitive: undefined,\n      module: route43\n    },\n  \"routes/users+/$username_+/notes.new\": {\n      id: \"routes/users+/$username_+/notes.new\",\n      parentId: \"routes/users+/$username_+/notes\",\n      path: \"new\",\n      index: undefined,\n      caseSensitive: undefined,\n      module: route44\n    },\n  \"routes/users+/index\": {\n      id: \"routes/users+/index\",\n      parentId: \"root\",\n      path: \"users/\",\n      index: true,\n      caseSensitive: undefined,\n      module: route45\n    }\n  };"],
  "mappings": "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",
  "names": ["init", "Sentry", "key", "time", "key", "init", "action", "parse", "json", "Form", "useSubmit", "useRef", "z", "key", "headers", "key", "jsxDEV", "useRef", "React", "jsxDEV", "React", "jsxDEV", "React", "jsxDEV", "React", "jsxDEV", "jsxDEV", "useRef", "useNavigation", "useEffect", "useRef", "useState", "useSpinDelay", "jsxDEV", "jsxDEV", "jsxDEV", "useNavigation", "useSpinDelay", "useRef", "useState", "useEffect", "useId", "React", "useSpinDelay", "cva", "React", "jsxDEV", "cva", "React", "jsxDEV", "jsxDEV", "useSpinDelay", "jsxDEV", "useId", "useEffect", "jsxDEV", "React", "jsxDEV", "jsxDEV", "redirect", "redirect", "z", "remember", "z", "getInstanceInfo", "z", "getInstanceInfo", "key", "z", "remember", "z", "key", "entry", "z", "result", "redirect", "createCookieSessionStorage", "redirect", "React", "jsxDEV", "headers", "cookie", "cuid", "createCookieSessionStorage", "redirect", "z", "z", "cuid", "createCookieSessionStorage", "init", "redirect", "cookie", "useRouteLoaderData", "jsxDEV", "json", "z", "action", "parse", "useSubmit", "useRef", "Form", "mode", "ErrorBoundary", "loader", "Link", "jsxDEV", "loader", "ErrorBoundary", "Link", "action", "loader", "redirect", "Form", "z", "jsxDEV", "z", "Form", "cookie", "loader", "redirect", "action", "loader", "redirect", "createCookieSessionStorage", "ErrorBoundary", "action", "handleVerification", "loader", "meta", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "Link", "useActionData", "useSearchParams", "AuthenticityTokenInput", "HoneypotInputs", "safeRedirect", "z", "jsxDEV", "Outlet", "jsxDEV", "Outlet", "z", "ErrorBoundary", "action", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "Form", "useActionData", "useSearchParams", "AuthenticityTokenInput", "HoneypotInputs", "z", "action", "handle", "loader", "useForm", "parse", "json", "redirect", "Form", "useLoaderData", "z", "z", "jsxDEV", "handle", "json", "z", "loader", "redirect", "action", "parse", "useLoaderData", "useForm", "Form", "action", "handleVerification", "loader", "meta", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "useActionData", "useLoaderData", "useSearchParams", "AuthenticityTokenInput", "safeRedirect", "z", "jsxDEV", "z", "redirect", "loader", "json", "action", "parse", "session", "remember", "headers", "safeRedirect", "handleVerification", "meta", "useLoaderData", "useActionData", "useSearchParams", "useForm", "getFieldsetConstraint", "Form", "AuthenticityTokenInput", "conform", "ErrorBoundary", "action", "handleVerification", "loader", "meta", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "useActionData", "useLoaderData", "jsxDEV", "handleVerification", "json", "redirect", "loader", "action", "parse", "meta", "useLoaderData", "useActionData", "useForm", "getFieldsetConstraint", "Form", "conform", "ErrorBoundary", "Fragment", "jsxDEV", "z", "action", "parse", "json", "handleVerification", "useSearchParams", "useActionData", "useForm", "getFieldsetConstraint", "Form", "AuthenticityTokenInput", "HoneypotInputs", "conform", "ErrorBoundary", "jsxDEV", "remember", "redirect", "safeRedirect", "handleVerification", "headers", "z", "loader", "json", "action", "parse", "session", "useActionData", "useSearchParams", "useForm", "getFieldsetConstraint", "Form", "AuthenticityTokenInput", "HoneypotInputs", "conform", "Link", "meta", "ErrorBoundary", "action", "SignupRoute", "handleVerification", "loader", "meta", "onboardingEmailSessionKey", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "useActionData", "useLoaderData", "useSearchParams", "safeRedirect", "z", "jsxDEV", "onboardingEmailSessionKey", "SignupFormSchema", "z", "redirect", "loader", "json", "action", "parse", "session", "remember", "headers", "safeRedirect", "handleVerification", "meta", "SignupRoute", "useLoaderData", "useActionData", "useSearchParams", "useForm", "getFieldsetConstraint", "Form", "conform", "loader", "onboardingEmailSessionKey", "redirect", "ErrorBoundary", "action", "meta", "conform", "useForm", "getFieldsetConstraint", "parse", "E", "json", "redirect", "Link", "useFetcher", "AuthenticityTokenInput", "HoneypotInputs", "z", "jsxDEV", "z", "action", "parse", "json", "redirect", "meta", "useFetcher", "useForm", "getFieldsetConstraint", "AuthenticityTokenInput", "HoneypotInputs", "conform", "Link", "ErrorBoundary", "action", "loader", "redirect", "loader", "redirect", "action", "ErrorBoundary", "action", "SignupRoute", "meta", "conform", "useForm", "getFieldsetConstraint", "parse", "E", "json", "redirect", "Form", "useActionData", "useSearchParams", "AuthenticityTokenInput", "HoneypotInputs", "z", "jsxDEV", "z", "action", "parse", "json", "redirect", "meta", "SignupRoute", "useActionData", "useSearchParams", "useForm", "getFieldsetConstraint", "Form", "AuthenticityTokenInput", "HoneypotInputs", "conform", "ErrorBoundary", "jsxDEV", "meta", "tailwind_default", "jsxDEV", "meta", "jsxDEV", "jsxDEV", "jsxDEV", "loader", "loader", "loader", "loader", "ErrorBoundary", "action", "handle", "loader", "json", "redirect", "Form", "Link", "useFetcher", "useLoaderData", "useSearchParams", "useSubmit", "json", "json", "action", "permission", "jsxDEV", "handle", "loader", "redirect", "json", "action", "key", "useLoaderData", "useSearchParams", "useSubmit", "Form", "useFetcher", "Link", "ErrorBoundary", "loader", "json", "getAllInstances", "getInstanceInfo", "ensureInstance", "loader", "getInstanceInfo", "getAllInstances", "ensureInstance", "json", "loader", "json", "getAllInstances", "getInstanceInfo", "ensureInstance", "loader", "getInstanceInfo", "getAllInstances", "ensureInstance", "json", "loader", "redirect", "loader", "redirect", "loader", "json", "loader", "json", "loader", "loader", "loader", "loader", "loader", "handle", "loader", "json", "Link", "Outlet", "useMatches", "z", "jsxDEV", "z", "handle", "loader", "json", "useMatches", "Link", "Outlet", "action", "handle", "headers", "loader", "json", "useFetcher", "useLoaderData", "useState", "jsxDEV", "handle", "loader", "json", "headers", "action", "useLoaderData", "useFetcher", "useState", "action", "EditUserProfile", "handle", "loader", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "Link", "useFetcher", "useLoaderData", "AuthenticityTokenInput", "z", "jsxDEV", "handle", "z", "loader", "json", "action", "EditUserProfile", "useLoaderData", "Link", "parse", "useFetcher", "useForm", "getFieldsetConstraint", "AuthenticityTokenInput", "conform", "action", "handle", "loader", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "Link", "useActionData", "AuthenticityTokenInput", "z", "jsxDEV", "handle", "z", "redirect", "loader", "json", "action", "parse", "newPassword", "useActionData", "useForm", "getFieldsetConstraint", "Form", "AuthenticityTokenInput", "conform", "Link", "action", "handle", "loader", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "Link", "useActionData", "jsxDEV", "handle", "redirect", "loader", "json", "action", "parse", "useActionData", "useForm", "getFieldsetConstraint", "Form", "conform", "Link", "action", "handle", "loader", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "useActionData", "useLoaderData", "useNavigation", "useState", "AuthenticityTokenInput", "z", "jsxDEV", "handle", "z", "loader", "json", "action", "parse", "redirect", "useLoaderData", "useActionData", "useNavigation", "useForm", "getFieldsetConstraint", "useState", "Form", "AuthenticityTokenInput", "conform", "action", "handle", "loader", "json", "useFetcher", "AuthenticityTokenInput", "jsxDEV", "handle", "loader", "json", "action", "useFetcher", "AuthenticityTokenInput", "action", "TwoFactorRoute", "handle", "loader", "json", "redirect", "Link", "useFetcher", "useLoaderData", "AuthenticityTokenInput", "action", "TwoFactorRoute", "handle", "loader", "conform", "useForm", "getFieldsetConstraint", "parse", "json", "redirect", "Form", "useActionData", "useLoaderData", "useNavigation", "AuthenticityTokenInput", "z", "jsxDEV", "handle", "z", "VerifySchema", "loader", "redirect", "json", "action", "parse", "TwoFactorRoute", "useLoaderData", "useActionData", "useNavigation", "useForm", "getFieldsetConstraint", "Form", "AuthenticityTokenInput", "conform", "Fragment", "jsxDEV", "handle", "loader", "json", "action", "redirect", "TwoFactorRoute", "useLoaderData", "useFetcher", "Link", "AuthenticityTokenInput", "ErrorBoundary", "loader", "meta", "json", "Form", "Link", "useLoaderData", "Fragment", "jsxDEV", "loader", "json", "useLoaderData", "Form", "Link", "meta", "ErrorBoundary", "ErrorBoundary", "loader", "json", "Link", "Outlet", "useLoaderData", "jsxDEV", "loader", "json", "useLoaderData", "Link", "Outlet", "ErrorBoundary", "ErrorBoundary", "action", "loader", "meta", "useForm", "parse", "json", "Form", "Link", "useActionData", "useLoaderData", "AuthenticityTokenInput", "z", "jsxDEV", "loader", "json", "z", "action", "parse", "useLoaderData", "Link", "useActionData", "useForm", "Form", "AuthenticityTokenInput", "meta", "ErrorBoundary", "action", "loader", "json", "useLoaderData", "conform", "useForm", "getFieldsetConstraint", "parse", "cuid", "json", "redirect", "Form", "useFetcher", "useRef", "useState", "AuthenticityTokenInput", "z", "jsxDEV", "z", "action", "parse", "json", "cuid", "redirect", "useFetcher", "useForm", "getFieldsetConstraint", "Form", "AuthenticityTokenInput", "conform", "useRef", "useState", "jsxDEV", "loader", "json", "useLoaderData", "jsxDEV", "meta", "jsxDEV", "action", "loader", "json", "loader", "json", "ErrorBoundary", "loader", "json", "redirect", "Link", "useLoaderData", "z", "jsxDEV", "z", "loader", "redirect", "json", "useLoaderData", "Link", "ErrorBoundary"]
}

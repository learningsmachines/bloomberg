{"version":3,"file":"client.js","sources":["../../src/client.ts"],"sourcesContent":["import type { ServerRuntimeClientOptions } from '@sentry/core';\nimport { SDK_VERSION, ServerRuntimeClient } from '@sentry/core';\nimport * as os from 'os';\nimport { TextEncoder } from 'util';\n\nimport type { NodeClientOptions } from './types';\n\n/**\n * The Sentry Node SDK Client.\n *\n * @see NodeClientOptions for documentation on configuration options.\n * @see SentryClient for usage documentation.\n */\nexport class NodeClient extends ServerRuntimeClient<NodeClientOptions> {\n  /**\n   * Creates a new Node SDK instance.\n   * @param options Configuration options for this SDK.\n   */\n  public constructor(options: NodeClientOptions) {\n    options._metadata = options._metadata || {};\n    options._metadata.sdk = options._metadata.sdk || {\n      name: 'sentry.javascript.node',\n      packages: [\n        {\n          name: 'npm:@sentry/node',\n          version: SDK_VERSION,\n        },\n      ],\n      version: SDK_VERSION,\n    };\n\n    // Until node supports global TextEncoder in all versions we support, we are forced to pass it from util\n    options.transportOptions = {\n      textEncoder: new TextEncoder(),\n      ...options.transportOptions,\n    };\n\n    const clientOptions: ServerRuntimeClientOptions = {\n      ...options,\n      platform: 'node',\n      runtime: { name: 'node', version: global.process.version },\n      serverName: options.serverName || global.process.env.SENTRY_NAME || os.hostname(),\n    };\n\n    super(clientOptions);\n  }\n}\n"],"names":["ServerRuntimeClient","SDK_VERSION","TextEncoder"],"mappings":";;;;;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA,MAAA,UAAA,SAAAA,wBAAA,CAAA;AACA;AACA;AACA;AACA;AACA,GAAA,WAAA,CAAA,OAAA,EAAA;AACA,IAAA,OAAA,CAAA,SAAA,GAAA,OAAA,CAAA,SAAA,IAAA,EAAA,CAAA;AACA,IAAA,OAAA,CAAA,SAAA,CAAA,GAAA,GAAA,OAAA,CAAA,SAAA,CAAA,GAAA,IAAA;AACA,MAAA,IAAA,EAAA,wBAAA;AACA,MAAA,QAAA,EAAA;AACA,QAAA;AACA,UAAA,IAAA,EAAA,kBAAA;AACA,UAAA,OAAA,EAAAC,gBAAA;AACA,SAAA;AACA,OAAA;AACA,MAAA,OAAA,EAAAA,gBAAA;AACA,KAAA,CAAA;AACA;AACA;AACA,IAAA,OAAA,CAAA,gBAAA,GAAA;AACA,MAAA,WAAA,EAAA,IAAAC,gBAAA,EAAA;AACA,MAAA,GAAA,OAAA,CAAA,gBAAA;AACA,KAAA,CAAA;AACA;AACA,IAAA,MAAA,aAAA,GAAA;AACA,MAAA,GAAA,OAAA;AACA,MAAA,QAAA,EAAA,MAAA;AACA,MAAA,OAAA,EAAA,EAAA,IAAA,EAAA,MAAA,EAAA,OAAA,EAAA,MAAA,CAAA,OAAA,CAAA,OAAA,EAAA;AACA,MAAA,UAAA,EAAA,OAAA,CAAA,UAAA,IAAA,MAAA,CAAA,OAAA,CAAA,GAAA,CAAA,WAAA,IAAA,EAAA,CAAA,QAAA,EAAA;AACA,KAAA,CAAA;AACA;AACA,IAAA,KAAA,CAAA,aAAA,CAAA,CAAA;AACA,GAAA;AACA;;;;"}
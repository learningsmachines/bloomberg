{"version":3,"file":"linkederrors.js","sources":["../../../../src/integrations/linkederrors.ts"],"sourcesContent":["import type { Client, Event, EventHint, Integration } from '@sentry/types';\nimport { applyAggregateErrorsToEvent } from '@sentry/utils';\n\nimport { exceptionFromError } from '../eventbuilder';\n\nconst DEFAULT_KEY = 'cause';\nconst DEFAULT_LIMIT = 5;\n\ninterface LinkedErrorsOptions {\n  key: string;\n  limit: number;\n}\n\n/** Adds SDK info to an event. */\nexport class LinkedErrors implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'LinkedErrors';\n\n  /**\n   * @inheritDoc\n   */\n  public readonly name: string;\n\n  /**\n   * @inheritDoc\n   */\n  private readonly _key: LinkedErrorsOptions['key'];\n\n  /**\n   * @inheritDoc\n   */\n  private readonly _limit: LinkedErrorsOptions['limit'];\n\n  /**\n   * @inheritDoc\n   */\n  public constructor(options: Partial<LinkedErrorsOptions> = {}) {\n    this.name = LinkedErrors.id;\n    this._key = options.key || DEFAULT_KEY;\n    this._limit = options.limit || DEFAULT_LIMIT;\n  }\n\n  /** @inheritdoc */\n  public setupOnce(): void {\n    // noop\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public preprocessEvent(event: Event, hint: EventHint | undefined, client: Client): void {\n    const options = client.getOptions();\n\n    applyAggregateErrorsToEvent(\n      exceptionFromError,\n      options.stackParser,\n      options.maxValueLength,\n      this._key,\n      this._limit,\n      event,\n      hint,\n    );\n  }\n}\n"],"names":["applyAggregateErrorsToEvent","exceptionFromError"],"mappings":";;;;;AAKA,MAAA,WAAA,GAAA,OAAA,CAAA;AACA,MAAA,aAAA,GAAA,CAAA,CAAA;;AAOA;AACA,MAAA,YAAA,EAAA;AACA;AACA;AACA;AACA,GAAA,OAAA,YAAA,GAAA,CAAA,IAAA,CAAA,EAAA,GAAA,eAAA,CAAA;AACA;AACA;AACA;AACA;;AAGA;AACA;AACA;;AAGA;AACA;AACA;;AAGA;AACA;AACA;AACA,GAAA,WAAA,CAAA,OAAA,GAAA,EAAA,EAAA;AACA,IAAA,IAAA,CAAA,IAAA,GAAA,YAAA,CAAA,EAAA,CAAA;AACA,IAAA,IAAA,CAAA,IAAA,GAAA,OAAA,CAAA,GAAA,IAAA,WAAA,CAAA;AACA,IAAA,IAAA,CAAA,MAAA,GAAA,OAAA,CAAA,KAAA,IAAA,aAAA,CAAA;AACA,GAAA;AACA;AACA;AACA,GAAA,SAAA,GAAA;AACA;AACA,GAAA;AACA;AACA;AACA;AACA;AACA,GAAA,eAAA,CAAA,KAAA,EAAA,IAAA,EAAA,MAAA,EAAA;AACA,IAAA,MAAA,OAAA,GAAA,MAAA,CAAA,UAAA,EAAA,CAAA;AACA;AACA,IAAAA,iCAAA;AACA,MAAAC,+BAAA;AACA,MAAA,OAAA,CAAA,WAAA;AACA,MAAA,OAAA,CAAA,cAAA;AACA,MAAA,IAAA,CAAA,IAAA;AACA,MAAA,IAAA,CAAA,MAAA;AACA,MAAA,KAAA;AACA,MAAA,IAAA;AACA,KAAA,CAAA;AACA,GAAA;AACA,CAAA,CAAA,YAAA,CAAA,YAAA,EAAA;;;;"}
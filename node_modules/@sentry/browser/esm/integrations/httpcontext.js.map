{"version":3,"file":"httpcontext.js","sources":["../../../../src/integrations/httpcontext.ts"],"sourcesContent":["import type { Event, Integration } from '@sentry/types';\n\nimport { WINDOW } from '../helpers';\n\n/** HttpContext integration collects information about HTTP request headers */\nexport class HttpContext implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'HttpContext';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string;\n\n  public constructor() {\n    this.name = HttpContext.id;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(): void {\n    // noop\n  }\n\n  /** @inheritDoc */\n  public preprocessEvent(event: Event): void {\n    // if none of the information we want exists, don't bother\n    if (!WINDOW.navigator && !WINDOW.location && !WINDOW.document) {\n      return;\n    }\n\n    // grab as much info as exists and add it to the event\n    const url = (event.request && event.request.url) || (WINDOW.location && WINDOW.location.href);\n    const { referrer } = WINDOW.document || {};\n    const { userAgent } = WINDOW.navigator || {};\n\n    const headers = {\n      ...(event.request && event.request.headers),\n      ...(referrer && { Referer: referrer }),\n      ...(userAgent && { 'User-Agent': userAgent }),\n    };\n    const request = { ...event.request, ...(url && { url }), headers };\n\n    event.request = request;\n  }\n}\n"],"names":[],"mappings":";;AAIA;AACA,MAAA,WAAA,EAAA;AACA;AACA;AACA;AACA,GAAA,OAAA,YAAA,GAAA,CAAA,IAAA,CAAA,EAAA,GAAA,cAAA,CAAA;AACA;AACA;AACA;AACA;;AAGA,GAAA,WAAA,GAAA;AACA,IAAA,IAAA,CAAA,IAAA,GAAA,WAAA,CAAA,EAAA,CAAA;AACA,GAAA;AACA;AACA;AACA;AACA;AACA,GAAA,SAAA,GAAA;AACA;AACA,GAAA;AACA;AACA;AACA,GAAA,eAAA,CAAA,KAAA,EAAA;AACA;AACA,IAAA,IAAA,CAAA,MAAA,CAAA,SAAA,IAAA,CAAA,MAAA,CAAA,QAAA,IAAA,CAAA,MAAA,CAAA,QAAA,EAAA;AACA,MAAA,OAAA;AACA,KAAA;AACA;AACA;AACA,IAAA,MAAA,GAAA,GAAA,CAAA,KAAA,CAAA,OAAA,IAAA,KAAA,CAAA,OAAA,CAAA,GAAA,MAAA,MAAA,CAAA,QAAA,IAAA,MAAA,CAAA,QAAA,CAAA,IAAA,CAAA,CAAA;AACA,IAAA,MAAA,EAAA,QAAA,EAAA,GAAA,MAAA,CAAA,QAAA,IAAA,EAAA,CAAA;AACA,IAAA,MAAA,EAAA,SAAA,EAAA,GAAA,MAAA,CAAA,SAAA,IAAA,EAAA,CAAA;AACA;AACA,IAAA,MAAA,OAAA,GAAA;AACA,MAAA,IAAA,KAAA,CAAA,OAAA,IAAA,KAAA,CAAA,OAAA,CAAA,OAAA,CAAA;AACA,MAAA,IAAA,QAAA,IAAA,EAAA,OAAA,EAAA,QAAA,EAAA,CAAA;AACA,MAAA,IAAA,SAAA,IAAA,EAAA,YAAA,EAAA,SAAA,EAAA,CAAA;AACA,KAAA,CAAA;AACA,IAAA,MAAA,OAAA,GAAA,EAAA,GAAA,KAAA,CAAA,OAAA,EAAA,IAAA,GAAA,IAAA,EAAA,GAAA,EAAA,CAAA,EAAA,OAAA,EAAA,CAAA;AACA;AACA,IAAA,KAAA,CAAA,OAAA,GAAA,OAAA,CAAA;AACA,GAAA;AACA,CAAA,CAAA,WAAA,CAAA,YAAA,EAAA;;;;"}
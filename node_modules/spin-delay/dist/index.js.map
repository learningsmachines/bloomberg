{"version":3,"file":"index.js","sources":["../src/index.ts"],"sourcesContent":["import { useState, useEffect, useRef } from 'react';\n\ninterface SpinDelayOptions {\n  delay?: number;\n  minDuration?: number;\n}\n\ntype State = 'IDLE' | 'DELAY' | 'DISPLAY' | 'EXPIRE';\n\nexport const defaultOptions = {\n  delay: 500,\n  minDuration: 200,\n};\n\nexport function useSpinDelay(\n  loading: boolean,\n  options?: SpinDelayOptions,\n): boolean {\n  options = Object.assign({}, defaultOptions, options);\n\n  const [state, setState] = useState<State>('IDLE');\n  const timeout = useRef(null);\n\n  useEffect(() => {\n    if (loading && state === 'IDLE') {\n      clearTimeout(timeout.current);\n\n      timeout.current = setTimeout(() => {\n        if (!loading) {\n          return setState('IDLE');\n        }\n\n        timeout.current = setTimeout(() => {\n          setState('EXPIRE');\n        }, options.minDuration);\n\n        setState('DISPLAY');\n      }, options.delay);\n\n      setState('DELAY');\n    }\n\n    if (!loading && state !== 'DISPLAY') {\n      clearTimeout(timeout.current);\n      setState('IDLE');\n    }\n  }, [loading, state, options.delay, options.minDuration]);\n\n  useEffect(() => {\n    return () => clearTimeout(timeout.current);\n  }, []);\n\n  return state === 'DISPLAY' || state === 'EXPIRE';\n}\n\nexport default useSpinDelay;\n"],"names":["defaultOptions","delay","minDuration","useSpinDelay","loading","options","Object","assign","state","setState","useState","timeout","useRef","useEffect","clearTimeout","current","setTimeout"],"mappings":";;;;;QASaA,cAAc,GAAG;EAC5BC,EAAAA,KAAK,EAAE,GADqB;EAE5BC,EAAAA,WAAW,EAAE;EAFe;WAKdC,aACdC,SACAC;EAEAA,EAAAA,OAAO,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBP,cAAlB,EAAkCK,OAAlC,CAAV;EAEA,QAAM,CAACG,KAAD,EAAQC,QAAR,IAAoBC,cAAQ,CAAQ,MAAR,CAAlC;EACA,QAAMC,OAAO,GAAGC,YAAM,CAAC,IAAD,CAAtB;EAEAC,EAAAA,eAAS,CAAC;EACR,QAAIT,OAAO,IAAII,KAAK,KAAK,MAAzB,EAAiC;EAC/BM,MAAAA,YAAY,CAACH,OAAO,CAACI,OAAT,CAAZ;EAEAJ,MAAAA,OAAO,CAACI,OAAR,GAAkBC,UAAU,CAAC;EAC3B,YAAI,CAACZ,OAAL,EAAc;EACZ,iBAAOK,QAAQ,CAAC,MAAD,CAAf;EACD;;EAEDE,QAAAA,OAAO,CAACI,OAAR,GAAkBC,UAAU,CAAC;EAC3BP,UAAAA,QAAQ,CAAC,QAAD,CAAR;EACD,SAF2B,EAEzBJ,OAAO,CAACH,WAFiB,CAA5B;EAIAO,QAAAA,QAAQ,CAAC,SAAD,CAAR;EACD,OAV2B,EAUzBJ,OAAO,CAACJ,KAViB,CAA5B;EAYAQ,MAAAA,QAAQ,CAAC,OAAD,CAAR;EACD;;EAED,QAAI,CAACL,OAAD,IAAYI,KAAK,KAAK,SAA1B,EAAqC;EACnCM,MAAAA,YAAY,CAACH,OAAO,CAACI,OAAT,CAAZ;EACAN,MAAAA,QAAQ,CAAC,MAAD,CAAR;EACD;EACF,GAvBQ,EAuBN,CAACL,OAAD,EAAUI,KAAV,EAAiBH,OAAO,CAACJ,KAAzB,EAAgCI,OAAO,CAACH,WAAxC,CAvBM,CAAT;EAyBAW,EAAAA,eAAS,CAAC;EACR,WAAO,MAAMC,YAAY,CAACH,OAAO,CAACI,OAAT,CAAzB;EACD,GAFQ,EAEN,EAFM,CAAT;EAIA,SAAOP,KAAK,KAAK,SAAV,IAAuBA,KAAK,KAAK,QAAxC;EACD;;;;;;;;;;"}